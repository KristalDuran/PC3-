{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport { ColorMapping, bubbleRendering } from '../index';\nimport { bubbleClick, bubbleMouseMove } from '../index';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CircleOption, MapLocation, findMidPointOfPolygon, Point, drawCircle, elementAnimate, getTranslate } from '../utils/helper';\nimport { RectOption, Rect, drawRectangle, checkPropertyPath, getZoomTranslate, getRatioOfBubble, maintainSelection, getValueFromObject } from '../utils/helper';\n/**\n * Bubble module class\n */\n\nvar Bubble =\n/** @class */\nfunction () {\n  function Bubble(maps) {\n    /**\n     * Bubble Id for current layer\n     */\n    this.id = '';\n    this.maps = maps;\n    this.bubbleCollection = [];\n  }\n  /**\n   * To render bubble\n   */\n\n  /* tslint:disable:no-string-literal */\n\n  /* tslint:disable-next-line:max-func-body-length */\n\n\n  Bubble.prototype.renderBubble = function (bubbleSettings, shapeData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, bubbleID) {\n    var _this = this;\n\n    var layerData = layer.layerData;\n    var colorValuePath = bubbleSettings.colorValuePath;\n    var equalValue = !isNullOrUndefined(colorValuePath) ? colorValuePath.indexOf('.') > -1 ? getValueFromObject(shapeData, bubbleSettings.colorValuePath) : shapeData[colorValuePath] : shapeData[colorValuePath];\n    var colorValue = !isNullOrUndefined(colorValuePath) ? colorValuePath.indexOf('.') > -1 ? Number(getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : Number(shapeData[colorValuePath]) : Number(shapeData[colorValuePath]);\n    var bubbleValue = !isNullOrUndefined(bubbleSettings.valuePath) ? bubbleSettings.valuePath.indexOf('.') > -1 ? Number(getValueFromObject(shapeData, bubbleSettings.valuePath)) : Number(shapeData[bubbleSettings.valuePath]) : Number(shapeData[bubbleSettings.valuePath]);\n    var opacity;\n    var bubbleColor;\n\n    if (isNaN(bubbleValue) && isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n      return null;\n    }\n\n    var radius = getRatioOfBubble(bubbleSettings.minRadius, bubbleSettings.maxRadius, bubbleValue, range.min, range.max);\n    var colorMapping = new ColorMapping(this.maps);\n    var shapeColor = colorMapping.getColorByValue(bubbleSettings.colorMapping, colorValue, equalValue);\n    bubbleColor = Object.prototype.toString.call(shapeColor) === '[object Object]' && !isNullOrUndefined(shapeColor['fill']) ? shapeColor['fill'] : color;\n    opacity = Object.prototype.toString.call(shapeColor) === '[object Object]' && !isNullOrUndefined(shapeColor['opacity']) ? shapeColor['opacity'] : bubbleSettings.opacity;\n    var shapePoints = [[]];\n    this.maps.translateType = 'bubble';\n    var midIndex = 0;\n    var pointsLength = 0;\n    var currentLength = 0;\n\n    for (var i = 0, len = layerData.length; i < len; i++) {\n      var shape = layerData[i];\n      shape = shape['property'];\n      var shapePath = checkPropertyPath(shapeData[layer.shapeDataPath], layer.shapePropertyPath, shape);\n      var shapeDataLayerPathValue = !isNullOrUndefined(shapeData[layer.shapeDataPath]) && isNaN(shapeData[layer.shapeDataPath]) ? shapeData[layer.shapeDataPath].toLowerCase() : shapeData[layer.shapeDataPath];\n      var shapePathValue = !isNullOrUndefined(shape[shapePath]) && isNaN(shape[shapePath]) ? shape[shapePath].toLowerCase() : shape[shapePath];\n\n      if (shapeDataLayerPathValue === shapePathValue) {\n        if (layerData[i]['type'] === 'Point') {\n          shapePoints.push(this.getPoints(layerData[i], []));\n        } else if (!layerData[i]['_isMultiPolygon']) {\n          shapePoints.push(this.getPoints(layerData[i], []));\n          currentLength = shapePoints[shapePoints.length - 1].length;\n\n          if (pointsLength < currentLength) {\n            pointsLength = currentLength;\n            midIndex = shapePoints.length - 1;\n          }\n        } else {\n          var layer_1 = layerData[i];\n\n          for (var j = 0; j < layer_1.length; j++) {\n            shapePoints.push(this.getPoints(layer_1[j], []));\n            currentLength = shapePoints[shapePoints.length - 1].length;\n\n            if (pointsLength < currentLength) {\n              pointsLength = currentLength;\n              midIndex = shapePoints.length - 1;\n            }\n          }\n        }\n      }\n    }\n\n    var projectionType = this.maps.projectionType;\n    var centerY;\n    var eventArgs;\n    var center = findMidPointOfPolygon(shapePoints[midIndex], projectionType);\n\n    if (bubbleSettings.visible) {\n      if (!isNullOrUndefined(center)) {\n        centerY = this.maps.projectionType === 'Mercator' ? center['y'] : -center['y'];\n        eventArgs = {\n          cancel: false,\n          name: bubbleRendering,\n          border: bubbleSettings.border,\n          cx: center['x'],\n          cy: centerY,\n          data: shapeData,\n          fill: bubbleColor,\n          maps: this.maps.isBlazor ? null : this.maps,\n          radius: radius\n        };\n      } else {\n        var shapePointsLength = shapePoints.length - 1;\n\n        if (shapePoints[shapePointsLength]['x'] && shapePoints[shapePointsLength]['y']) {\n          eventArgs = {\n            cancel: false,\n            name: bubbleRendering,\n            border: bubbleSettings.border,\n            cx: shapePoints[shapePointsLength]['x'],\n            cy: shapePoints[shapePointsLength]['y'],\n            data: shapeData,\n            fill: bubbleColor,\n            maps: this.maps.isBlazor ? null : this.maps,\n            radius: radius\n          };\n        } else {\n          return;\n        }\n\n        if (this.maps.isBlazor) {\n          var maps = eventArgs.maps,\n              blazorEventArgs = __rest(eventArgs, [\"maps\"]);\n\n          eventArgs = blazorEventArgs;\n        }\n      }\n\n      this.maps.trigger('bubbleRendering', eventArgs, function (bubbleArgs) {\n        if (eventArgs.cancel) {\n          return;\n        }\n\n        var bubbleElement;\n\n        if (bubbleSettings.bubbleType === 'Circle') {\n          var circle = new CircleOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, 0, 0, eventArgs.radius, null);\n          bubbleElement = drawCircle(_this.maps, circle, group);\n        } else {\n          var y = _this.maps.projectionType === 'Mercator' ? eventArgs.cy - radius : eventArgs.cy + radius;\n          var rectangle = new RectOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, new Rect(0, 0, radius * 2, radius * 2), 2, 2);\n          eventArgs.cx -= radius;\n          eventArgs.cy = y;\n          bubbleElement = drawRectangle(_this.maps, rectangle, group);\n        }\n\n        maintainSelection(_this.maps.selectedBubbleElementId, _this.maps.bubbleSelectionClass, bubbleElement, 'BubbleselectionMapStyle');\n\n        _this.bubbleCollection.push({\n          LayerIndex: layerIndex,\n          BubbleIndex: bubbleIndex,\n          DataIndex: dataIndex,\n          element: bubbleElement,\n          center: {\n            x: eventArgs.cx,\n            y: eventArgs.cy\n          }\n        });\n\n        var translate;\n        var animate = layer.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n\n        if (_this.maps.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(_this.maps.zoomModule)) {\n          translate = getZoomTranslate(_this.maps, layer, animate);\n        } else {\n          translate = getTranslate(_this.maps, layer, animate);\n        }\n\n        var bubbleDataSource = bubbleSettings.dataSource;\n        var scale = translate['scale'];\n        var transPoint = translate['location'];\n        var position = new MapLocation(_this.maps.isTileMap ? eventArgs.cx : (eventArgs.cx + transPoint.x) * scale, _this.maps.isTileMap ? eventArgs.cy : (eventArgs.cy + transPoint.y) * scale);\n        bubbleElement.setAttribute('transform', 'translate( ' + position.x + ' ' + position.y + ' )');\n        var bubble = bubbleDataSource.length - 1 === dataIndex ? 'bubble' : null;\n\n        if (bubbleSettings.bubbleType === 'Square') {\n          position.x += radius;\n          position.y += radius * (_this.maps.projectionType === 'Mercator' ? 1 : -1);\n        } else {\n          radius = 0;\n        }\n\n        if (bubbleSettings.animationDuration > 0) {\n          elementAnimate(bubbleElement, bubbleSettings.animationDelay, bubbleSettings.animationDuration, position, _this.maps, bubble, radius);\n        }\n      });\n    }\n  };\n\n  Bubble.prototype.getPoints = function (shape, points) {\n    if (isNullOrUndefined(shape.map)) {\n      points = shape['point'];\n    } else {\n      shape.map(function (current, index) {\n        points.push(new Point(current['point']['x'], current['point']['y']));\n      });\n    }\n\n    return points;\n  };\n  /**\n   * To check and trigger bubble click event\n   */\n\n\n  Bubble.prototype.bubbleClick = function (e) {\n    var target = e.target.id;\n\n    if (target.indexOf('_LayerIndex_') === -1) {\n      return;\n    }\n\n    var data = this.getbubble(target);\n\n    if (isNullOrUndefined(data)) {\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      name: bubbleClick,\n      data: data,\n      maps: this.maps,\n      target: target,\n      x: e.clientX,\n      y: e.clientY\n    };\n\n    if (this.maps.isBlazor) {\n      var maps = eventArgs.maps,\n          blazorEventArgs = __rest(eventArgs, [\"maps\"]);\n\n      eventArgs = blazorEventArgs;\n    }\n\n    this.maps.trigger(bubbleClick, eventArgs);\n  };\n  /**\n   * To get bubble from target id\n   */\n\n\n  Bubble.prototype.getbubble = function (target) {\n    var id = target.split('_LayerIndex_');\n    var index = parseInt(id[1].split('_')[0], 10);\n    var layer = this.maps.layers[index];\n    var data;\n\n    if (target.indexOf('_BubbleIndex_') > -1) {\n      var bubbleIndex = parseInt(id[1].split('_BubbleIndex_')[1], 10);\n      var dataIndex = parseInt(id[1].split('_BubbleIndex_')[1].split('_dataIndex_')[1], 10);\n\n      if (!isNaN(bubbleIndex)) {\n        data = layer.bubbleSettings[bubbleIndex].dataSource[dataIndex];\n        return data;\n      }\n    }\n\n    return null;\n  };\n  /**\n   * To check and trigger bubble move event\n   */\n\n\n  Bubble.prototype.bubbleMove = function (e) {\n    var target = e.target.id;\n\n    if (target.indexOf('_LayerIndex_') === -1) {\n      return;\n    }\n\n    var data = this.getbubble(target);\n\n    if (isNullOrUndefined(data)) {\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      name: bubbleMouseMove,\n      data: data,\n      maps: this.maps,\n      target: target,\n      x: e.clientX,\n      y: e.clientY\n    };\n\n    if (this.maps.isBlazor) {\n      var maps = eventArgs.maps,\n          blazorEventArgs = __rest(eventArgs, [\"maps\"]);\n\n      eventArgs = blazorEventArgs;\n    }\n\n    this.maps.trigger(bubbleMouseMove, eventArgs);\n  };\n  /**\n   * Get module name.\n   */\n\n\n  Bubble.prototype.getModuleName = function () {\n    return 'Bubble';\n  };\n  /**\n   * To destroy the bubble.\n   * @return {void}\n   * @private\n   */\n\n\n  Bubble.prototype.destroy = function (maps) {\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return Bubble;\n}();\n\nexport { Bubble };","map":{"version":3,"sources":["/Users/kristalduran/Desktop/PC3-/PC3 Mapa/pc3-mapa/node_modules/@syncfusion/ej2-maps/src/maps/layers/bubble.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","ColorMapping","bubbleRendering","bubbleClick","bubbleMouseMove","isNullOrUndefined","CircleOption","MapLocation","findMidPointOfPolygon","Point","drawCircle","elementAnimate","getTranslate","RectOption","Rect","drawRectangle","checkPropertyPath","getZoomTranslate","getRatioOfBubble","maintainSelection","getValueFromObject","Bubble","maps","id","bubbleCollection","renderBubble","bubbleSettings","shapeData","color","range","bubbleIndex","dataIndex","layerIndex","layer","group","bubbleID","_this","layerData","colorValuePath","equalValue","colorValue","Number","bubbleValue","valuePath","opacity","bubbleColor","isNaN","radius","minRadius","maxRadius","min","max","colorMapping","shapeColor","getColorByValue","toString","shapePoints","translateType","midIndex","pointsLength","currentLength","len","shape","shapePath","shapeDataPath","shapePropertyPath","shapeDataLayerPathValue","toLowerCase","shapePathValue","push","getPoints","layer_1","j","projectionType","centerY","eventArgs","center","visible","cancel","name","border","cx","cy","data","fill","isBlazor","shapePointsLength","blazorEventArgs","trigger","bubbleArgs","bubbleElement","bubbleType","circle","y","rectangle","selectedBubbleElementId","bubbleSelectionClass","LayerIndex","BubbleIndex","DataIndex","element","x","translate","animate","animationDuration","zoomModule","zoomSettings","zoomFactor","bubbleDataSource","dataSource","scale","transPoint","position","isTileMap","setAttribute","bubble","animationDelay","points","map","current","index","target","getbubble","clientX","clientY","split","parseInt","layers","bubbleMove","getModuleName","destroy"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport { ColorMapping, bubbleRendering } from '../index';\nimport { bubbleClick, bubbleMouseMove } from '../index';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CircleOption, MapLocation, findMidPointOfPolygon, Point, drawCircle, elementAnimate, getTranslate } from '../utils/helper';\nimport { RectOption, Rect, drawRectangle, checkPropertyPath, getZoomTranslate, getRatioOfBubble, maintainSelection, getValueFromObject } from '../utils/helper';\n/**\n * Bubble module class\n */\nvar Bubble = /** @class */ (function () {\n    function Bubble(maps) {\n        /**\n         * Bubble Id for current layer\n         */\n        this.id = '';\n        this.maps = maps;\n        this.bubbleCollection = [];\n    }\n    /**\n     * To render bubble\n     */\n    /* tslint:disable:no-string-literal */\n    /* tslint:disable-next-line:max-func-body-length */\n    Bubble.prototype.renderBubble = function (bubbleSettings, shapeData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, bubbleID) {\n        var _this = this;\n        var layerData = layer.layerData;\n        var colorValuePath = bubbleSettings.colorValuePath;\n        var equalValue = (!isNullOrUndefined(colorValuePath)) ? ((colorValuePath.indexOf('.') > -1) ?\n            (getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : shapeData[colorValuePath]) : shapeData[colorValuePath];\n        var colorValue = (!isNullOrUndefined(colorValuePath)) ? ((colorValuePath.indexOf('.') > -1) ?\n            Number(getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : Number(shapeData[colorValuePath])) :\n            Number(shapeData[colorValuePath]);\n        var bubbleValue = (!isNullOrUndefined(bubbleSettings.valuePath)) ? ((bubbleSettings.valuePath.indexOf('.') > -1) ?\n            Number(getValueFromObject(shapeData, bubbleSettings.valuePath)) : Number(shapeData[bubbleSettings.valuePath])) :\n            Number(shapeData[bubbleSettings.valuePath]);\n        var opacity;\n        var bubbleColor;\n        if (isNaN(bubbleValue) && isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n            return null;\n        }\n        var radius = getRatioOfBubble(bubbleSettings.minRadius, bubbleSettings.maxRadius, bubbleValue, range.min, range.max);\n        var colorMapping = new ColorMapping(this.maps);\n        var shapeColor = colorMapping.getColorByValue(bubbleSettings.colorMapping, colorValue, equalValue);\n        bubbleColor = (Object.prototype.toString.call(shapeColor) === '[object Object]' &&\n            !isNullOrUndefined(shapeColor['fill'])) ? shapeColor['fill'] : color;\n        opacity = (Object.prototype.toString.call(shapeColor) === '[object Object]' &&\n            !isNullOrUndefined(shapeColor['opacity'])) ? shapeColor['opacity'] : bubbleSettings.opacity;\n        var shapePoints = [[]];\n        this.maps.translateType = 'bubble';\n        var midIndex = 0;\n        var pointsLength = 0;\n        var currentLength = 0;\n        for (var i = 0, len = layerData.length; i < len; i++) {\n            var shape = layerData[i];\n            shape = shape['property'];\n            var shapePath = checkPropertyPath(shapeData[layer.shapeDataPath], layer.shapePropertyPath, shape);\n            var shapeDataLayerPathValue = !isNullOrUndefined(shapeData[layer.shapeDataPath]) &&\n                isNaN(shapeData[layer.shapeDataPath]) ? shapeData[layer.shapeDataPath].toLowerCase() : shapeData[layer.shapeDataPath];\n            var shapePathValue = !isNullOrUndefined(shape[shapePath]) && isNaN(shape[shapePath])\n                ? shape[shapePath].toLowerCase() : shape[shapePath];\n            if (shapeDataLayerPathValue === shapePathValue) {\n                if (layerData[i]['type'] === 'Point') {\n                    shapePoints.push(this.getPoints(layerData[i], []));\n                }\n                else if (!layerData[i]['_isMultiPolygon']) {\n                    shapePoints.push(this.getPoints(layerData[i], []));\n                    currentLength = shapePoints[shapePoints.length - 1].length;\n                    if (pointsLength < currentLength) {\n                        pointsLength = currentLength;\n                        midIndex = shapePoints.length - 1;\n                    }\n                }\n                else {\n                    var layer_1 = layerData[i];\n                    for (var j = 0; j < layer_1.length; j++) {\n                        shapePoints.push(this.getPoints(layer_1[j], []));\n                        currentLength = shapePoints[shapePoints.length - 1].length;\n                        if (pointsLength < currentLength) {\n                            pointsLength = currentLength;\n                            midIndex = shapePoints.length - 1;\n                        }\n                    }\n                }\n            }\n        }\n        var projectionType = this.maps.projectionType;\n        var centerY;\n        var eventArgs;\n        var center = findMidPointOfPolygon(shapePoints[midIndex], projectionType);\n        if (bubbleSettings.visible) {\n            if (!isNullOrUndefined(center)) {\n                centerY = this.maps.projectionType === 'Mercator' ? center['y'] : (-center['y']);\n                eventArgs = {\n                    cancel: false, name: bubbleRendering, border: bubbleSettings.border,\n                    cx: center['x'], cy: centerY, data: shapeData, fill: bubbleColor,\n                    maps: this.maps.isBlazor ? null : this.maps, radius: radius\n                };\n            }\n            else {\n                var shapePointsLength = shapePoints.length - 1;\n                if (shapePoints[shapePointsLength]['x'] && shapePoints[shapePointsLength]['y']) {\n                    eventArgs = {\n                        cancel: false, name: bubbleRendering, border: bubbleSettings.border,\n                        cx: shapePoints[shapePointsLength]['x'], cy: shapePoints[shapePointsLength]['y'],\n                        data: shapeData, fill: bubbleColor, maps: this.maps.isBlazor ? null : this.maps,\n                        radius: radius\n                    };\n                }\n                else {\n                    return;\n                }\n                if (this.maps.isBlazor) {\n                    var maps = eventArgs.maps, blazorEventArgs = __rest(eventArgs, [\"maps\"]);\n                    eventArgs = blazorEventArgs;\n                }\n            }\n            this.maps.trigger('bubbleRendering', eventArgs, function (bubbleArgs) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                var bubbleElement;\n                if (bubbleSettings.bubbleType === 'Circle') {\n                    var circle = new CircleOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, 0, 0, eventArgs.radius, null);\n                    bubbleElement = drawCircle(_this.maps, circle, group);\n                }\n                else {\n                    var y = _this.maps.projectionType === 'Mercator' ? (eventArgs.cy - radius) : (eventArgs.cy + radius);\n                    var rectangle = new RectOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, new Rect(0, 0, radius * 2, radius * 2), 2, 2);\n                    eventArgs.cx -= radius;\n                    eventArgs.cy = y;\n                    bubbleElement = drawRectangle(_this.maps, rectangle, group);\n                }\n                maintainSelection(_this.maps.selectedBubbleElementId, _this.maps.bubbleSelectionClass, bubbleElement, 'BubbleselectionMapStyle');\n                _this.bubbleCollection.push({\n                    LayerIndex: layerIndex,\n                    BubbleIndex: bubbleIndex,\n                    DataIndex: dataIndex,\n                    element: bubbleElement,\n                    center: { x: eventArgs.cx, y: eventArgs.cy }\n                });\n                var translate;\n                var animate = layer.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n                if (_this.maps.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(_this.maps.zoomModule)) {\n                    translate = getZoomTranslate(_this.maps, layer, animate);\n                }\n                else {\n                    translate = getTranslate(_this.maps, layer, animate);\n                }\n                var bubbleDataSource = bubbleSettings.dataSource;\n                var scale = translate['scale'];\n                var transPoint = translate['location'];\n                var position = new MapLocation((_this.maps.isTileMap ? (eventArgs.cx) : ((eventArgs.cx + transPoint.x) * scale)), (_this.maps.isTileMap ? (eventArgs.cy) : ((eventArgs.cy + transPoint.y) * scale)));\n                bubbleElement.setAttribute('transform', 'translate( ' + (position.x) + ' ' + (position.y) + ' )');\n                var bubble = (bubbleDataSource.length - 1) === dataIndex ? 'bubble' : null;\n                if (bubbleSettings.bubbleType === 'Square') {\n                    position.x += radius;\n                    position.y += radius * (_this.maps.projectionType === 'Mercator' ? 1 : -1);\n                }\n                else {\n                    radius = 0;\n                }\n                if (bubbleSettings.animationDuration > 0) {\n                    elementAnimate(bubbleElement, bubbleSettings.animationDelay, bubbleSettings.animationDuration, position, _this.maps, bubble, radius);\n                }\n            });\n        }\n    };\n    Bubble.prototype.getPoints = function (shape, points) {\n        if (isNullOrUndefined(shape.map)) {\n            points = shape['point'];\n        }\n        else {\n            shape.map(function (current, index) {\n                points.push(new Point(current['point']['x'], current['point']['y']));\n            });\n        }\n        return points;\n    };\n    /**\n     * To check and trigger bubble click event\n     */\n    Bubble.prototype.bubbleClick = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleClick, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        if (this.maps.isBlazor) {\n            var maps = eventArgs.maps, blazorEventArgs = __rest(eventArgs, [\"maps\"]);\n            eventArgs = blazorEventArgs;\n        }\n        this.maps.trigger(bubbleClick, eventArgs);\n    };\n    /**\n     * To get bubble from target id\n     */\n    Bubble.prototype.getbubble = function (target) {\n        var id = target.split('_LayerIndex_');\n        var index = parseInt(id[1].split('_')[0], 10);\n        var layer = this.maps.layers[index];\n        var data;\n        if (target.indexOf('_BubbleIndex_') > -1) {\n            var bubbleIndex = parseInt(id[1].split('_BubbleIndex_')[1], 10);\n            var dataIndex = parseInt(id[1].split('_BubbleIndex_')[1].split('_dataIndex_')[1], 10);\n            if (!isNaN(bubbleIndex)) {\n                data = layer.bubbleSettings[bubbleIndex].dataSource[dataIndex];\n                return data;\n            }\n        }\n        return null;\n    };\n    /**\n     * To check and trigger bubble move event\n     */\n    Bubble.prototype.bubbleMove = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleMouseMove, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        if (this.maps.isBlazor) {\n            var maps = eventArgs.maps, blazorEventArgs = __rest(eventArgs, [\"maps\"]);\n            eventArgs = blazorEventArgs;\n        }\n        this.maps.trigger(bubbleMouseMove, eventArgs);\n    };\n    /**\n     * Get module name.\n     */\n    Bubble.prototype.getModuleName = function () {\n        return 'Bubble';\n    };\n    /**\n     * To destroy the bubble.\n     * @return {void}\n     * @private\n     */\n    Bubble.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Bubble;\n}());\nexport { Bubble };\n"]},"metadata":{},"sourceType":"module"}