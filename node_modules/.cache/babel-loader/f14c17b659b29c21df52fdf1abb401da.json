{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n/**\n * Helper functions for maps control\n */\n\n\nimport { createElement, isNullOrUndefined, remove, compile as templateComplier, merge } from '@syncfusion/ej2-base';\nimport { Animation, isBlazor } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { itemSelection } from '../../index';\nimport { animationComplete } from '../index';\nimport { markerClusterRendering } from '../index';\n/**\n * Maps internal use of `Size` type\n */\n\nvar Size =\n/** @class */\nfunction () {\n  function Size(width, height) {\n    this.width = width;\n    this.height = height;\n  }\n\n  return Size;\n}();\n\nexport { Size };\n/**\n * To find number from string\n * @private\n */\n\nexport function stringToNumber(value, containerSize) {\n  if (value !== null && value !== undefined) {\n    return value.indexOf('%') !== -1 ? containerSize / 100 * parseInt(value, 10) : parseInt(value, 10);\n  }\n\n  return null;\n}\n/**\n * Method to calculate the width and height of the maps\n */\n\nexport function calculateSize(maps) {\n  var containerWidth = maps.element.clientWidth;\n  var containerHeight = maps.element.clientHeight;\n  var parentHeight = maps.element.parentElement.clientHeight;\n  var parentWidth = maps.element.parentElement.clientWidth;\n  var containerElementWidth = stringToNumber(maps.element.style.width, containerWidth);\n  var containerElementHeight = stringToNumber(maps.element.style.height, containerWidth);\n\n  if (maps.width === '0px' || maps.width === '0%' || maps.height === '0%' || maps.height === '0px') {\n    maps.availableSize = new Size(0, 0);\n  } else {\n    maps.availableSize = new Size(stringToNumber(maps.width, containerWidth) || containerWidth || containerElementWidth || 600, stringToNumber(maps.height, containerHeight) || containerHeight || containerElementHeight || (maps.isDevice ? Math.min(window.innerWidth, window.innerHeight) : 450));\n  }\n}\n/**\n * Method to create svg for maps.\n */\n\nexport function createSvg(maps) {\n  maps.renderer = new SvgRenderer(maps.element.id);\n  calculateSize(maps);\n  maps.svgObject = maps.renderer.createSvg({\n    id: maps.element.id + '_svg',\n    width: maps.availableSize.width,\n    height: maps.availableSize.height\n  });\n\n  if (maps.width === '0px' || maps.width === '0%' || maps.height === '0%' || maps.height === '0px') {\n    maps.svgObject.setAttribute('height', '0');\n    maps.svgObject.setAttribute('width', '0');\n  }\n}\nexport function getMousePosition(pageX, pageY, element) {\n  var elementRect = element.getBoundingClientRect();\n  var pageXOffset = element.ownerDocument.defaultView.pageXOffset;\n  var pageYOffset = element.ownerDocument.defaultView.pageYOffset;\n  var clientTop = element.ownerDocument.documentElement.clientTop;\n  var clientLeft = element.ownerDocument.documentElement.clientLeft;\n  var positionX = elementRect.left + pageXOffset - clientLeft;\n  var positionY = elementRect.top + pageYOffset - clientTop;\n  return new MapLocation(pageX - positionX, pageY - positionY);\n}\n/**\n * Method to convert degrees to radians\n */\n\nexport function degreesToRadians(deg) {\n  return deg * (Math.PI / 180);\n}\n/**\n * Convert radians to degrees method\n */\n\nexport function radiansToDegrees(radian) {\n  return radian * (180 / Math.PI);\n}\n/**\n * Method for converting from latitude and longitude values to points\n */\n\nexport function convertGeoToPoint(latitude, longitude, factor, layer, mapModel) {\n  var mapSize = new Size(mapModel.mapAreaRect.width, mapModel.mapAreaRect.height);\n  var x;\n  var y;\n  var value;\n  var lat;\n  var lng;\n  var temp;\n  var longitudeMinMax = mapModel.baseMapBounds.longitude;\n  var latitudeMinMax = mapModel.baseMapBounds.latitude;\n  var latRadian = degreesToRadians(latitude);\n  var lngRadian = degreesToRadians(longitude);\n  var type = mapModel.projectionType;\n  var size = mapModel.isTileMap ? Math.pow(2, 1) * 256 : isNullOrUndefined(factor) ? Math.min(mapSize.width, mapSize.height) : Math.min(mapSize.width, mapSize.height) * factor;\n\n  if (layer.geometryType === 'Normal') {\n    x = isNullOrUndefined(factor) ? longitude : Math.abs((longitude - longitudeMinMax.min) * factor);\n    y = isNullOrUndefined(factor) ? latitude : Math.abs((latitudeMinMax.max - latitude) * factor);\n  } else if (layer.geometryType === 'Geographic') {\n    switch (type) {\n      case 'Mercator':\n        var pixelOrigin = new Point(size / 2, size / 2);\n        x = pixelOrigin.x + longitude * (size / 360);\n        var sinY = calculateBound(Math.sin(degreesToRadians(latitude)), -0.9999, 0.9999);\n        y = pixelOrigin.y + 0.5 * Math.log((1 + sinY) / (1 - sinY)) * -(size / (2 * Math.PI));\n        break;\n\n      case 'Winkel3':\n        value = aitoff(lngRadian, latRadian);\n        lng = (value.x + lngRadian / (Math.PI / 2)) / 2;\n        lat = (value.y + latRadian) / 2;\n        break;\n\n      case 'Miller':\n        lng = lngRadian;\n        lat = 1.25 * Math.log(Math.tan(Math.PI / 4 + .4 * latRadian));\n        break;\n\n      case 'Eckert3':\n        temp = Math.sqrt(Math.PI * (4 + Math.PI));\n        lng = 2 / temp * lngRadian * (1 + Math.sqrt(1 - 4 * latRadian * latRadian / (Math.PI * Math.PI)));\n        lat = 4 / temp * latRadian;\n        break;\n\n      case 'AitOff':\n        value = aitoff(lngRadian, latRadian);\n        lng = value.x;\n        lat = value.y;\n        break;\n\n      case 'Eckert5':\n        lng = lngRadian * (1 + Math.cos(latRadian)) / Math.sqrt(2 + Math.PI);\n        lat = 2 * latRadian / Math.sqrt(2 + Math.PI);\n        break;\n\n      case 'Equirectangular':\n        lng = lngRadian;\n        lat = latRadian;\n        break;\n\n      case 'Eckert6':\n        var epsilon = 1e-6;\n        temp = (1 + Math.PI / 2) * Math.sin(latRadian);\n        var delta = Infinity;\n\n        for (var i = 0; i < 10 && Math.abs(delta) > epsilon; i++) {\n          delta = (latRadian + Math.sin(latRadian) - temp) / (1 + Math.cos(latRadian));\n          latRadian = latRadian - delta;\n        }\n\n        temp = Math.sqrt(2 + Math.PI);\n        lng = lngRadian * (1 + Math.cos(latRadian)) / temp;\n        lat = 2 * latRadian / temp;\n        break;\n    }\n\n    x = type === 'Mercator' ? x : roundTo(xToCoordinate(mapModel, radiansToDegrees(lng)), 3);\n    y = type === 'Mercator' ? y : -roundTo(yToCoordinate(mapModel, radiansToDegrees(lat)), 3);\n  }\n\n  return new Point(x, y);\n}\n/**\n * Converting tile latitude and longitude to point\n */\n\nexport function convertTileLatLongToPoint(center, zoomLevel, tileTranslatePoint, isMapCoordinates) {\n  var size = Math.pow(2, zoomLevel) * 256;\n  var x = (center.x + 180) / 360;\n  var sinLatitude = Math.sin(center.y * Math.PI / 180);\n  var y = 0.5 - Math.log((1 + sinLatitude) / (1 - sinLatitude)) / (4 * Math.PI);\n  var pixelX = center.x;\n  var pixelY = center.y;\n\n  if (isMapCoordinates) {\n    pixelX = x * size + 0.5 + tileTranslatePoint.x;\n    pixelY = y * size + 0.5 + tileTranslatePoint.y;\n  }\n\n  return {\n    x: pixelX,\n    y: pixelY\n  };\n}\n/**\n * Method for calculate x point\n */\n\nexport function xToCoordinate(mapObject, val) {\n  var longitudeMinMax = mapObject.baseMapBounds.longitude;\n  var totalSize = isNullOrUndefined(mapObject.baseSize) ? mapObject.mapAreaRect.width : mapObject.mapAreaRect.width + Math.abs(mapObject.baseSize.width - mapObject.mapAreaRect.width) / 2;\n  return Math.round(totalSize * (val - longitudeMinMax.min) / (longitudeMinMax.max - longitudeMinMax.min) * 100) / 100;\n}\n/**\n * Method for calculate y point\n */\n\nexport function yToCoordinate(mapObject, val) {\n  var latitudeMinMax = mapObject.baseMapBounds.latitude;\n  return Math.round(mapObject.mapAreaRect.height * (val - latitudeMinMax.min) / (latitudeMinMax.max - latitudeMinMax.min) * 100) / 100;\n}\n/**\n * Method for calculate aitoff projection\n */\n\nexport function aitoff(x, y) {\n  var cosy = Math.cos(y);\n  var sincia = sinci(acos(cosy * Math.cos(x /= 2)));\n  return new Point(2 * cosy * Math.sin(x) * sincia, Math.sin(y) * sincia);\n}\n/**\n * Method to round the number\n */\n\nexport function roundTo(a, b) {\n  var c = Math.pow(10, b);\n  return Math.round(a * c) / c;\n}\nexport function sinci(x) {\n  return x / Math.sin(x);\n}\nexport function acos(a) {\n  return Math.acos(a);\n}\n/**\n * Method to calculate bound\n */\n\nexport function calculateBound(value, min, max) {\n  if (!isNullOrUndefined(min)) {\n    value = Math.max(value, min);\n  }\n\n  if (!isNullOrUndefined(max)) {\n    value = Math.min(value, max);\n  }\n\n  return value;\n}\n/**\n * To trigger the download element\n * @param fileName\n * @param type\n * @param url\n */\n\nexport function triggerDownload(fileName, type, url, isDownload) {\n  createElement('a', {\n    attrs: {\n      'download': fileName + '.' + type.toLocaleLowerCase(),\n      'href': url\n    }\n  }).dispatchEvent(new MouseEvent(isDownload ? 'click' : 'move', {\n    view: window,\n    bubbles: false,\n    cancelable: true\n  }));\n}\n/**\n * Map internal class for point\n */\n\nvar Point =\n/** @class */\nfunction () {\n  function Point(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  return Point;\n}();\n\nexport { Point };\n/**\n * Map internal class for min and max\n *\n */\n\nvar MinMax =\n/** @class */\nfunction () {\n  function MinMax(min, max) {\n    this.min = min;\n    this.max = max;\n  }\n\n  return MinMax;\n}();\n\nexport { MinMax };\n/**\n * Map internal class locations\n */\n\nvar GeoLocation =\n/** @class */\nfunction () {\n  function GeoLocation(latitude, longitude) {\n    this.latitude = new MinMax(latitude.min, latitude.max);\n    this.longitude = new MinMax(longitude.min, longitude.max);\n  }\n\n  return GeoLocation;\n}();\n\nexport { GeoLocation };\n/**\n * Function to measure the height and width of the text.\n * @param  {string} text\n * @param  {FontModel} font\n * @param  {string} id\n * @returns no\n * @private\n */\n\nexport function measureText(text, font) {\n  var measureObject = document.getElementById('mapsmeasuretext');\n\n  if (measureObject === null) {\n    measureObject = createElement('text', {\n      id: 'mapsmeasuretext'\n    });\n    document.body.appendChild(measureObject);\n  }\n\n  measureObject.innerHTML = text;\n  measureObject.style.position = 'absolute';\n\n  if (typeof font.size === 'number') {\n    measureObject.style.fontSize = font.size + 'px';\n  } else {\n    measureObject.style.fontSize = font.size;\n  }\n\n  measureObject.style.fontWeight = font.fontWeight;\n  measureObject.style.fontStyle = font.fontStyle;\n  measureObject.style.fontFamily = font.fontFamily;\n  measureObject.style.visibility = 'hidden';\n  measureObject.style.top = '-100';\n  measureObject.style.left = '0';\n  measureObject.style.whiteSpace = 'nowrap'; // For bootstrap line height issue\n\n  measureObject.style.lineHeight = 'normal';\n  return new Size(measureObject.clientWidth, measureObject.clientHeight);\n}\n/**\n * Internal use of text options\n * @private\n */\n\nvar TextOption =\n/** @class */\nfunction () {\n  function TextOption(id, x, y, anchor, text, transform, baseLine) {\n    if (transform === void 0) {\n      transform = '';\n    }\n\n    this.transform = '';\n    this.baseLine = 'auto';\n    this.id = id;\n    this.text = text;\n    this.transform = transform;\n    this.anchor = anchor;\n    this.x = x;\n    this.y = y;\n    this.baseLine = baseLine;\n  }\n\n  return TextOption;\n}();\n\nexport { TextOption };\n/**\n * Internal use of path options\n * @private\n */\n\nvar PathOption =\n/** @class */\nfunction () {\n  function PathOption(id, fill, width, color, opacity, dashArray, d) {\n    this.id = id;\n    this.opacity = opacity;\n    this.fill = fill;\n    this.stroke = color;\n    this['stroke-width'] = width;\n    this['stroke-dasharray'] = dashArray;\n    this.d = d;\n  }\n\n  return PathOption;\n}();\n\nexport { PathOption };\n/** @private */\n\nvar ColorValue =\n/** @class */\nfunction () {\n  function ColorValue(r, g, b) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n  }\n\n  return ColorValue;\n}();\n\nexport { ColorValue };\n/**\n * Internal use of rectangle options\n * @private\n */\n\nvar RectOption =\n/** @class */\nfunction (_super) {\n  __extends(RectOption, _super);\n\n  function RectOption(id, fill, border, opacity, rect, rx, ry, transform, dashArray) {\n    var _this = _super.call(this, id, fill, border.width, border.color, opacity, dashArray) || this;\n\n    _this.y = rect.y;\n    _this.x = rect.x;\n    _this.height = rect.height;\n    _this.width = rect.width;\n    _this.rx = rx ? rx : 0;\n    _this.ry = ry ? ry : 0;\n    _this.transform = transform ? transform : '';\n    _this['stroke-dasharray'] = dashArray;\n    return _this;\n  }\n\n  return RectOption;\n}(PathOption);\n\nexport { RectOption };\n/**\n * Internal use of circle options\n * @private\n */\n\nvar CircleOption =\n/** @class */\nfunction (_super) {\n  __extends(CircleOption, _super);\n\n  function CircleOption(id, fill, border, opacity, cx, cy, r, dashArray) {\n    var _this = _super.call(this, id, fill, border.width, border.color, opacity) || this;\n\n    _this.cy = cy;\n    _this.cx = cx;\n    _this.r = r;\n    _this['stroke-dasharray'] = dashArray;\n    return _this;\n  }\n\n  return CircleOption;\n}(PathOption);\n\nexport { CircleOption };\n/**\n * Internal use of polygon options\n * @private\n */\n\nvar PolygonOption =\n/** @class */\nfunction (_super) {\n  __extends(PolygonOption, _super);\n\n  function PolygonOption(id, points, fill, width, color, opacity, dashArray) {\n    if (opacity === void 0) {\n      opacity = 1;\n    }\n\n    if (dashArray === void 0) {\n      dashArray = '';\n    }\n\n    var _this = _super.call(this, id, fill, width, color, opacity, dashArray) || this;\n\n    _this.points = points;\n    return _this;\n  }\n\n  return PolygonOption;\n}(PathOption);\n\nexport { PolygonOption };\n/**\n * Internal use of polyline options\n * @private\n */\n\nvar PolylineOption =\n/** @class */\nfunction (_super) {\n  __extends(PolylineOption, _super);\n\n  function PolylineOption(id, points, fill, width, color, opacity, dashArray) {\n    if (opacity === void 0) {\n      opacity = 1;\n    }\n\n    if (dashArray === void 0) {\n      dashArray = '';\n    }\n\n    return _super.call(this, id, points, fill, width, color, opacity, dashArray) || this;\n  }\n\n  return PolylineOption;\n}(PolygonOption);\n\nexport { PolylineOption };\n/**\n * Internal use of line options\n * @private\n */\n\nvar LineOption =\n/** @class */\nfunction (_super) {\n  __extends(LineOption, _super);\n\n  function LineOption(id, line, fill, width, color, opacity, dashArray) {\n    if (opacity === void 0) {\n      opacity = 1;\n    }\n\n    if (dashArray === void 0) {\n      dashArray = '';\n    }\n\n    var _this = _super.call(this, id, fill, width, color, opacity, dashArray) || this;\n\n    _this.x1 = line.x1;\n    _this.y1 = line.y1;\n    _this.x2 = line.x2;\n    _this.y2 = line.y2;\n    return _this;\n  }\n\n  return LineOption;\n}(PathOption);\n\nexport { LineOption };\n/**\n * Internal use of line\n * @property\n */\n\nvar Line =\n/** @class */\nfunction () {\n  function Line(x1, y1, x2, y2) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n\n  return Line;\n}();\n\nexport { Line };\n/**\n * Internal use of map location type\n */\n\nvar MapLocation =\n/** @class */\nfunction () {\n  function MapLocation(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  return MapLocation;\n}();\n\nexport { MapLocation };\n/**\n * Internal use of type rect\n * @private\n */\n\nvar Rect =\n/** @class */\nfunction () {\n  function Rect(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n\n  return Rect;\n}();\n\nexport { Rect };\n/**\n * Internal use for pattern creation.\n * @property\n */\n\nvar PatternOptions =\n/** @class */\nfunction () {\n  function PatternOptions(id, x, y, width, height, patternUnits, patternContentUnits, patternTransform, href) {\n    if (patternUnits === void 0) {\n      patternUnits = 'userSpaceOnUse';\n    }\n\n    if (patternContentUnits === void 0) {\n      patternContentUnits = 'userSpaceOnUse';\n    }\n\n    if (patternTransform === void 0) {\n      patternTransform = '';\n    }\n\n    if (href === void 0) {\n      href = '';\n    }\n\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.patternUnits = patternUnits;\n    this.patternContentUnits = patternContentUnits;\n    this.patternTransform = patternTransform;\n    this.href = href;\n  }\n\n  return PatternOptions;\n}();\n\nexport { PatternOptions };\n/**\n * Internal rendering of text\n * @private\n */\n\nexport function renderTextElement(option, style, color, parent, isMinus) {\n  if (isMinus === void 0) {\n    isMinus = false;\n  }\n\n  var renderOptions = {\n    'id': option.id,\n    'x': option.x,\n    'y': option.y,\n    'fill': color,\n    'font-size': style.size,\n    'font-style': style.fontStyle,\n    'font-family': style.fontFamily,\n    'font-weight': style.fontWeight,\n    'text-anchor': option.anchor,\n    'transform': option.transform,\n    'opacity': style.opacity,\n    'dominant-baseline': option.baseLine\n  };\n  var text = typeof option.text === 'string' ? option.text : isMinus ? option.text[option.text.length - 1] : option.text[0];\n  var tspanElement;\n  var renderer = new SvgRenderer('');\n  var height;\n  var htmlObject = renderer.createText(renderOptions, text);\n  htmlObject.style['user-select'] = 'none';\n  htmlObject.style['-moz-user-select'] = 'none';\n  htmlObject.style['-webkit-touch-callout'] = 'none';\n  htmlObject.style['-webkit-user-select'] = 'none';\n  htmlObject.style['-khtml-user-select'] = 'none';\n  htmlObject.style['-ms-user-select'] = 'none';\n  htmlObject.style['-o-user-select'] = 'none';\n\n  if (typeof option.text !== 'string' && option.text.length > 1) {\n    for (var i = 1, len = option.text.length; i < len; i++) {\n      height = measureText(option.text[i], style).height;\n      tspanElement = renderer.createTSpan({\n        'x': option.x,\n        'id': option.id,\n        'y': option.y + (isMinus ? -(i * height) : i * height)\n      }, isMinus ? option.text[option.text.length - (i + 1)] : option.text[i]);\n      htmlObject.appendChild(tspanElement);\n    }\n  }\n\n  parent.appendChild(htmlObject);\n  return htmlObject;\n}\n/**\n * @private\n */\n\nexport function convertElement(element, markerId, data, index, mapObj) {\n  var childElement = createElement('div', {\n    id: markerId,\n    styles: 'position: absolute;pointer-events: auto;'\n  });\n  var elementLength = element.length;\n\n  while (elementLength > 0) {\n    childElement.appendChild(element[0]);\n    elementLength--;\n  }\n\n  var templateHtml = childElement.innerHTML;\n  var templateSplitValue;\n  var properties = Object.keys(data);\n\n  for (var i = 0; i < properties.length; i++) {\n    if (typeof data[properties[i]] === 'object') {\n      templateHtml = convertStringToValue(templateHtml, '', data, mapObj);\n    } else if (properties[i].toLowerCase() !== 'latitude' && properties[i].toLowerCase() !== 'longitude') {\n      templateHtml = templateHtml.replace(new RegExp('{{:' + properties[i] + '}}', 'g'), data[properties[i].toString()]);\n    }\n  }\n\n  childElement.innerHTML = templateHtml;\n  return childElement;\n}\nexport function formatValue(value, maps) {\n  var formatValue;\n  var formatFunction;\n\n  if (maps.format && !isNaN(Number(value))) {\n    formatFunction = maps.intl.getNumberFormat({\n      format: maps.format,\n      useGrouping: maps.useGroupingSeparator\n    });\n    formatValue = formatFunction(Number(value));\n  } else {\n    formatValue = value;\n  }\n\n  return formatValue;\n}\nexport function convertStringToValue(stringTemplate, format, data, maps) {\n  var templateHtml = stringTemplate === '' ? format : stringTemplate;\n  var templateValue = stringTemplate === '' ? templateHtml.split('${') : templateHtml.split('{{:');\n\n  for (var i = 0; i < templateValue.length; i++) {\n    if (templateValue[i].indexOf('}}') > -1 && templateValue[i].indexOf('.') > -1 || templateValue[i].indexOf('}') > -1 && templateValue[i].search('.') > -1) {\n      var split = stringTemplate === '' ? templateValue[i].split('}') : templateValue[i].split('}}');\n\n      for (var j = 0; j < split.length; j++) {\n        if (split[j].indexOf('.') > -1) {\n          var templateSplitValue = getValueFromObject(data, split[j]).toString();\n          templateHtml = stringTemplate === '' ? templateHtml.split('${' + split[j] + '}').join(formatValue(templateSplitValue, maps)) : templateHtml.replace(new RegExp('{{:' + split[j] + '}}', 'g'), templateSplitValue);\n        }\n      }\n    }\n  }\n\n  return templateHtml;\n}\nexport function convertElementFromLabel(element, labelId, data, index, mapObj) {\n  var labelEle = isNullOrUndefined(element.childElementCount) ? element[0] : element;\n  var templateHtml = labelEle.outerHTML;\n  var properties = Object.keys(data);\n\n  for (var i = 0; i < properties.length; i++) {\n    templateHtml = templateHtml.replace(new RegExp('{{:' + properties[i] + '}}', 'g'), data[properties[i].toString()]);\n  }\n\n  return createElement('div', {\n    id: labelId,\n    innerHTML: templateHtml,\n    styles: 'position: absolute'\n  });\n}\n/* tslint:disable:no-string-literal */\n//tslint:disable\n\nexport function drawSymbols(shape, imageUrl, location, markerID, shapeCustom, markerCollection, maps) {\n  var markerEle;\n  var x;\n  var y;\n  var size = shapeCustom['size'];\n  var borderColor = shapeCustom['borderColor'];\n  var borderWidth = parseFloat(shapeCustom['borderWidth']);\n  var fill = shapeCustom['fill'];\n  var dashArray = shapeCustom['dashArray'];\n  var border = {\n    color: borderColor,\n    width: borderWidth\n  };\n  var opacity = shapeCustom['opacity'];\n  var padding = 5;\n  var circleOptions;\n  var pathOptions;\n  var rectOptions;\n  pathOptions = new PathOption(markerID, fill, borderWidth, borderColor, opacity, dashArray, '');\n\n  if (shape === 'Circle') {\n    var radius = (size.width + size.height) / 4;\n    circleOptions = new CircleOption(markerID, fill, border, opacity, location.x, location.y, radius, dashArray);\n    markerEle = maps.renderer.drawCircle(circleOptions);\n  } else if (shape === 'Rectangle') {\n    x = location.x - size.width / 2;\n    y = location.y - size.height / 2;\n    rectOptions = new RectOption(markerID, fill, border, opacity, new Rect(x, y, size.width, size.height), null, null, '', dashArray);\n    markerEle = maps.renderer.drawRectangle(rectOptions);\n  } else if (shape === 'Image') {\n    x = location.x - size.width / 2;\n    y = location.y - size.height;\n    merge(pathOptions, {\n      'href': imageUrl,\n      'height': size.height,\n      'width': size.width,\n      x: x,\n      y: y\n    });\n    markerEle = maps.renderer.drawImage(pathOptions);\n  } else {\n    markerEle = calculateShapes(maps, shape, pathOptions, size, location, markerCollection);\n  }\n\n  return markerEle;\n}\nexport function getValueFromObject(data, value) {\n  if (!isNullOrUndefined(data) && !isNullOrUndefined(value)) {\n    var splits = value.replace(/\\[/g, '.').replace(/\\]/g, '').split('.');\n\n    if (splits.length === 1) {\n      data = data[splits[0]];\n    } else {\n      for (var i = 0; i < splits.length && !isNullOrUndefined(data); i++) {\n        data = data[splits[i]];\n      }\n    }\n  }\n\n  return data;\n}\nexport function markerColorChoose(eventArgs, data) {\n  var color = !isNullOrUndefined(eventArgs.colorValuePath) ? eventArgs.colorValuePath.indexOf('.') > -1 ? getValueFromObject(data, eventArgs.colorValuePath).toString() : data[eventArgs.colorValuePath] : data[eventArgs.colorValuePath];\n  eventArgs.fill = !isNullOrUndefined(eventArgs.colorValuePath) && !isNullOrUndefined(color) ? eventArgs.colorValuePath.indexOf('.') > -1 ? getValueFromObject(data, eventArgs.colorValuePath).toString() : data[eventArgs.colorValuePath] : eventArgs.fill;\n  return eventArgs;\n}\nexport function markerShapeChoose(eventArgs, data) {\n  if (!isNullOrUndefined(eventArgs.shapeValuePath) && !isNullOrUndefined(data[eventArgs.shapeValuePath])) {\n    var shape = eventArgs.shapeValuePath.indexOf('.') > -1 ? getValueFromObject(data, eventArgs.shapeValuePath).toString() : data[eventArgs.shapeValuePath];\n    eventArgs.shape = shape;\n\n    if (data[eventArgs.shapeValuePath] == 'Image') {\n      eventArgs.imageUrl = !isNullOrUndefined(eventArgs.imageUrlValuePath) && !isNullOrUndefined(data[eventArgs.imageUrlValuePath]) ? eventArgs.imageUrlValuePath.indexOf('.') > -1 ? getValueFromObject(data, eventArgs.imageUrlValuePath).toString() : data[eventArgs.imageUrlValuePath] : eventArgs.imageUrl;\n    }\n  } else {\n    var shapes = !isNullOrUndefined(eventArgs.shapeValuePath) ? eventArgs.shapeValuePath.indexOf('.') > -1 ? getValueFromObject(data, eventArgs.shapeValuePath).toString() : eventArgs.shape : eventArgs.shape;\n    eventArgs.shape = shapes;\n    var shapeImage = !isNullOrUndefined(eventArgs.imageUrlValuePath) ? eventArgs.imageUrlValuePath.indexOf('.') > -1 ? getValueFromObject(data, eventArgs.imageUrlValuePath).toString() : eventArgs.imageUrl : eventArgs.imageUrl;\n    eventArgs.imageUrl = shapeImage;\n  }\n\n  return eventArgs;\n} //tslint:disable\n\nexport function clusterTemplate(currentLayer, markerTemplate, maps, layerIndex, markerCollection, layerElement, check, zoomCheck) {\n  var bounds1;\n  var bounds2;\n  var colloideBounds = [];\n  var clusterColloideBounds = [];\n  var tempX = 0;\n  var tempY = 0;\n  var data;\n  var style = currentLayer.markerClusterSettings.labelStyle;\n  var options;\n  var textElement;\n  var tempElement1;\n  var shapeCustom;\n  var tempElement;\n  var postionY = 15 / 4;\n  var m = 0;\n  var indexCollection = [];\n  var clusters = currentLayer.markerClusterSettings;\n  var clusterGroup = maps.renderer.createGroup({\n    id: maps.element.id + '_LayerIndex_' + layerIndex + '_markerCluster'\n  });\n  var eventArg = {\n    cancel: false,\n    name: markerClusterRendering,\n    fill: clusters.fill,\n    height: clusters.height,\n    width: clusters.width,\n    imageUrl: clusters.imageUrl,\n    shape: clusters.shape,\n    data: data,\n    maps: maps,\n    cluster: clusters,\n    border: clusters.border\n  };\n\n  if (isBlazor()) {\n    var data_1 = eventArg.data,\n        maps_1 = eventArg.maps,\n        cluster = eventArg.cluster,\n        blazorEventArgs = __rest(eventArg, [\"data\", \"maps\", \"cluster\"]);\n\n    eventArg = blazorEventArgs;\n  }\n\n  maps.trigger('markerClusterRendering', eventArg, function (clusterargs) {\n    for (var o_1 = 0; o_1 < markerTemplate.childElementCount; o_1++) {\n      indexCollection = [];\n\n      if (markerTemplate.childNodes[o_1]['style']['visibility'] !== 'hidden') {\n        tempElement = markerTemplate.childNodes[o_1];\n        bounds1 = tempElement.getBoundingClientRect();\n        indexCollection.push(o_1);\n\n        if (!isNullOrUndefined(bounds1)) {\n          for (var p_1 = o_1 + 1; p_1 < markerTemplate.childElementCount; p_1++) {\n            if (markerTemplate.childNodes[p_1]['style']['visibility'] !== 'hidden') {\n              tempElement = markerTemplate.childNodes[p_1];\n              bounds2 = tempElement.getBoundingClientRect();\n\n              if (!isNullOrUndefined(bounds2)) {\n                if (bounds1.left > bounds2.right || bounds1.right < bounds2.left || bounds1.top > bounds2.bottom || bounds1.bottom < bounds2.top) {} else {\n                  colloideBounds.push(bounds2);\n                  markerTemplate.childNodes[p_1]['style']['visibility'] = \"hidden\";\n                  indexCollection.push(p_1);\n                }\n              }\n            }\n          }\n\n          tempX = bounds1.left + bounds1.width / 2;\n          tempY = bounds1.top + bounds1.height;\n\n          if (colloideBounds.length > 0) {\n            indexCollection = indexCollection.filter(function (item, index, value) {\n              return value.indexOf(item) === index;\n            });\n            var container = maps.element.getBoundingClientRect();\n            tempX = tempX - container['left'];\n            tempY = tempY - container['top'];\n            var translate = maps.isTileMap ? new Object() : getTranslate(maps, currentLayer, false);\n            var transPoint = maps.isTileMap ? {\n              x: 0,\n              y: 0\n            } : maps.translatePoint.x !== 0 ? maps.translatePoint : translate['location'];\n            var dataIndex = parseInt(markerTemplate.childNodes[o_1]['id'].split('_dataIndex_')[1].split('_')[0], 10);\n            var markerIndex = parseInt(markerTemplate.childNodes[o_1]['id'].split('_MarkerIndex_')[1].split('_')[0], 10);\n            markerTemplate.childNodes[o_1]['style']['visibility'] = \"hidden\";\n            var clusters_1 = currentLayer.markerClusterSettings;\n\n            if (eventArg.cancel) {\n              shapeCustom = {\n                size: new Size(clusters_1.width, clusters_1.height),\n                fill: clusters_1.fill,\n                borderColor: clusters_1.border.color,\n                borderWidth: clusters_1.border.width,\n                opacity: clusters_1.opacity,\n                dashArray: clusters_1.dashArray\n              };\n              shapeCustom['fill'] = clusters_1.fill;\n              shapeCustom['size']['width'] = clusters_1.width;\n              shapeCustom['size']['height'] = clusters_1.height;\n              shapeCustom['imageUrl'] = clusters_1.imageUrl;\n              shapeCustom['shape'] = clusters_1.shape;\n              shapeCustom['borderColor'] = clusters_1.border.color;\n              shapeCustom['borderWidth'] = clusters_1.border.width;\n            } else {\n              shapeCustom = {\n                size: new Size(clusters_1.width, clusters_1.height),\n                fill: clusters_1.fill,\n                borderColor: clusters_1.border.color,\n                borderWidth: clusters_1.border.width,\n                opacity: clusters_1.opacity,\n                dashArray: clusters_1.dashArray\n              };\n              shapeCustom['fill'] = eventArg.fill;\n              shapeCustom['size']['width'] = eventArg.width;\n              shapeCustom['size']['height'] = eventArg.height;\n              shapeCustom['imageUrl'] = eventArg.imageUrl;\n              shapeCustom['shape'] = eventArg.shape;\n              shapeCustom['borderColor'] = eventArg.border.color;\n              shapeCustom['borderWidth'] = eventArg.border.width;\n            }\n\n            tempX = maps.isTileMap ? tempX : markerTemplate.id.indexOf('_Markers_Group') > -1 ? tempX : (tempX + transPoint.x) * maps.mapScaleValue;\n            tempY = maps.isTileMap ? tempY : markerTemplate.id.indexOf('_Markers_Group') > -1 ? tempY : (tempY + transPoint.y) * maps.mapScaleValue;\n            var clusterID = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex + '_cluster_' + m;\n            var labelID = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex + '_cluster_' + m + '_datalabel_' + m;\n            m++;\n            var imageShapeY = shapeCustom['shape'] === 'Image' ? shapeCustom['size']['height'] / 2 : 0;\n            var ele = drawSymbols(shapeCustom['shape'], shapeCustom['imageUrl'], {\n              x: 0,\n              y: imageShapeY\n            }, clusterID, shapeCustom, markerCollection, maps);\n            ele.setAttribute('transform', 'translate( ' + tempX + ' ' + tempY + ' )');\n\n            if (eventArg.shape === 'Balloon') {\n              ele.children[0].innerHTML = indexCollection.toString();\n            } else {\n              ele.innerHTML = indexCollection.toString();\n            }\n\n            options = new TextOption(labelID, 0, postionY, 'middle', (colloideBounds.length + 1).toString(), '', '');\n            textElement = renderTextElement(options, style, style.color, markerCollection);\n            textElement.setAttribute('transform', 'translate( ' + tempX + ' ' + tempY + ' )');\n            clusterGroup.appendChild(textElement);\n            clusterGroup.appendChild(ele);\n          }\n        }\n\n        colloideBounds = [];\n      }\n    }\n\n    layerElement.appendChild(clusterGroup);\n    maps.svgObject.appendChild(layerElement);\n    maps.element.appendChild(maps.svgObject);\n\n    for (var o = 0; o < clusterGroup.childElementCount; o++) {\n      if (clusterGroup.childNodes[o]['style']['visibility'] !== 'hidden') {\n        tempElement = clusterGroup.childNodes[o];\n        bounds1 = tempElement.getBoundingClientRect();\n\n        if (!isNullOrUndefined(bounds1) && !(tempElement.id.indexOf('_datalabel_') > -1)) {\n          for (var p = o + 1; p < clusterGroup.childElementCount; p++) {\n            if (clusterGroup.childNodes[p]['style']['visibility'] !== 'hidden') {\n              tempElement1 = clusterGroup.childNodes[p];\n              bounds2 = tempElement1.getBoundingClientRect();\n\n              if (!isNullOrUndefined(bounds2) && !(tempElement1.id.indexOf('_datalabel_') > -1)) {\n                if (bounds1.left > bounds2.right || bounds1.right < bounds2.left || bounds1.top > bounds2.bottom || bounds1.bottom < bounds2.top) {} else {\n                  clusterColloideBounds.push(tempElement1);\n                  clusterColloideBounds.push(clusterGroup.childNodes[p - 1]);\n                  clusterGroup.childNodes[p]['style']['visibility'] = \"hidden\";\n                  clusterGroup.childNodes[p - 1]['style']['visibility'] = \"hidden\";\n                  indexCollection.push(p);\n                }\n              }\n            }\n          }\n\n          if (clusterColloideBounds.length > 0) {\n            tempElement = clusterGroup.childNodes[o];\n\n            for (var i = 0; i < clusterColloideBounds.length; i++) {\n              if (tempElement.tagName === 'g') {\n                tempElement.childNodes[0].textContent = tempElement.childNodes[0].textContent + ',' + clusterColloideBounds[i].textContent;\n              } else {\n                tempElement.textContent = tempElement.textContent + ',' + clusterColloideBounds[i].textContent;\n              }\n\n              clusterGroup.childNodes[o - 1].textContent = (+clusterGroup.childNodes[o - 1].textContent + +clusterColloideBounds[i + 1].textContent).toString();\n              i++;\n            }\n          }\n\n          clusterColloideBounds = [];\n        }\n      }\n    }\n\n    while (0 < clusterGroup.childNodes.length) {\n      markerCollection.insertBefore(clusterGroup.childNodes[0], markerCollection.firstChild);\n    }\n\n    if (check) {\n      layerElement.appendChild(markerCollection);\n    } else {\n      getElementByID(maps.element.id + '_Secondary_Element').appendChild(markerCollection);\n      layerElement.appendChild(markerCollection);\n    }\n\n    document.getElementById(maps.element.id + '_LayerIndex_0_markerCluster').remove();\n\n    if (zoomCheck) {\n      document.getElementById(maps.element.id + '_Layer_Collections').appendChild(layerElement);\n    }\n  });\n}\nexport function mergeSeparateCluster(sameMarkerData, maps, markerElement) {\n  var layerIndex = sameMarkerData[0].layerIndex;\n  var clusterIndex = sameMarkerData[0].targetClusterIndex;\n  var markerIndex = sameMarkerData[0].markerIndex;\n  var dataIndex = sameMarkerData[0].dataIndex;\n  var markerId = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex;\n  var clusterId = markerId + '_dataIndex_' + dataIndex + '_cluster_' + clusterIndex;\n  var clusterEle = getElement(clusterId);\n  var clusterEleLabel = getElement(clusterId + '_datalabel_' + clusterIndex);\n  clusterEle.setAttribute('visibility', 'visible');\n  clusterEleLabel.setAttribute('visibility', 'visible');\n  var markerEle;\n  var markerDataLength = sameMarkerData[0].data.length;\n\n  for (var i = 0; i < markerDataLength; i++) {\n    markerEle = getElement(markerId + '_dataIndex_' + sameMarkerData[0].data[i]['index']);\n    markerEle['style']['visibility'] = \"hidden\";\n  }\n\n  removeElement(maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_markerClusterConnectorLine');\n}\nexport function clusterSeparate(sameMarkerData, maps, markerElement, isDom) {\n  var layerIndex = sameMarkerData[0].layerIndex;\n  var markerIndex = sameMarkerData[0].markerIndex;\n  var clusterIndex = sameMarkerData[0].targetClusterIndex;\n  var dataIndex = sameMarkerData[0].dataIndex;\n  var getElementFunction = isDom ? getElement : markerElement.querySelector.bind(markerElement);\n  var getQueryConnect = isDom ? '' : '#';\n  var markerId = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex;\n  var clusterId = markerId + '_dataIndex_' + dataIndex + '_cluster_' + clusterIndex;\n  var clusterEle = getElementFunction(getQueryConnect + '' + clusterId);\n  var clusterEleLabel = getElementFunction(getQueryConnect + '' + clusterId + '_datalabel_' + clusterIndex);\n  clusterEle.setAttribute('visibility', 'hidden');\n  clusterEleLabel.setAttribute('visibility', 'hidden');\n  var marker = maps.layers[layerIndex].markerSettings[markerIndex];\n  var markerEle = getElementFunction(getQueryConnect + '' + markerId + '_dataIndex_' + dataIndex);\n  var height = marker.height;\n  var width = marker.width;\n  var centerX = +clusterEle.getAttribute('transform').split('translate(')[1].trim().split(' ')[0];\n  var centerY = +clusterEle.getAttribute('transform').split('translate(')[1].trim().split(' ')[1].split(')')[0].trim();\n  var radius = width + 5;\n  var area = 2 * 3.14 * radius;\n  var totalMarker = 0;\n  var numberOfMarker = Math.round(area / width);\n  totalMarker += numberOfMarker;\n  var markerDataLength = sameMarkerData[0].data.length;\n  var percent = Math.round(height / area * 100);\n  percent = markerDataLength < numberOfMarker ? 100 / markerDataLength : percent;\n  var angle = percent / 100 * 360;\n  var newAngle = markerDataLength < numberOfMarker ? 45 : 0;\n  var count = 1;\n  var start = 'M ' + centerX + ' ' + centerY + ' ';\n  var path = '';\n\n  for (var i = 0; i < markerDataLength; i++) {\n    if (totalMarker === i || Math.round(newAngle) >= 360) {\n      count++;\n      radius = (width + 5) * count;\n      newAngle = 0;\n      area = 2 * 3.14 * radius;\n      numberOfMarker = Math.round(area / height);\n      percent = Math.round(height / area * 100);\n\n      while (percent * numberOfMarker < 100) {\n        numberOfMarker++;\n      }\n\n      angle = percent / 100 * 360;\n      totalMarker += numberOfMarker;\n    }\n\n    var x1 = centerX + radius * Math.sin(Math.PI * 2 * newAngle / 360);\n    var y1 = centerY + radius * Math.cos(Math.PI * 2 * newAngle / 360);\n    path += start + 'L ' + x1 + ' ' + y1 + ' ';\n    markerEle = getElementFunction(getQueryConnect + '' + markerId + '_dataIndex_' + sameMarkerData[0].data[i]['index']);\n    markerEle.setAttribute('transform', 'translate( ' + x1 + ' ' + y1 + ')');\n    markerEle['style']['visibility'] = \"visible\";\n    newAngle += angle;\n  }\n\n  var options;\n  var connectorLine = maps.layers[layerIndex].markerClusterSettings.connectorLineSettings;\n  options = {\n    d: path,\n    id: maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex + '_markerClusterConnectorLine',\n    stroke: connectorLine.color,\n    opacity: connectorLine.opacity,\n    'stroke-width': connectorLine.width\n  };\n  markerElement = isDom ? getElementFunction(maps.element.id + '_Markers_Group') : markerElement;\n  var groupEle = maps.renderer.createGroup({\n    id: maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_markerClusterConnectorLine'\n  });\n  groupEle.appendChild(maps.renderer.drawPath(options));\n  markerElement.insertBefore(groupEle, markerElement.querySelector('#' + markerId + '_dataIndex_0'));\n}\nexport function marker(eventArgs, markerSettings, markerData, dataIndex, location, transPoint, markerID, offset, scale, maps, markerCollection) {\n  var shapeCustom = {\n    size: new Size(eventArgs.width, eventArgs.height),\n    fill: eventArgs.fill,\n    borderColor: eventArgs.border.color,\n    borderWidth: eventArgs.border.width,\n    opacity: markerSettings.opacity,\n    dashArray: markerSettings.dashArray\n  };\n  var ele = drawSymbols(eventArgs.shape, eventArgs.imageUrl, {\n    x: 0,\n    y: 0\n  }, markerID, shapeCustom, markerCollection, maps);\n  var x = (maps.isTileMap ? location.x : (location.x + transPoint.x) * scale) + offset.x;\n  var y = (maps.isTileMap ? location.y : (location.y + transPoint.y) * scale) + offset.y;\n  ele.setAttribute('transform', 'translate( ' + x + ' ' + y + ' )');\n  maintainSelection(maps.selectedMarkerElementId, maps.markerSelectionClass, ele, 'MarkerselectionMapStyle');\n  markerCollection.appendChild(ele);\n  var element = markerData.length - 1 === dataIndex ? 'marker' : null;\n  var markerPoint = new Point(x, y);\n\n  if (markerSettings.animationDuration > 0) {\n    elementAnimate(ele, markerSettings.animationDelay, markerSettings.animationDuration, markerPoint, maps, element);\n  }\n\n  return markerCollection;\n}\nexport function markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplate, location, scale, offset, maps) {\n  templateFn = getTemplateFunction(eventArgs.template);\n\n  if (templateFn && (!maps.isBlazor ? templateFn(data, null, null, maps.element.id + '_MarkerTemplate' + markerIndex, false).length : {})) {\n    var templateElement = templateFn(data, null, null, maps.element.id + '_MarkerTemplate' + markerIndex, false);\n    var markerElement = convertElement(templateElement, markerID, data, markerIndex, maps);\n\n    for (var i = 0; i < markerElement.children.length; i++) {\n      markerElement.children[i].style.pointerEvents = 'none';\n    }\n\n    markerElement.style.left = (maps.isTileMap ? location.x : Math.abs(maps.baseMapRectBounds['min']['x'] - location.x) * scale) + offset.x + 'px';\n    markerElement.style.top = (maps.isTileMap ? location.y : Math.abs(maps.baseMapRectBounds['min']['y'] - location.y) * scale) + offset.y + 'px';\n    markerTemplate.appendChild(markerElement);\n\n    if (maps.layers[maps.baseLayerIndex].layerType === 'GoogleStaticMap') {\n      var staticMapOffset = getElementByID(maps.element.id + '_StaticGoogleMap').getBoundingClientRect();\n      var markerElementOffset = markerElement.getBoundingClientRect();\n      var staticMapOffsetWidth = 640;\n\n      if ((staticMapOffset['x'] > markerElementOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < markerElementOffset['x'] + markerElementOffset['width']) && (staticMapOffset['y'] > markerElementOffset['y'] || staticMapOffset['y'] + staticMapOffset['height'] < markerElementOffset['y'] + markerElementOffset['height'])) {\n        markerElement.style.display = 'none';\n      }\n    }\n  }\n\n  return markerTemplate;\n}\n/**\n * To maintain selection during page resize\n * @private\n */\n\nexport function maintainSelection(elementId, elementClass, element, className) {\n  if (elementId) {\n    for (var index = 0; index < elementId.length; index++) {\n      if (element.getAttribute('id') === elementId[index]) {\n        if (isNullOrUndefined(getElement(elementClass.id)) || index === 0) {\n          document.body.appendChild(elementClass);\n\n          if (element.id.indexOf('_MarkerIndex_') > -1 && element.childElementCount > 0) {\n            element.children[0].setAttribute('class', className);\n          }\n        }\n\n        element.setAttribute('class', className);\n      }\n    }\n  }\n}\n/**\n * To maintain selection style class\n * @private\n */\n\nexport function maintainStyleClass(id, idClass, fill, opacity, borderColor, borderWidth, maps) {\n  if (!getElement(id)) {\n    var styleClass = void 0;\n    styleClass = createElement('style', {\n      id: id,\n      innerHTML: '.' + idClass + '{fill:' + fill + ';' + 'opacity:' + opacity + ';' + 'stroke-width:' + borderWidth + ';' + 'stroke:' + borderColor + ';' + '}'\n    });\n    maps.shapeSelectionClass = styleClass;\n    document.body.appendChild(styleClass);\n  }\n}\n/**\n * Internal use of append shape element\n * @private\n */\n\nexport function appendShape(shape, element) {\n  if (element) {\n    element.appendChild(shape);\n  }\n\n  return shape;\n}\n/**\n * Internal rendering of Circle\n * @private\n */\n\nexport function drawCircle(maps, options, element) {\n  return appendShape(maps.renderer.drawCircle(options), element);\n}\n/**\n * Internal rendering of Rectangle\n * @private\n */\n\nexport function drawRectangle(maps, options, element) {\n  return appendShape(maps.renderer.drawRectangle(options), element);\n}\n/**\n * Internal rendering of Path\n * @private\n */\n\nexport function drawPath(maps, options, element) {\n  return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Polygon\n * @private\n */\n\nexport function drawPolygon(maps, options, element) {\n  return appendShape(maps.renderer.drawPolygon(options), element);\n}\n/**\n * Internal rendering of Polyline\n * @private\n */\n\nexport function drawPolyline(maps, options, element) {\n  return appendShape(maps.renderer.drawPolyline(options), element);\n}\n/**\n * Internal rendering of Line\n * @private\n */\n\nexport function drawLine(maps, options, element) {\n  return appendShape(maps.renderer.drawLine(options), element);\n}\n/**\n * @private\n * Calculate marker shapes\n */\n\nexport function calculateShapes(maps, shape, options, size, location, markerEle) {\n  var tempGroup;\n\n  switch (shape) {\n    case 'Balloon':\n      tempGroup = drawBalloon(maps, options, size, location, markerEle);\n      break;\n\n    case 'Cross':\n      options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n      break;\n\n    case 'Diamond':\n      options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' + location.y + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + location.y + ' Z';\n      break;\n\n    case 'Star':\n      options.d = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6) + ' L ' + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n      break;\n\n    case 'Triangle':\n      options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 2) + ' Z';\n      break;\n\n    case 'HorizontalLine':\n      options.d = ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n      break;\n\n    case 'VerticalLine':\n      options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2);\n      break;\n\n    case 'InvertedTriangle':\n      options.d = 'M ' + (location.x - size.width / 2) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' Z';\n      break;\n\n    case 'Pentagon':\n      var eq = 72;\n      var xValue = void 0;\n      var yValue = void 0;\n\n      for (var i = 0; i < 5; i++) {\n        xValue = size.width / 2 * Math.cos(Math.PI / 180 * (i * eq));\n        yValue = size.height / 2 * Math.sin(Math.PI / 180 * (i * eq));\n        options.d += (i == 0 ? 'M ' : 'L ') + (location.x + xValue) + ' ' + (location.y + yValue);\n      }\n\n      options.d += ' Z';\n      break;\n  }\n\n  if (shape === 'Cross' || shape === 'HorizontalLine' || shape === 'VerticalLine') {\n    options['stroke'] = options['stroke'] === 'transparent' ? options['fill'] : options['stroke'];\n  }\n\n  return shape === 'Balloon' ? tempGroup : maps.renderer.drawPath(options);\n}\n/**\n * Internal rendering of Diamond\n * @private\n */\n\nexport function drawDiamond(maps, options, size, location, element) {\n  options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' + location.y + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + location.y + ' Z';\n  return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Triangle\n * @private\n */\n\nexport function drawTriangle(maps, options, size, location, element) {\n  options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 2) + ' Z';\n  return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Cross\n * @private\n */\n\nexport function drawCross(maps, options, size, location, element) {\n  options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n  return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of HorizontalLine\n * @private\n */\n\nexport function drawHorizontalLine(maps, options, size, location, element) {\n  options.d = ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n  return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of VerticalLine\n * @private\n */\n\nexport function drawVerticalLine(maps, options, size, location, element) {\n  options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2);\n  return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Star\n * @private\n */\n\nexport function drawStar(maps, options, size, location, element) {\n  options.d = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6) + ' L ' + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n  return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Balloon\n * @private\n */\n\nexport function drawBalloon(maps, options, size, location, element) {\n  var width = size.width;\n  var height = size.height;\n  location.x -= width / 2;\n  location.y -= height;\n  options.d = 'M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16' + 'c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z';\n  var balloon = maps.renderer.drawPath(options);\n  var x = size.width / 30;\n  var y = size.height / 30;\n  balloon.setAttribute('transform', 'translate(' + location.x + ', ' + location.y + ') scale(' + x + ', ' + y + ')');\n  var g = maps.renderer.createGroup({\n    id: options.id\n  });\n  appendShape(balloon, g);\n  return appendShape(g, element);\n}\n/**\n * Internal rendering of Pattern\n * @private\n */\n\nexport function drawPattern(maps, options, elements, element) {\n  var pattern = maps.renderer.createPattern(options, 'pattern');\n\n  for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n    var ele = elements_1[_i];\n    appendShape(ele, pattern);\n  }\n\n  return appendShape(pattern, element);\n}\n/**\n * Method to get specific field and vaues from data.\n * @private\n */\n// tslint:disable:no-any\n\nexport function getFieldData(dataSource, fields) {\n  var newData = [];\n  var data;\n\n  for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n    var temp = dataSource_1[_i];\n    data = {};\n\n    for (var _a = 0, fields_1 = fields; _a < fields_1.length; _a++) {\n      var field = fields_1[_a];\n\n      if (temp[field]) {\n        data[field] = temp[field];\n      }\n    }\n\n    newData.push(data);\n  }\n\n  return newData;\n}\n/**\n * To find the index of dataSource from shape properties\n */\n// tslint:disable:no-string-literal\n\nexport function checkShapeDataFields(dataSource, properties, dataPath, propertyPath, layer) {\n  if (!isNullOrUndefined(properties)) {\n    for (var i = 0; i < dataSource.length; i++) {\n      var shapeDataPath = dataPath.indexOf('.') > -1 ? getValueFromObject(dataSource[i], dataPath) : dataSource[i][dataPath];\n      var shapePath = checkPropertyPath(shapeDataPath, propertyPath, properties);\n      var shapeDataPathValue = !isNullOrUndefined(shapeDataPath) && isNaN(properties[shapePath]) ? shapeDataPath.toLowerCase() : shapeDataPath;\n      var propertiesShapePathValue = !isNullOrUndefined(properties[shapePath]) && isNaN(properties[shapePath]) ? properties[shapePath].toLowerCase() : properties[shapePath];\n\n      if (shapeDataPathValue === propertiesShapePathValue) {\n        return i;\n      }\n    }\n  }\n\n  return null;\n}\nexport function checkPropertyPath(shapeData, shapePropertyPath, shape) {\n  if (!isNullOrUndefined(shapeData) && !isNullOrUndefined(shape)) {\n    if (!isNullOrUndefined(shapePropertyPath)) {\n      var length_1;\n      var properties = Object.prototype.toString.call(shapePropertyPath) === '[object Array]' ? shapePropertyPath : [shapePropertyPath];\n\n      for (var i = 0; i < properties.length; i++) {\n        var shapeDataValue = !isNullOrUndefined(shapeData) ? shapeData.toLowerCase() : shapeData;\n        var shapePropertiesValue = !isNullOrUndefined(shape[properties[i]]) && isNaN(shape[properties[i]]) ? shape[properties[i]].toLowerCase() : shape[properties[i]];\n\n        if (shapeDataValue === shapePropertiesValue) {\n          return properties[i];\n        }\n      }\n    }\n  }\n\n  return null;\n}\nexport function filter(points, start, end) {\n  var pointObject = [];\n\n  for (var i = 0; i < points.length; i++) {\n    var point = points[i];\n\n    if (start <= point.y && end >= point.y) {\n      pointObject.push(point);\n    }\n  }\n\n  return pointObject;\n}\nexport function getRatioOfBubble(min, max, value, minValue, maxValue) {\n  var percent = 100 / (maxValue - minValue) * (value - minValue);\n  var bubbleRadius = (max - min) / 100 * percent + min;\n\n  if (maxValue === minValue) {\n    bubbleRadius = (max - min) / 100 + min;\n  }\n\n  return bubbleRadius;\n}\n/**\n * To find the midpoint of the polygon from points\n */\n\nexport function findMidPointOfPolygon(points, type) {\n  if (!points.length) {\n    return null;\n  }\n\n  var min = 0;\n  var max = points.length;\n  var startX;\n  var startY;\n  var startX1;\n  var startY1;\n  var sum = 0;\n  var xSum = 0;\n  var ySum = 0;\n\n  for (var i = min; i <= max - 1; i++) {\n    startX = points[i].x;\n    startY = type === 'Mercator' ? points[i].y : -points[i].y;\n\n    if (i === max - 1) {\n      startX1 = points[0].x;\n      startY1 = type === 'Mercator' ? points[0].y : -points[0].y;\n    } else {\n      startX1 = points[i + 1].x;\n      startY1 = type === 'Mercator' ? points[i + 1].y : -points[i + 1].y;\n    }\n\n    sum = sum + Math.abs(startX * startY1 - startX1 * startY);\n    xSum = xSum + Math.abs((startX + startX1) * (startX * startY1 - startX1 * startY));\n    ySum = ySum + Math.abs((startY + startY1) * (startX * startY1 - startX1 * startY));\n  }\n\n  sum = 0.5 * sum;\n  xSum = 1 / (4 * sum) * xSum;\n  ySum = 1 / (4 * sum) * ySum;\n  /* Code for finding nearest points in polygon related to midPoint*/\n\n  var rightMinPoint = {\n    x: 0,\n    y: 0\n  };\n  var rightMaxPoint = {\n    x: 0,\n    y: 0\n  };\n  var leftMinPoint = {\n    x: 0,\n    y: 0\n  };\n  var leftMaxPoint = {\n    x: 0,\n    y: 0\n  };\n  var bottomMinPoint = {\n    x: 0,\n    y: 0\n  };\n  var bottomMaxPoint = {\n    x: 0,\n    y: 0\n  };\n  var topMinPoint = {\n    x: 0,\n    y: 0\n  };\n  var topMaxPoint = {\n    x: 0,\n    y: 0\n  };\n  var height = 0;\n\n  for (var i = min; i <= max - 1; i++) {\n    var point = points[i];\n    point.y = type === 'Mercator' ? point.y : -point.y;\n\n    if (point.y > ySum) {\n      if (point.x < xSum && xSum - point.x < xSum - bottomMinPoint.x) {\n        bottomMinPoint = {\n          x: point.x,\n          y: point.y\n        };\n      } else if (point.x > xSum && (bottomMaxPoint.x === 0 || point.x - xSum < bottomMaxPoint.x - xSum)) {\n        bottomMaxPoint = {\n          x: point.x,\n          y: point.y\n        };\n      }\n    } else {\n      if (point.x < xSum && xSum - point.x < xSum - topMinPoint.x) {\n        topMinPoint = {\n          x: point.x,\n          y: point.y\n        };\n      } else if (point.x > xSum && (topMaxPoint.x === 0 || point.x - xSum < topMaxPoint.x - xSum)) {\n        topMaxPoint = {\n          x: point.x,\n          y: point.y\n        };\n      }\n    }\n\n    height = bottomMaxPoint.y - topMaxPoint.y + (bottomMaxPoint.y - topMaxPoint.y) / 4;\n\n    if (point.x > xSum) {\n      if (point.y < ySum && ySum - point.y < ySum - rightMinPoint.y) {\n        rightMinPoint = {\n          x: point.x,\n          y: point.y\n        };\n      } else if (point.y > ySum && (rightMaxPoint.y === 0 || point.y - ySum < rightMaxPoint.y - ySum)) {\n        rightMaxPoint = {\n          x: point.x,\n          y: point.y\n        };\n      }\n    } else {\n      if (point.y < ySum && ySum - point.y < ySum - leftMinPoint.y) {\n        leftMinPoint = {\n          x: point.x,\n          y: point.y\n        };\n      } else if (point.y > ySum && (leftMaxPoint.y === 0 || point.y - ySum < leftMaxPoint.y - ySum)) {\n        leftMaxPoint = {\n          x: point.x,\n          y: point.y\n        };\n      }\n    }\n  }\n\n  return {\n    x: xSum,\n    y: ySum,\n    rightMin: rightMinPoint,\n    rightMax: rightMaxPoint,\n    leftMin: leftMinPoint,\n    leftMax: leftMaxPoint,\n    points: points,\n    topMax: topMaxPoint,\n    topMin: topMinPoint,\n    bottomMax: bottomMaxPoint,\n    bottomMin: bottomMinPoint,\n    height: height\n  };\n}\n/**\n * @private\n * Check custom path\n */\n\n/* tslint:disable:no-string-literal */\n\nexport function isCustomPath(layerData) {\n  var customPath = false;\n\n  if (Object.prototype.toString.call(layerData) === '[object Array]') {\n    Array.prototype.forEach.call(layerData, function (layer, index) {\n      if (!isNullOrUndefined(layer['geometry']) && layer['geometry']['type'] === 'Path') {\n        customPath = true;\n      }\n    });\n  }\n\n  return customPath;\n}\n/**\n * @private\n * Trim the title text\n */\n\nexport function textTrim(maxWidth, text, font) {\n  var label = text;\n  var size = measureText(text, font).width;\n\n  if (size > maxWidth) {\n    var textLength = text.length;\n\n    for (var i = textLength - 1; i >= 0; --i) {\n      label = text.substring(0, i) + '...';\n      size = measureText(label, font).width;\n\n      if (size <= maxWidth || label.length < 4) {\n        if (label.length < 4) {\n          label = ' ';\n        }\n\n        return label;\n      }\n    }\n  }\n\n  return label;\n}\n/**\n * Method to calculate x position of title\n */\n\nexport function findPosition(location, alignment, textSize, type) {\n  var x;\n  var y;\n\n  switch (alignment) {\n    case 'Near':\n      x = location.x;\n      break;\n\n    case 'Center':\n      x = type === 'title' ? location.width / 2 - textSize.width / 2 : location.x + location.width / 2 - textSize.width / 2;\n      break;\n\n    case 'Far':\n      x = type === 'title' ? location.width - location.y - textSize.width : location.x + location.width - textSize.width;\n      break;\n  }\n\n  y = type === 'title' ? location.y + textSize.height / 2 : location.y + location.height / 2 + textSize.height / 2;\n  return new Point(x, y);\n}\n/**\n * To remove element by id\n */\n\nexport function removeElement(id) {\n  var element = document.getElementById(id);\n  return element ? remove(element) : null;\n}\n/**\n *  To calculate map center position from pixel values\n */\n\nexport function calculateCenterFromPixel(mapObject, layer) {\n  var point1 = convertGeoToPoint(mapObject.minLatOfGivenLocation, mapObject.minLongOfGivenLocation, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n  var point2 = convertGeoToPoint(mapObject.maxLatOfGivenLocation, mapObject.maxLongOfGivenLocation, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n  var x = (point1.x + point2.x) / 2;\n  var y = (point1.y + point2.y) / 2;\n  return new Point(x, y);\n}\n/**\n * @private\n */\n\nexport function getTranslate(mapObject, layer, animate) {\n  var zoomFactorValue = mapObject.zoomSettings.zoomFactor;\n  var scaleFactor;\n  var center = mapObject.centerPosition;\n  var centerLatitude = center.latitude;\n  var centerLongitude = center.longitude;\n  var checkMethodeZoom = !isNullOrUndefined(mapObject.centerLatOfGivenLocation) && !isNullOrUndefined(mapObject.centerLongOfGivenLocation) && mapObject.zoomNotApplied;\n\n  if (isNullOrUndefined(mapObject.mapScaleValue)) {\n    mapObject.mapScaleValue = zoomFactorValue;\n  }\n\n  if (mapObject.zoomSettings.shouldZoomInitially && mapObject.zoomSettings.enable) {\n    mapObject.mapScaleValue = scaleFactor = zoomFactorValue = (mapObject.zoomSettings.shouldZoomInitially || mapObject.enablePersistence) && mapObject.scale == 1 ? mapObject.scale : isNullOrUndefined(mapObject.markerZoomFactor) ? 1 : mapObject.markerZoomFactor;\n\n    if (mapObject.mapScaleValue !== mapObject.markerZoomFactor && !mapObject.enablePersistence) {\n      mapObject.mapScaleValue = zoomFactorValue = mapObject.markerZoomFactor;\n    }\n\n    if (!isNullOrUndefined(mapObject.markerCenterLatitude) && !isNullOrUndefined(mapObject.markerCenterLongitude)) {\n      centerLatitude = mapObject.markerCenterLatitude;\n      centerLongitude = mapObject.markerCenterLongitude;\n    }\n  }\n\n  if (checkMethodeZoom) {\n    mapObject.mapScaleValue = scaleFactor = zoomFactorValue = mapObject.scaleOfGivenLocation;\n  }\n\n  var min = mapObject.baseMapRectBounds['min'];\n  var max = mapObject.baseMapRectBounds['max'];\n  var zoomFactor = animate ? 1 : mapObject.mapScaleValue;\n\n  if (isNullOrUndefined(mapObject.currentShapeDataLength)) {\n    mapObject.currentShapeDataLength = !isNullOrUndefined(layer.shapeData[\"features\"]) ? layer.shapeData[\"features\"].length : layer.shapeData[\"geometries\"].length;\n  }\n\n  var size = mapObject.totalRect && mapObject.legendSettings.visible ? mapObject.totalRect : mapObject.mapAreaRect;\n  var availSize = mapObject.availableSize;\n  var x;\n  var y;\n  var mapWidth = Math.abs(max['x'] - min['x']);\n  var mapHeight = Math.abs(min['y'] - max['y']);\n  var factor = animate ? 1 : mapObject.markerZoomFactor === 1 ? mapObject.mapScaleValue : zoomFactorValue;\n  center = mapObject.zoomSettings.shouldZoomInitially && mapObject.markerZoomedState && !mapObject.zoomPersistence ? mapObject.markerZoomCenterPoint : mapObject.centerPosition;\n\n  if (!isNullOrUndefined(centerLongitude) && !isNullOrUndefined(centerLatitude) || checkMethodeZoom) {\n    var leftPosition = ((mapWidth + Math.abs(mapObject.mapAreaRect.width - mapWidth)) / 2 + mapObject.mapAreaRect.x) / factor;\n    var topPosition = ((mapHeight + Math.abs(mapObject.mapAreaRect.height - mapHeight)) / 2 + mapObject.mapAreaRect.y) / factor;\n    var point = checkMethodeZoom ? calculateCenterFromPixel(mapObject, layer) : convertGeoToPoint(centerLatitude, centerLongitude, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n\n    if (isNullOrUndefined(mapObject.previousProjection) || mapObject.previousProjection !== mapObject.projectionType) {\n      x = -point.x + leftPosition;\n      y = -point.y + topPosition;\n      scaleFactor = zoomFactor;\n    } else {\n      if (Math.floor(mapObject.scale) !== 1 && mapObject.zoomSettings.shouldZoomInitially || mapObject.zoomNotApplied) {\n        x = -point.x + leftPosition;\n        y = -point.y + topPosition;\n      } else {\n        if (mapObject.zoomSettings.shouldZoomInitially || mapObject.zoomNotApplied) {\n          x = -point.x + leftPosition;\n          y = -point.y + topPosition;\n          scaleFactor = zoomFactor;\n        } else {\n          x = mapObject.zoomTranslatePoint.x;\n          y = mapObject.zoomTranslatePoint.y;\n        }\n      }\n\n      scaleFactor = mapObject.mapScaleValue;\n    }\n  } else {\n    if (isNullOrUndefined(mapObject.previousProjection) || mapObject.previousProjection !== mapObject.projectionType) {\n      scaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n      mapWidth *= scaleFactor;\n      mapHeight *= scaleFactor;\n      var widthDiff = min['x'] !== 0 && mapObject.translateType === 'layers' ? availSize.width - size.width : 0;\n      x = size.x + (-min['x'] + (size.width / 2 - mapWidth / 2)) - widthDiff;\n      y = size.y + (-min['y'] + (size.height / 2 - mapHeight / 2));\n      mapObject.previousTranslate = new Point(x, y);\n    } else {\n      if (!mapObject.zoomSettings.shouldZoomInitially && mapObject.markerZoomFactor === 1 && mapObject.mapScaleValue === 1) {\n        scaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n        mapHeight *= scaleFactor;\n        mapWidth *= scaleFactor;\n        y = size.y + (-min['y'] + (size.height / 2 - mapHeight / 2));\n        x = size.x + (-min['x'] + (size.width / 2 - mapWidth / 2));\n      } else {\n        scaleFactor = mapObject.mapScaleValue < 1 ? mapObject.mapScaleValue + 1 : mapObject.mapScaleValue;\n        mapObject.mapScaleValue = mapObject.zoomSettings.enable && mapObject.mapScaleValue !== 1 ? mapObject.mapScaleValue : 1;\n\n        if (mapObject.currentShapeDataLength !== (!isNullOrUndefined(layer.shapeData[\"features\"]) ? layer.shapeData[\"features\"].length : layer.shapeData[\"geometries\"].length) && layer.type !== 'SubLayer') {\n          var scale = parseFloat(Math.min(size.height / mapHeight, size.width / mapWidth).toFixed(2));\n          mapHeight *= scale;\n          mapWidth *= scale;\n          y = size.y + (-min['y'] + (size.height / 2 - mapHeight / 2));\n          scaleFactor = scale;\n          x = size.x + (-min['x'] + (size.width / 2 - mapWidth / 2));\n        } else if (mapObject.availableSize.height !== mapObject.heightBeforeRefresh || mapObject.widthBeforeRefresh !== mapObject.availableSize.width) {\n          var cscaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n          var cmapWidth = mapWidth;\n          cmapWidth *= cscaleFactor;\n          var cmapHeight = mapHeight;\n          cmapHeight *= cscaleFactor;\n          var x1 = size.x + (-min['x'] + (size.width / 2 - cmapWidth / 2));\n          var y1 = size.y + (-min['y'] + (size.height / 2 - cmapHeight / 2));\n          var xdiff = (mapObject.translatePoint.x - mapObject.previousTranslate.x) / mapObject.widthBeforeRefresh;\n          var ydiff = (mapObject.translatePoint.y - mapObject.previousTranslate.y) / mapObject.heightBeforeRefresh;\n          var actxdiff = xdiff * mapObject.availableSize.width;\n          var actydiff = ydiff * mapObject.availableSize.height;\n          x = x1 + actxdiff;\n          y = y1 + actydiff;\n          mapObject.previousTranslate = new Point(x1, y1);\n          mapObject.zoomTranslatePoint.x = x;\n          mapObject.zoomTranslatePoint.y = y;\n        } else {\n          if (!isNullOrUndefined(mapObject.previousProjection) && mapObject.mapScaleValue === 1 && !mapObject.zoomModule.isDragZoom) {\n            scaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n            mapWidth *= scaleFactor;\n            x = size.x + (-min['x'] + (size.width / 2 - mapWidth / 2));\n            mapHeight *= scaleFactor;\n            y = size.y + (-min['y'] + (size.height / 2 - mapHeight / 2));\n          } else {\n            x = mapObject.zoomTranslatePoint.x;\n            y = mapObject.zoomTranslatePoint.y;\n            scaleFactor = mapObject.scale;\n          }\n        }\n      }\n    }\n  }\n\n  if (!isNullOrUndefined(mapObject.translatePoint)) {\n    x = mapObject.enablePersistence && mapObject.translatePoint.x != 0 && !mapObject.zoomNotApplied ? mapObject.translatePoint.x : x;\n    y = mapObject.enablePersistence && mapObject.translatePoint.y != 0 && !mapObject.zoomNotApplied ? mapObject.translatePoint.y : y;\n  }\n\n  scaleFactor = mapObject.enablePersistence ? mapObject.mapScaleValue >= 1 ? mapObject.mapScaleValue : 1 : scaleFactor;\n  mapObject.widthBeforeRefresh = mapObject.availableSize.width;\n  mapObject.heightBeforeRefresh = mapObject.availableSize.height;\n  return {\n    scale: scaleFactor,\n    location: new Point(x, y)\n  };\n}\n/**\n * @private\n */\n\nexport function getZoomTranslate(mapObject, layer, animate) {\n  var zoomFactorValue = mapObject.zoomSettings.zoomFactor;\n  var scaleFactor;\n  var center = mapObject.centerPosition;\n  var latitude = center.latitude;\n  var longitude = center.longitude;\n  var checkZoomMethod = !isNullOrUndefined(mapObject.centerLongOfGivenLocation) && !isNullOrUndefined(mapObject.centerLatOfGivenLocation) && mapObject.zoomNotApplied;\n\n  if (isNullOrUndefined(mapObject.previousCenterLatitude) && isNullOrUndefined(mapObject.previousCenterLongitude)) {\n    mapObject.previousCenterLatitude = mapObject.centerPosition.latitude;\n    mapObject.previousCenterLongitude = mapObject.centerPosition.longitude;\n  } else if (mapObject.previousCenterLatitude !== mapObject.centerPosition.latitude && mapObject.previousCenterLongitude !== mapObject.centerPosition.longitude) {\n    mapObject.centerPositionChanged = true;\n    mapObject.previousCenterLatitude = mapObject.centerPosition.latitude;\n    mapObject.previousCenterLongitude = mapObject.centerPosition.longitude;\n  } else {\n    mapObject.centerPositionChanged = false;\n  }\n\n  if (isNullOrUndefined(mapObject.mapScaleValue) || zoomFactorValue > mapObject.mapScaleValue) {\n    if (mapObject.isReset && mapObject.mapScaleValue === 1) {\n      mapObject.mapScaleValue = mapObject.mapScaleValue;\n    } else {\n      mapObject.mapScaleValue = zoomFactorValue;\n    }\n  }\n\n  mapObject.mapScaleValue = mapObject.zoomSettings.zoomFactor !== 1 && mapObject.zoomSettings.zoomFactor === mapObject.mapScaleValue ? mapObject.zoomSettings.zoomFactor : mapObject.zoomSettings.zoomFactor !== mapObject.mapScaleValue && !mapObject.centerPositionChanged ? mapObject.mapScaleValue : mapObject.zoomSettings.zoomFactor;\n\n  if (mapObject.zoomSettings.shouldZoomInitially) {\n    mapObject.mapScaleValue = zoomFactorValue = scaleFactor = (mapObject.enablePersistence || mapObject.zoomSettings.shouldZoomInitially) && mapObject.scale == 1 ? mapObject.scale : isNullOrUndefined(mapObject.markerZoomFactor) ? mapObject.mapScaleValue : mapObject.markerZoomFactor;\n    zoomFactorValue = mapObject.mapScaleValue;\n\n    if (!isNullOrUndefined(mapObject.markerCenterLatitude) && !isNullOrUndefined(mapObject.markerCenterLongitude)) {\n      latitude = mapObject.markerCenterLatitude;\n      longitude = mapObject.markerCenterLongitude;\n    }\n  }\n\n  if (checkZoomMethod) {\n    mapObject.mapScaleValue = scaleFactor = zoomFactorValue = mapObject.scaleOfGivenLocation;\n  }\n\n  var zoomFactor = animate ? 1 : mapObject.mapScaleValue;\n  var size = mapObject.mapAreaRect;\n  var x;\n  var y;\n  var min = mapObject.baseMapRectBounds['min'];\n  var max = mapObject.baseMapRectBounds['max'];\n  var factor = animate ? 1 : mapObject.mapScaleValue;\n  var mapWidth = Math.abs(max['x'] - min['x']);\n  var mapHeight = Math.abs(min['y'] - max['y']);\n\n  if (!isNullOrUndefined(longitude) && !isNullOrUndefined(latitude) || checkZoomMethod) {\n    var topPosition = (mapHeight + Math.abs(mapObject.mapAreaRect.height - mapHeight)) / 2 / factor;\n    var leftPosition = (mapWidth + Math.abs(mapObject.mapAreaRect.width - mapWidth)) / 2 / factor;\n    var point = checkZoomMethod ? calculateCenterFromPixel(mapObject, layer) : convertGeoToPoint(latitude, longitude, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n\n    if ((!isNullOrUndefined(mapObject.zoomTranslatePoint) || !isNullOrUndefined(mapObject.previousProjection)) && !mapObject.zoomNotApplied) {\n      if (mapObject.previousProjection !== mapObject.projectionType) {\n        x = -point.x + leftPosition;\n        y = -point.y + topPosition;\n      } else {\n        x = mapObject.zoomTranslatePoint.x;\n        y = mapObject.zoomTranslatePoint.y;\n        zoomFactorValue = zoomFactor;\n      }\n    } else {\n      x = -point.x + leftPosition + mapObject.mapAreaRect.x / zoomFactor;\n      y = -point.y + topPosition + mapObject.mapAreaRect.y / zoomFactor;\n    }\n\n    if (!isNullOrUndefined(mapObject.translatePoint)) {\n      y = mapObject.enablePersistence && mapObject.translatePoint.y != 0 && !mapObject.zoomNotApplied ? mapObject.translatePoint.y : y;\n      x = mapObject.enablePersistence && mapObject.translatePoint.x != 0 && !mapObject.zoomNotApplied ? mapObject.translatePoint.x : x;\n    }\n\n    scaleFactor = zoomFactorValue !== 0 ? zoomFactorValue : 1;\n  } else {\n    var zoomFact = mapObject.zoomSettings.zoomFactor === 0 ? 1 : mapObject.zoomSettings.zoomFactor;\n    var maxZoomFact = 10;\n    zoomFact = zoomFact > maxZoomFact ? maxZoomFact : zoomFact;\n    scaleFactor = zoomFact;\n    var mapScale = mapObject.mapScaleValue === 0 ? 1 : mapObject.mapScaleValue > maxZoomFact ? maxZoomFact : mapObject.mapScaleValue;\n    var leftPosition = size.x + (-min['x'] + (size.width / 2 - mapWidth / 2));\n    var topPosition = size.y + (-min['y'] + (size.height / 2 - mapHeight / 2));\n\n    if (!isNullOrUndefined(mapObject.zoomTranslatePoint) || !isNullOrUndefined(mapObject.previousProjection)) {\n      if (mapObject.previousProjection !== mapObject.projectionType) {\n        var previousPositions = [];\n        var previousPoints = {\n          x: leftPosition,\n          y: topPosition\n        };\n        previousPositions.push(previousPoints);\n\n        for (var i = 1; i < maxZoomFact; i++) {\n          var translatePointX = previousPositions[i - 1]['x'] - (size.width / i - size.width / (i + 1)) / 2;\n          var translatePointY = previousPositions[i - 1]['y'] - (size.height / i - size.height / (i + 1)) / 2;\n          previousPoints = {\n            x: translatePointX,\n            y: translatePointY\n          };\n          previousPositions.push(previousPoints);\n        }\n\n        leftPosition = previousPositions[zoomFact - 1]['x'];\n        topPosition = previousPositions[zoomFact - 1]['y'];\n      } else {\n        leftPosition = mapObject.zoomTranslatePoint.x;\n        topPosition = mapObject.zoomTranslatePoint.y;\n\n        if (zoomFact !== mapScale) {\n          scaleFactor = mapScale;\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(mapObject.translatePoint)) {\n      x = mapObject.enablePersistence && mapObject.translatePoint.x != 0 && !mapObject.zoomNotApplied ? mapObject.translatePoint.x : leftPosition;\n      y = mapObject.enablePersistence && mapObject.translatePoint.y != 0 && !mapObject.zoomNotApplied ? mapObject.translatePoint.y : topPosition;\n    }\n  }\n\n  scaleFactor = mapObject.enablePersistence ? mapObject.mapScaleValue == 0 ? 1 : mapObject.mapScaleValue : scaleFactor;\n  return {\n    scale: animate ? 1 : scaleFactor,\n    location: new Point(x, y)\n  };\n}\n/**\n * To get the html element by specified id\n */\n\nexport function fixInitialScaleForTile(map) {\n  map.tileZoomScale = map.tileZoomLevel = Math.floor(map.availableSize.height / 512) + 1;\n  var padding = map.layers[map.baseLayerIndex].layerType !== 'GoogleStaticMap' ? 20 : 0;\n  var totalSize = Math.pow(2, map.tileZoomLevel) * 256;\n  map.tileTranslatePoint.x = map.availableSize.width / 2 - totalSize / 2;\n  map.tileTranslatePoint.y = map.availableSize.height / 2 - totalSize / 2 + padding;\n  map.previousTileWidth = map.availableSize.width;\n  map.previousTileHeight = map.availableSize.height;\n}\n/**\n * To get the html element by specified id\n */\n\nexport function getElementByID(id) {\n  return document.getElementById(id);\n}\n/**\n * To apply internalization\n */\n\nexport function Internalize(maps, value) {\n  maps.formatFunction = maps.intl.getNumberFormat({\n    format: maps.format,\n    useGrouping: maps.useGroupingSeparator\n  });\n  return maps.formatFunction(value);\n}\n/**\n * Function     to compile the template function for maps.\n * @returns Function\n * @private\n */\n\nexport function getTemplateFunction(template) {\n  var templateFn = null;\n  var e;\n\n  try {\n    if (document.querySelectorAll(template).length) {\n      templateFn = templateComplier(document.querySelector(template).innerHTML.trim());\n    }\n  } catch (e) {\n    templateFn = templateComplier(template);\n  }\n\n  return templateFn;\n}\n/**\n * Function to get element from id.\n * @returns Element\n * @private\n */\n\nexport function getElement(id) {\n  return document.getElementById(id);\n}\n/**\n * Function to get shape data using target id\n */\n\nexport function getShapeData(targetId, map) {\n  var layerIndex = parseInt(targetId.split('_LayerIndex_')[1].split('_')[0], 10);\n  var shapeIndex = parseInt(targetId.split('_shapeIndex_')[1].split('_')[0], 10);\n  var layer = map.layersCollection[layerIndex];\n  var shapeData = layer.layerData[shapeIndex]['property'];\n  var data;\n\n  if (layer.dataSource) {\n    data = layer.dataSource[checkShapeDataFields(layer.dataSource, shapeData, layer.shapeDataPath, layer.shapePropertyPath, layer)];\n  }\n\n  return {\n    shapeData: shapeData,\n    data: data\n  };\n}\n/**\n * Function to trigger shapeSelected event\n * @private\n */\n\nexport function triggerShapeEvent(targetId, selection, maps, eventName) {\n  var shape = getShapeData(targetId, maps);\n  var eventArgs = selection.enableMultiSelect ? {\n    cancel: false,\n    name: eventName,\n    fill: selection.fill,\n    opacity: selection.opacity,\n    border: selection.border,\n    shapeData: shape.shapeData,\n    data: shape.data,\n    target: targetId,\n    maps: maps,\n    shapeDataCollection: maps.shapeSelectionItem\n  } : {\n    cancel: false,\n    name: eventName,\n    fill: selection.fill,\n    opacity: selection.opacity,\n    border: selection.border,\n    shapeData: shape.shapeData,\n    data: shape.data,\n    target: targetId,\n    maps: maps\n  };\n\n  if (maps.isBlazor) {\n    var maps_2 = eventArgs.maps,\n        shapeData = eventArgs.shapeData,\n        blazorEventArgs = __rest(eventArgs, [\"maps\", \"shapeData\"]);\n\n    eventArgs = blazorEventArgs;\n  }\n\n  maps.trigger(eventName, eventArgs);\n  return eventArgs;\n}\n/**\n * Function to get elements using class name\n */\n\nexport function getElementsByClassName(className) {\n  return document.getElementsByClassName(className);\n}\n/**\n * Function to get elements using querySelectorAll\n */\n// export function querySelectorAll(args: string, element: Element): ArrayOf<Element> {\n//     return element.querySelectorAll('.' + args);\n// }\n\n/**\n * Function to get elements using querySelector\n */\n\nexport function querySelector(args, elementSelector) {\n  var targetEle = null;\n\n  if (document.getElementById(elementSelector)) {\n    targetEle = document.getElementById(elementSelector).querySelector('#' + args);\n  }\n\n  return targetEle;\n}\n/**\n * Function to get the element for selection and highlight using public method\n */\n\nexport function getTargetElement(layerIndex, name, enable, map) {\n  var shapeIndex;\n  var targetId;\n  var targetEle;\n  var shapeData = map.layers[layerIndex].shapeData['features'];\n\n  for (var i = 0; i < shapeData.length; i++) {\n    if (shapeData[i]['properties'].name === name) {\n      targetId = map.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_undefined';\n      break;\n    }\n  }\n\n  targetEle = getElement(targetId);\n  return targetEle;\n}\n/**\n * Function to create style element for highlight and selection\n */\n\nexport function createStyle(id, className, eventArgs) {\n  return createElement('style', {\n    id: id,\n    innerHTML: '.' + className + '{fill:' + eventArgs['fill'] + ';' + 'opacity:' + eventArgs['opacity'].toString() + ';' + 'stroke-width:' + eventArgs['border']['width'].toString() + ';' + 'stroke:' + eventArgs['border']['color'] + ';' + '}'\n  });\n}\n/**\n * Function to customize the style for highlight and selection\n */\n\nexport function customizeStyle(id, className, eventArgs) {\n  var styleEle = getElement(id);\n  styleEle.innerHTML = '.' + className + '{fill:' + eventArgs['fill'] + ';' + 'opacity:' + eventArgs['opacity'].toString() + ';' + 'stroke-width:' + eventArgs['border']['width'].toString() + ';' + 'stroke:' + eventArgs['border']['color'] + '}';\n}\n/**\n * Function to trigger itemSelection event for legend selection and public method\n */\n\nexport function triggerItemSelectionEvent(selectionSettings, map, targetElement, shapeData, data) {\n  var border = {\n    color: selectionSettings.border.color,\n    width: selectionSettings.border.width / map.scale\n  };\n  var eventArgs = {\n    opacity: selectionSettings.opacity,\n    fill: selectionSettings.fill,\n    border: border,\n    name: itemSelection,\n    target: targetElement.id,\n    cancel: false,\n    shapeData: shapeData,\n    data: data,\n    maps: map\n  };\n  map.trigger('itemSelection', eventArgs, function (observedArgs) {\n    map.shapeSelectionItem.push(eventArgs.shapeData);\n\n    if (!getElement('ShapeselectionMap')) {\n      document.body.appendChild(createStyle('ShapeselectionMap', 'ShapeselectionMapStyle', eventArgs));\n    } else {\n      customizeStyle('ShapeselectionMap', 'ShapeselectionMapStyle', eventArgs);\n    }\n  });\n}\n/**\n * Function to remove class from element\n */\n\nexport function removeClass(element) {\n  element.removeAttribute('class');\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\n\nexport function elementAnimate(element, delay, duration, point, maps, ele, radius) {\n  if (radius === void 0) {\n    radius = 0;\n  }\n\n  var centerX = point.x;\n  var centerY = point.y;\n  var height = 0;\n  var transform = element.getAttribute('transform') || '';\n  new Animation({}).animate(element, {\n    duration: duration,\n    delay: delay,\n    progress: function (args) {\n      if (args.timeStamp > args.delay) {\n        height = (args.timeStamp - args.delay) / args.duration;\n        element.setAttribute('transform', 'translate( ' + (centerX - radius * height) + ' ' + (centerY - radius * height) + ' ) scale(' + height + ')');\n      }\n    },\n    end: function (model) {\n      element.setAttribute('transform', transform);\n\n      if (!ele) {\n        return;\n      }\n\n      var event = {\n        cancel: false,\n        name: animationComplete,\n        element: ele,\n        maps: !maps.isBlazor ? maps : null\n      };\n      maps.trigger(animationComplete, event);\n    }\n  });\n}\nexport function timeout(id) {\n  removeElement(id);\n}\nexport function showTooltip(text, size, x, y, areaWidth, areaHeight, id, element, isTouch) {\n  var location = getMousePosition(x, y, element);\n\n  if (!isNullOrUndefined(location)) {\n    x = location.x;\n    y = location.y;\n  }\n\n  var tooltip = document.getElementById(id);\n  var width = measureText(text, {\n    fontFamily: 'Segoe UI',\n    size: '8px',\n    fontStyle: 'Normal',\n    fontWeight: 'Regular'\n  }).width;\n  var str = text.split(' ');\n  var demo = str[0].length;\n\n  for (var i = 1; i < str.length; i++) {\n    if (demo < str[i].length) {\n      demo = str[i].length;\n    }\n  }\n\n  if (!tooltip) {\n    tooltip = createElement('div', {\n      id: id,\n      styles: 'background-color: rgb(255, 255, 255) !important; color:black !important; ' + 'position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;' + 'font-size:12px; font-family: \"Segoe UI\"; text-align:center'\n    });\n  }\n\n  if (x < areaWidth - width) {\n    x = x;\n  } else if (x > areaWidth - width && x < areaWidth - demo * 8) {\n    width = areaWidth - x;\n  } else if (x >= areaWidth - demo * 8) {\n    if (x > width) {\n      x = x - width;\n    } else {\n      width = x;\n      x = 0;\n    }\n  }\n\n  var size1 = size.split('px');\n  wordWrap(tooltip, text, x, y, size1, width, areaWidth, element);\n  var height = tooltip.clientHeight;\n\n  if (height + parseInt(size1[0], 10) * 2 > areaHeight) {\n    width = x;\n    x = 0;\n  }\n\n  wordWrap(tooltip, text, x, y, size1, width, areaWidth, element);\n\n  if (isTouch) {\n    setTimeout(timeout, 5000, id);\n  }\n}\nexport function wordWrap(tooltip, text, x, y, size1, width, areaWidth, element) {\n  tooltip.innerHTML = text;\n  tooltip.style.top = tooltip.id.indexOf('_Legend') !== -1 ? (parseInt(size1[0], 10) + y).toString() + 'px' : (parseInt(size1[0], 10) * 2).toString() + 'px';\n  tooltip.style.left = x.toString() + 'px';\n  tooltip.style.width = width.toString() + 'px';\n  tooltip.style.maxWidth = areaWidth.toString() + 'px';\n  tooltip.style.wordWrap = 'break-word';\n  element.appendChild(tooltip);\n} // /**\n//  *\n//  * @param touchList\n//  * @param e\n//  * @param touches\n//  */\n// export function addTouchPointer(touchList: ITouches[], e: PointerEvent, touches: TouchList): ITouches[] {\n//     if (touches) {\n//         touchList = [];\n//         for (let i: number = 0, length: number = touches.length; i < length; i++) {\n//             touchList.push({ pageX: touches[i].clientX, pageY: touches[i].clientY, pointerId: null });\n//         }\n//     } else {\n//         touchList = touchList ? touchList : [];\n//         if (touchList.length === 0) {\n//             touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n//         } else {\n//             for (let i: number = 0, length: number = touchList.length; i < length; i++) {\n//                 if (touchList[i].pointerId === e.pointerId) {\n//                     touchList[i] = { pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId };\n//                 } else {\n//                     touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n//                 }\n//             }\n//         }\n//     }\n//     return touchList;\n// }\n\n/** @private */\n\nexport function createTooltip(id, text, top, left, fontSize) {\n  var tooltip = getElement(id);\n  var style = 'top:' + top.toString() + 'px;' + 'left:' + left.toString() + 'px;' + 'color: #000000; ' + 'background:' + '#FFFFFF' + ';' + 'position:absolute;border:1px solid #707070;font-size:' + fontSize + ';border-radius:2px;';\n\n  if (!tooltip) {\n    tooltip = createElement('div', {\n      id: id,\n      innerHTML: '&nbsp;' + text + '&nbsp;',\n      styles: style\n    });\n    document.body.appendChild(tooltip);\n  } else {\n    tooltip.setAttribute('innerHTML', '&nbsp;' + text + '&nbsp;');\n    tooltip.setAttribute('styles', style);\n  }\n}\n/** @private */\n\nexport function drawSymbol(location, shape, size, url, options) {\n  var functionName = 'Path';\n  var renderer = new SvgRenderer('');\n  var temp = renderLegendShape(location, size, shape, options, url);\n  var htmlObject = renderer['draw' + temp.functionName](temp.renderOption);\n  return htmlObject;\n}\n/** @private */\n\nexport function renderLegendShape(location, size, shape, options, url) {\n  var renderPath;\n  var functionName = 'Path';\n  var shapeWidth = size.width;\n  var shapeHeight = size.height;\n  var shapeX = location.x;\n  var shapeY = location.y;\n  var x = location.x + -shapeWidth / 2;\n  var y = location.y + -shapeHeight / 2;\n\n  switch (shape) {\n    case 'Circle':\n    case 'Bubble':\n      functionName = 'Ellipse';\n      merge(options, {\n        'rx': shapeWidth / 2,\n        'ry': shapeHeight / 2,\n        'cx': shapeX,\n        'cy': shapeY\n      });\n      break;\n\n    case 'VerticalLine':\n      renderPath = 'M' + ' ' + shapeX + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + shapeX + ' ' + (shapeY + -shapeHeight / 2);\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'Diamond':\n      renderPath = 'M' + ' ' + x + ' ' + shapeY + ' ' + 'L' + ' ' + shapeX + ' ' + (shapeY + -shapeHeight / 2) + ' ' + 'L' + ' ' + (shapeX + shapeWidth / 2) + ' ' + shapeY + ' ' + 'L' + ' ' + shapeX + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + x + ' ' + shapeY + ' z';\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'Rectangle':\n      renderPath = 'M' + ' ' + x + ' ' + (shapeY + -shapeHeight / 2) + ' ' + 'L' + ' ' + (shapeX + shapeWidth / 2) + ' ' + (shapeY + -shapeHeight / 2) + ' ' + 'L' + ' ' + (shapeX + shapeWidth / 2) + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + x + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + x + ' ' + (shapeY + -shapeHeight / 2) + ' z';\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'Triangle':\n      renderPath = 'M' + ' ' + x + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + shapeX + ' ' + (shapeY + -shapeHeight / 2) + ' ' + 'L' + ' ' + (shapeX + shapeWidth / 2) + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + x + ' ' + (shapeY + shapeHeight / 2) + ' z';\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'InvertedTriangle':\n      renderPath = 'M' + ' ' + (shapeX + shapeWidth / 2) + ' ' + (shapeY - shapeHeight / 2) + ' ' + 'L' + ' ' + shapeX + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + (shapeX - shapeWidth / 2) + ' ' + (shapeY - shapeHeight / 2) + ' ' + 'L' + ' ' + (shapeX + shapeWidth / 2) + ' ' + (shapeY - shapeHeight / 2) + ' z';\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'Pentagon':\n      var eq = 72;\n      var xValue = void 0;\n      var yValue = void 0;\n\n      for (var i = 0; i <= 5; i++) {\n        xValue = shapeWidth / 2 * Math.cos(Math.PI / 180 * (i * eq));\n        yValue = shapeWidth / 2 * Math.sin(Math.PI / 180 * (i * eq));\n\n        if (i === 0) {\n          renderPath = 'M' + ' ' + (shapeX + xValue) + ' ' + (shapeY + yValue) + ' ';\n        } else {\n          renderPath = renderPath.concat('L' + ' ' + (shapeX + xValue) + ' ' + (shapeY + yValue) + ' ');\n        }\n      }\n\n      renderPath = renderPath.concat('Z');\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'Star':\n      renderPath = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6) + ' L ' + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'Cross':\n      renderPath = 'M' + ' ' + x + ' ' + shapeY + ' ' + 'L' + ' ' + (shapeX + shapeWidth / 2) + ' ' + shapeY + ' ' + 'M' + ' ' + shapeX + ' ' + (shapeY + shapeHeight / 2) + ' ' + 'L' + ' ' + shapeX + ' ' + (shapeY + -shapeHeight / 2);\n      merge(options, {\n        'd': renderPath\n      });\n      break;\n\n    case 'Image':\n      functionName = 'Image';\n      merge(options, {\n        'href': url,\n        'height': shapeHeight,\n        'width': shapeWidth,\n        x: x,\n        y: y\n      });\n      break;\n  }\n\n  return {\n    renderOption: options,\n    functionName: functionName\n  };\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\n// export function markerTemplateAnimate(element: Element, delay: number, duration: number, point: MapLocation): void {\n//     let delta: number = 0;\n//     let top: string = (element as HTMLElement).style.top;\n//     let y: number = parseInt(top, 10);\n//     new Animation({}).animate(<HTMLElement>element, {\n//         duration: duration,\n//         delay: delay,\n//         progress: (args: AnimationOptions): void => {\n//             if (args.timeStamp > args.delay) {\n//                 delta = ((args.timeStamp - args.delay) / args.duration);\n//                 (element as HTMLElement).style.top = y - 100 + (delta * 100) + 'px';\n//             }\n//         },\n//         end: (model: AnimationOptions) => {\n//             (element as HTMLElement).style.top = top;\n//         }\n//     });\n// }\n\n/** @private */\n\nexport function getElementOffset(childElement, parentElement) {\n  var width;\n  var height;\n  parentElement.appendChild(childElement);\n  width = childElement.offsetWidth;\n  height = childElement.offsetHeight;\n  parentElement.removeChild(childElement);\n  return new Size(width, height);\n}\n/** @private */\n\nexport function changeBorderWidth(element, index, scale, maps) {\n  var childNode;\n\n  for (var l = 0; l < element.childElementCount; l++) {\n    childNode = element.childNodes[l];\n\n    if (childNode.id.indexOf('_NavigationGroup') > -1) {\n      changeNavaigationLineWidth(childNode, index, scale, maps);\n    } else {\n      var currentStroke = maps.layersCollection[index].shapeSettings.border.width;\n      childNode.setAttribute('stroke-width', (currentStroke / scale).toString());\n    }\n  }\n}\n/** @private */\n\nexport function changeNavaigationLineWidth(element, index, scale, maps) {\n  var node;\n\n  for (var m = 0; m < element.childElementCount; m++) {\n    node = element.childNodes[m];\n\n    if (node.tagName === 'path') {\n      var currentStroke = maps.layersCollection[index].navigationLineSettings[parseFloat(node.id.split('_NavigationIndex_')[1].split('_')[0])].width;\n      node.setAttribute('stroke-width', (currentStroke / scale).toString());\n    }\n  }\n} // /** Pinch zoom helper methods */\n\n/** @private */\n\nexport function targetTouches(event) {\n  var targetTouches = [];\n  var touches = event.touches;\n\n  for (var i = 0; i < touches.length; i++) {\n    targetTouches.push({\n      pageX: touches[i].pageX,\n      pageY: touches[i].pageY\n    });\n  }\n\n  return targetTouches;\n}\n/** @private */\n\nexport function calculateScale(startTouches, endTouches) {\n  var startDistance = getDistance(startTouches[0], startTouches[1]);\n  var endDistance = getDistance(endTouches[0], endTouches[1]);\n  return endDistance / startDistance;\n}\n/** @private */\n\nexport function getDistance(a, b) {\n  var x = a.pageX - b.pageX;\n  var y = a.pageY - b.pageY;\n  return Math.sqrt(x * x + y * y);\n}\n/** @private */\n\nexport function getTouches(touches, maps) {\n  var rect = maps.element.getBoundingClientRect();\n  var posTop = rect.top + document.defaultView.pageXOffset;\n  var posLeft = rect.left + document.defaultView.pageYOffset;\n  return Array.prototype.slice.call(touches).map(function (touch) {\n    return {\n      x: touch.pageX - posLeft,\n      y: touch.pageY - posTop\n    };\n  });\n}\n/** @private */\n\nexport function getTouchCenter(touches) {\n  return {\n    x: touches.map(function (e) {\n      return e['x'];\n    }).reduce(sum) / touches.length,\n    y: touches.map(function (e) {\n      return e['y'];\n    }).reduce(sum) / touches.length\n  };\n}\n/** @private */\n\nexport function sum(a, b) {\n  return a + b;\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\n\nexport function zoomAnimate(element, delay, duration, point, scale, size, maps) {\n  var delta = 0;\n  var previousLocation = maps.previousPoint;\n  var preScale = maps.previousScale;\n  var diffScale = scale - preScale;\n  var currentLocation = new MapLocation(0, 0);\n  var currentScale = 1;\n\n  if (scale === preScale) {\n    element.setAttribute('transform', 'scale( ' + scale + ' ) translate( ' + point.x + ' ' + point.y + ' )');\n    return;\n  }\n\n  var slope = function (previousLocation, point) {\n    if (previousLocation.x === point.x) {\n      return null;\n    }\n\n    return (point.y - previousLocation.y) / (point.x - previousLocation.x);\n  };\n\n  var intercept = function (point, slopeValue) {\n    if (slopeValue === null) {\n      return point.x;\n    }\n\n    return point.y - slopeValue * point.x;\n  };\n\n  var slopeFactor = slope(previousLocation, point);\n  var slopeIntersection = intercept(previousLocation, slopeFactor);\n  var horizontalDifference = point.x - previousLocation.x;\n  var verticalDifference = point.y - previousLocation.y;\n  animate(element, delay, duration, function (args) {\n    if (args.timeStamp > args.delay) {\n      delta = (args.timeStamp - args.delay) / args.duration;\n      currentScale = preScale + delta * diffScale;\n      currentLocation.x = previousLocation.x + delta * horizontalDifference / (currentScale / scale);\n\n      if (slopeFactor == null) {\n        currentLocation.y = previousLocation.y + delta * verticalDifference;\n      } else {\n        currentLocation.y = slopeFactor * currentLocation.x + slopeIntersection;\n      }\n\n      args.element.setAttribute('transform', 'scale( ' + currentScale + ' ) ' + 'translate( ' + currentLocation.x + ' ' + currentLocation.y + ' )');\n      maps.translatePoint = currentLocation;\n      maps.scale = currentScale;\n      maps.zoomModule.processTemplate(point.x, point.y, currentScale, maps);\n    }\n  }, function () {\n    maps.translatePoint = point;\n    maps.scale = scale;\n    element.setAttribute('transform', 'scale( ' + scale + ' ) translate( ' + point.x + ' ' + point.y + ' )');\n    maps.zoomModule.processTemplate(point.x, point.y, scale, maps);\n  });\n}\n/**\n * To process custom animation\n */\n\nexport function animate(element, delay, duration, process, end) {\n  var _this = this;\n\n  var start = null;\n  var clearAnimation;\n  var markerStyle = 'visibility:visible';\n\n  var startAnimation = function (timestamp) {\n    if (!start) {\n      start = timestamp;\n    }\n\n    var progress = timestamp - start;\n\n    if (progress < duration) {\n      process.call(_this, {\n        element: element,\n        delay: 0,\n        timeStamp: progress,\n        duration: duration\n      });\n      window.requestAnimationFrame(startAnimation);\n    } else {\n      window.cancelAnimationFrame(clearAnimation);\n      end.call(_this, {\n        element: element\n      });\n      element.setAttribute('style', markerStyle);\n    }\n  };\n\n  clearAnimation = window.requestAnimationFrame(startAnimation);\n}\n/**\n * To get shape data file using Ajax.\n */\n\nvar MapAjax =\n/** @class */\nfunction () {\n  function MapAjax(options, type, async, contentType, sendData) {\n    this.dataOptions = options;\n    this.type = type || 'GET';\n    this.async = async || true;\n    this.contentType = contentType;\n    this.sendData = sendData;\n  }\n\n  return MapAjax;\n}();\n\nexport { MapAjax };\n/**\n * Animation Translate\n * @private\n */\n\nexport function smoothTranslate(element, delay, duration, point) {\n  var delta = 0;\n  var transform = element.getAttribute('transform').split(' ');\n\n  if (transform.length === 2) {\n    transform[2] = transform[1].split(')')[0];\n    transform[1] = transform[0].split('(')[1];\n  }\n\n  var previousLocation = new MapLocation(parseInt(transform[1], 10), parseInt(transform[2], 10));\n  var diffx = point.x - previousLocation.x;\n  var diffy = point.y - previousLocation.y;\n  var currentLocation = new MapLocation(0, 0);\n  animate(element, delay, duration, function (args) {\n    if (args.timeStamp > args.delay) {\n      delta = (args.timeStamp - args.delay) / args.duration;\n      currentLocation.x = previousLocation.x + delta * diffx;\n      currentLocation.y = previousLocation.y + delta * diffy;\n      args.element.setAttribute('transform', 'translate( ' + currentLocation.x + ' ' + currentLocation.y + ' )');\n    }\n  }, function () {\n    element.setAttribute('transform', 'translate( ' + point.x + ' ' + point.y + ' )');\n  });\n}\n/**\n * To find compare should zoom factor with previous factor and current factor\n */\n\nexport function compareZoomFactor(scaleFactor, maps) {\n  var previous = isNullOrUndefined(maps.shouldZoomPreviousFactor) ? null : maps.shouldZoomPreviousFactor;\n  var current = isNullOrUndefined(maps.shouldZoomCurrentFactor) ? null : maps.shouldZoomCurrentFactor;\n\n  if (!isNullOrUndefined(current)) {\n    maps.shouldZoomCurrentFactor = null;\n    maps.shouldZoomPreviousFactor = null;\n  } else if (!isNullOrUndefined(previous) && isNullOrUndefined(current) && maps.shouldZoomPreviousFactor !== scaleFactor) {\n    maps.shouldZoomCurrentFactor = scaleFactor;\n  } else {\n    maps.shouldZoomPreviousFactor = scaleFactor;\n  }\n}\n/**\n * To find zoom level for the min and max latitude values\n */\n\nexport function calculateZoomLevel(minLat, maxLat, minLong, maxLong, mapWidth, mapHeight, maps) {\n  var latRatio;\n  var lngRatio;\n  var scaleFactor;\n  var maxZoomFact = 10;\n  var applyMethodeZoom;\n  var latZoom;\n  var lngZoom;\n  var result;\n  var maxLatSin = Math.sin(maxLat * Math.PI / 180);\n  var maxLatRad = Math.log((1 + maxLatSin) / (1 - maxLatSin)) / 2;\n  var maxLatValue = Math.max(Math.min(maxLatRad, Math.PI), -Math.PI) / 2;\n  var minLatSin = Math.sin(minLat * Math.PI / 180);\n  var minLatRad = Math.log((1 + minLatSin) / (1 - minLatSin)) / 2;\n  var minLatValue = Math.max(Math.min(minLatRad, Math.PI), -Math.PI) / 2;\n\n  if (maps.zoomNotApplied && !maps.isTileMap) {\n    var latiRatio = Math.abs((maps.baseMapBounds.latitude.max - maps.baseMapBounds.latitude.min) / (maxLat - minLat));\n    var longiRatio = Math.abs((maps.baseMapBounds.longitude.max - maps.baseMapBounds.longitude.min) / (maxLong - minLong));\n    applyMethodeZoom = Math.min(latiRatio, longiRatio);\n    var minLocation = convertGeoToPoint(minLat, minLong, 1, maps.layersCollection[0], maps);\n    var maxLocation = convertGeoToPoint(maxLat, maxLong, 1, maps.layersCollection[0], maps);\n  }\n\n  latRatio = (maxLatValue - minLatValue) / Math.PI;\n  var lngDiff = maxLong - minLong;\n  lngRatio = (lngDiff < 0 ? lngDiff + 360 : lngDiff) / 360;\n  var WORLD_PX_HEIGHT = 256;\n  var WORLD_PX_WIDTH = 256;\n  latZoom = Math.log(mapHeight / WORLD_PX_HEIGHT / latRatio) / Math.LN2;\n  lngZoom = Math.log(mapWidth / WORLD_PX_WIDTH / lngRatio) / Math.LN2;\n  result = maps.zoomNotApplied && !maps.isTileMap ? applyMethodeZoom : Math.min(latZoom, lngZoom);\n  scaleFactor = Math.min(result, maxZoomFact);\n  scaleFactor = maps.isTileMap || !maps.zoomNotApplied ? Math.floor(scaleFactor) : scaleFactor;\n\n  if (!maps.isTileMap) {\n    compareZoomFactor(scaleFactor, maps);\n  }\n\n  return scaleFactor;\n} // tslint:disable:no-any\n\nexport function processResult(e) {\n  var dataValue;\n  var resultValue = !isNullOrUndefined(e['result']) ? e['result'] : e['actual'];\n\n  if (isNullOrUndefined(resultValue.length)) {\n    if (!isNullOrUndefined(resultValue['Items'])) {\n      dataValue = resultValue['Items'];\n    }\n  } else {\n    dataValue = resultValue;\n  }\n\n  return dataValue;\n}","map":{"version":3,"sources":["/Users/kristalduran/node_modules/@syncfusion/ej2-maps/src/maps/utils/helper.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__rest","s","e","t","call","indexOf","getOwnPropertySymbols","i","length","createElement","isNullOrUndefined","remove","compile","templateComplier","merge","Animation","isBlazor","SvgRenderer","itemSelection","animationComplete","markerClusterRendering","Size","width","height","stringToNumber","value","containerSize","undefined","parseInt","calculateSize","maps","containerWidth","element","clientWidth","containerHeight","clientHeight","parentHeight","parentElement","parentWidth","containerElementWidth","style","containerElementHeight","availableSize","isDevice","Math","min","window","innerWidth","innerHeight","createSvg","renderer","id","svgObject","setAttribute","getMousePosition","pageX","pageY","elementRect","getBoundingClientRect","pageXOffset","ownerDocument","defaultView","pageYOffset","clientTop","documentElement","clientLeft","positionX","left","positionY","top","MapLocation","degreesToRadians","deg","PI","radiansToDegrees","radian","convertGeoToPoint","latitude","longitude","factor","layer","mapModel","mapSize","mapAreaRect","x","y","lat","lng","temp","longitudeMinMax","baseMapBounds","latitudeMinMax","latRadian","lngRadian","type","projectionType","size","isTileMap","pow","geometryType","abs","max","pixelOrigin","Point","sinY","calculateBound","sin","log","aitoff","tan","sqrt","cos","epsilon","delta","Infinity","roundTo","xToCoordinate","yToCoordinate","convertTileLatLongToPoint","center","zoomLevel","tileTranslatePoint","isMapCoordinates","sinLatitude","pixelX","pixelY","mapObject","val","totalSize","baseSize","round","cosy","sincia","sinci","acos","a","c","triggerDownload","fileName","url","isDownload","attrs","toLocaleLowerCase","dispatchEvent","MouseEvent","view","bubbles","cancelable","MinMax","GeoLocation","measureText","text","font","measureObject","document","getElementById","body","appendChild","innerHTML","position","fontSize","fontWeight","fontStyle","fontFamily","visibility","whiteSpace","lineHeight","TextOption","anchor","transform","baseLine","PathOption","fill","color","opacity","dashArray","stroke","ColorValue","r","g","RectOption","_super","border","rect","rx","ry","_this","CircleOption","cx","cy","PolygonOption","points","PolylineOption","LineOption","line","x1","y1","x2","y2","Line","Rect","PatternOptions","patternUnits","patternContentUnits","patternTransform","href","renderTextElement","option","parent","isMinus","renderOptions","tspanElement","htmlObject","createText","len","createTSpan","convertElement","markerId","data","index","mapObj","childElement","styles","elementLength","templateHtml","templateSplitValue","properties","keys","convertStringToValue","toLowerCase","replace","RegExp","toString","formatValue","formatFunction","format","isNaN","Number","intl","getNumberFormat","useGrouping","useGroupingSeparator","stringTemplate","templateValue","split","search","j","getValueFromObject","join","convertElementFromLabel","labelId","labelEle","childElementCount","outerHTML","drawSymbols","shape","imageUrl","location","markerID","shapeCustom","markerCollection","markerEle","borderColor","borderWidth","parseFloat","padding","circleOptions","pathOptions","rectOptions","radius","drawCircle","drawRectangle","drawImage","calculateShapes","splits","markerColorChoose","eventArgs","colorValuePath","markerShapeChoose","shapeValuePath","imageUrlValuePath","shapes","shapeImage","clusterTemplate","currentLayer","markerTemplate","layerIndex","layerElement","check","zoomCheck","bounds1","bounds2","colloideBounds","clusterColloideBounds","tempX","tempY","markerClusterSettings","labelStyle","options","textElement","tempElement1","tempElement","postionY","m","indexCollection","clusters","clusterGroup","createGroup","eventArg","cancel","name","cluster","data_1","maps_1","blazorEventArgs","trigger","clusterargs","o_1","childNodes","push","p_1","right","bottom","filter","item","container","translate","getTranslate","transPoint","translatePoint","dataIndex","markerIndex","clusters_1","mapScaleValue","clusterID","labelID","imageShapeY","ele","children","o","tagName","textContent","insertBefore","firstChild","getElementByID","mergeSeparateCluster","sameMarkerData","markerElement","clusterIndex","targetClusterIndex","clusterId","clusterEle","getElement","clusterEleLabel","markerDataLength","removeElement","clusterSeparate","isDom","getElementFunction","querySelector","bind","getQueryConnect","marker","layers","markerSettings","centerX","getAttribute","trim","centerY","area","totalMarker","numberOfMarker","percent","angle","newAngle","count","start","path","connectorLine","connectorLineSettings","groupEle","drawPath","markerData","offset","scale","maintainSelection","selectedMarkerElementId","markerSelectionClass","markerPoint","animationDuration","elementAnimate","animationDelay","templateFn","getTemplateFunction","template","templateElement","pointerEvents","baseMapRectBounds","baseLayerIndex","layerType","staticMapOffset","markerElementOffset","staticMapOffsetWidth","display","elementId","elementClass","className","maintainStyleClass","idClass","styleClass","shapeSelectionClass","appendShape","drawPolygon","drawPolyline","drawLine","tempGroup","drawBalloon","eq","xValue","yValue","drawDiamond","drawTriangle","drawCross","drawHorizontalLine","drawVerticalLine","drawStar","balloon","drawPattern","elements","pattern","createPattern","_i","elements_1","getFieldData","dataSource","fields","newData","dataSource_1","_a","fields_1","field","checkShapeDataFields","dataPath","propertyPath","shapeDataPath","shapePath","checkPropertyPath","shapeDataPathValue","propertiesShapePathValue","shapeData","shapePropertyPath","length_1","shapeDataValue","shapePropertiesValue","end","pointObject","point","getRatioOfBubble","minValue","maxValue","bubbleRadius","findMidPointOfPolygon","startX","startY","startX1","startY1","sum","xSum","ySum","rightMinPoint","rightMaxPoint","leftMinPoint","leftMaxPoint","bottomMinPoint","bottomMaxPoint","topMinPoint","topMaxPoint","rightMin","rightMax","leftMin","leftMax","topMax","topMin","bottomMax","bottomMin","isCustomPath","layerData","customPath","forEach","textTrim","maxWidth","label","textLength","substring","findPosition","alignment","textSize","calculateCenterFromPixel","point1","minLatOfGivenLocation","minLongOfGivenLocation","mapLayerPanel","calculateFactor","point2","maxLatOfGivenLocation","maxLongOfGivenLocation","animate","zoomFactorValue","zoomSettings","zoomFactor","scaleFactor","centerPosition","centerLatitude","centerLongitude","checkMethodeZoom","centerLatOfGivenLocation","centerLongOfGivenLocation","zoomNotApplied","shouldZoomInitially","enable","enablePersistence","markerZoomFactor","markerCenterLatitude","markerCenterLongitude","scaleOfGivenLocation","currentShapeDataLength","totalRect","legendSettings","visible","availSize","mapWidth","mapHeight","markerZoomedState","zoomPersistence","markerZoomCenterPoint","leftPosition","topPosition","previousProjection","floor","zoomTranslatePoint","toFixed","widthDiff","translateType","previousTranslate","heightBeforeRefresh","widthBeforeRefresh","cscaleFactor","cmapWidth","cmapHeight","xdiff","ydiff","actxdiff","actydiff","zoomModule","isDragZoom","getZoomTranslate","checkZoomMethod","previousCenterLatitude","previousCenterLongitude","centerPositionChanged","isReset","zoomFact","maxZoomFact","mapScale","previousPositions","previousPoints","translatePointX","translatePointY","fixInitialScaleForTile","map","tileZoomScale","tileZoomLevel","previousTileWidth","previousTileHeight","Internalize","querySelectorAll","getShapeData","targetId","shapeIndex","layersCollection","triggerShapeEvent","selection","eventName","enableMultiSelect","target","shapeDataCollection","shapeSelectionItem","maps_2","getElementsByClassName","args","elementSelector","targetEle","getTargetElement","createStyle","customizeStyle","styleEle","triggerItemSelectionEvent","selectionSettings","targetElement","observedArgs","removeClass","removeAttribute","delay","duration","progress","timeStamp","model","event","timeout","showTooltip","areaWidth","areaHeight","isTouch","tooltip","str","demo","size1","wordWrap","setTimeout","createTooltip","drawSymbol","functionName","renderLegendShape","renderOption","renderPath","shapeWidth","shapeHeight","shapeX","shapeY","concat","getElementOffset","offsetWidth","offsetHeight","removeChild","changeBorderWidth","childNode","l","changeNavaigationLineWidth","currentStroke","shapeSettings","node","navigationLineSettings","targetTouches","touches","calculateScale","startTouches","endTouches","startDistance","getDistance","endDistance","getTouches","posTop","posLeft","slice","touch","getTouchCenter","reduce","zoomAnimate","previousLocation","previousPoint","preScale","previousScale","diffScale","currentLocation","currentScale","slope","intercept","slopeValue","slopeFactor","slopeIntersection","horizontalDifference","verticalDifference","processTemplate","process","clearAnimation","markerStyle","startAnimation","timestamp","requestAnimationFrame","cancelAnimationFrame","MapAjax","async","contentType","sendData","dataOptions","smoothTranslate","diffx","diffy","compareZoomFactor","previous","shouldZoomPreviousFactor","current","shouldZoomCurrentFactor","calculateZoomLevel","minLat","maxLat","minLong","maxLong","latRatio","lngRatio","applyMethodeZoom","latZoom","lngZoom","result","maxLatSin","maxLatRad","maxLatValue","minLatSin","minLatRad","minLatValue","latiRatio","longiRatio","minLocation","maxLocation","lngDiff","WORLD_PX_HEIGHT","WORLD_PX_WIDTH","LN2","processResult","dataValue","resultValue"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\n/**\n * Helper functions for maps control\n */\nimport { createElement, isNullOrUndefined, remove, compile as templateComplier, merge } from '@syncfusion/ej2-base';\nimport { Animation, isBlazor } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { itemSelection } from '../../index';\nimport { animationComplete } from '../index';\nimport { markerClusterRendering } from '../index';\n/**\n * Maps internal use of `Size` type\n */\nvar Size = /** @class */ (function () {\n    function Size(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    return Size;\n}());\nexport { Size };\n/**\n * To find number from string\n * @private\n */\nexport function stringToNumber(value, containerSize) {\n    if (value !== null && value !== undefined) {\n        return value.indexOf('%') !== -1 ? (containerSize / 100) * parseInt(value, 10) : parseInt(value, 10);\n    }\n    return null;\n}\n/**\n * Method to calculate the width and height of the maps\n */\nexport function calculateSize(maps) {\n    var containerWidth = maps.element.clientWidth;\n    var containerHeight = maps.element.clientHeight;\n    var parentHeight = maps.element.parentElement.clientHeight;\n    var parentWidth = maps.element.parentElement.clientWidth;\n    var containerElementWidth = stringToNumber(maps.element.style.width, containerWidth);\n    var containerElementHeight = stringToNumber(maps.element.style.height, containerWidth);\n    if (maps.width === '0px' || maps.width === '0%' || maps.height === '0%' || maps.height === '0px') {\n        maps.availableSize = new Size(0, 0);\n    }\n    else {\n        maps.availableSize = new Size(stringToNumber(maps.width, containerWidth) || containerWidth || containerElementWidth || 600, stringToNumber(maps.height, containerHeight) || containerHeight || containerElementHeight || (maps.isDevice ?\n            Math.min(window.innerWidth, window.innerHeight) : 450));\n    }\n}\n/**\n * Method to create svg for maps.\n */\nexport function createSvg(maps) {\n    maps.renderer = new SvgRenderer(maps.element.id);\n    calculateSize(maps);\n    maps.svgObject = maps.renderer.createSvg({\n        id: maps.element.id + '_svg',\n        width: maps.availableSize.width,\n        height: maps.availableSize.height\n    });\n    if (maps.width === '0px' || maps.width === '0%' || maps.height === '0%' || maps.height === '0px') {\n        maps.svgObject.setAttribute('height', '0');\n        maps.svgObject.setAttribute('width', '0');\n    }\n}\nexport function getMousePosition(pageX, pageY, element) {\n    var elementRect = element.getBoundingClientRect();\n    var pageXOffset = element.ownerDocument.defaultView.pageXOffset;\n    var pageYOffset = element.ownerDocument.defaultView.pageYOffset;\n    var clientTop = element.ownerDocument.documentElement.clientTop;\n    var clientLeft = element.ownerDocument.documentElement.clientLeft;\n    var positionX = elementRect.left + pageXOffset - clientLeft;\n    var positionY = elementRect.top + pageYOffset - clientTop;\n    return new MapLocation((pageX - positionX), (pageY - positionY));\n}\n/**\n * Method to convert degrees to radians\n */\nexport function degreesToRadians(deg) {\n    return deg * (Math.PI / 180);\n}\n/**\n * Convert radians to degrees method\n */\nexport function radiansToDegrees(radian) {\n    return radian * (180 / Math.PI);\n}\n/**\n * Method for converting from latitude and longitude values to points\n */\nexport function convertGeoToPoint(latitude, longitude, factor, layer, mapModel) {\n    var mapSize = new Size(mapModel.mapAreaRect.width, mapModel.mapAreaRect.height);\n    var x;\n    var y;\n    var value;\n    var lat;\n    var lng;\n    var temp;\n    var longitudeMinMax = mapModel.baseMapBounds.longitude;\n    var latitudeMinMax = mapModel.baseMapBounds.latitude;\n    var latRadian = degreesToRadians(latitude);\n    var lngRadian = degreesToRadians(longitude);\n    var type = mapModel.projectionType;\n    var size = (mapModel.isTileMap) ? Math.pow(2, 1) * 256 : (isNullOrUndefined(factor)) ? Math.min(mapSize.width, mapSize.height) :\n        (Math.min(mapSize.width, mapSize.height) * factor);\n    if (layer.geometryType === 'Normal') {\n        x = isNullOrUndefined(factor) ? longitude : Math.abs((longitude - longitudeMinMax.min) * factor);\n        y = isNullOrUndefined(factor) ? latitude : Math.abs((latitudeMinMax.max - latitude) * factor);\n    }\n    else if (layer.geometryType === 'Geographic') {\n        switch (type) {\n            case 'Mercator':\n                var pixelOrigin = new Point(size / 2, size / 2);\n                x = pixelOrigin.x + longitude * (size / 360);\n                var sinY = calculateBound(Math.sin(degreesToRadians(latitude)), -0.9999, 0.9999);\n                y = pixelOrigin.y + 0.5 * (Math.log((1 + sinY) / (1 - sinY))) * (-(size / (2 * Math.PI)));\n                break;\n            case 'Winkel3':\n                value = aitoff(lngRadian, latRadian);\n                lng = (value.x + lngRadian / (Math.PI / 2)) / 2;\n                lat = (value.y + latRadian) / 2;\n                break;\n            case 'Miller':\n                lng = lngRadian;\n                lat = (1.25 * Math.log(Math.tan((Math.PI / 4) + (.4 * latRadian))));\n                break;\n            case 'Eckert3':\n                temp = Math.sqrt(Math.PI * (4 + Math.PI));\n                lng = 2 / temp * lngRadian * (1 + Math.sqrt(1 - 4 * latRadian * latRadian / (Math.PI * Math.PI)));\n                lat = 4 / temp * latRadian;\n                break;\n            case 'AitOff':\n                value = aitoff(lngRadian, latRadian);\n                lng = value.x;\n                lat = value.y;\n                break;\n            case 'Eckert5':\n                lng = lngRadian * (1 + Math.cos(latRadian)) / Math.sqrt(2 + Math.PI);\n                lat = 2 * latRadian / Math.sqrt(2 + Math.PI);\n                break;\n            case 'Equirectangular':\n                lng = lngRadian;\n                lat = latRadian;\n                break;\n            case 'Eckert6':\n                var epsilon = 1e-6;\n                temp = (1 + (Math.PI / 2)) * Math.sin(latRadian);\n                var delta = Infinity;\n                for (var i = 0; i < 10 && Math.abs(delta) > epsilon; i++) {\n                    delta = (latRadian + (Math.sin(latRadian)) - temp) / (1 + Math.cos(latRadian));\n                    latRadian = latRadian - delta;\n                }\n                temp = Math.sqrt(2 + Math.PI);\n                lng = lngRadian * (1 + Math.cos(latRadian)) / temp;\n                lat = 2 * latRadian / temp;\n                break;\n        }\n        x = (type === 'Mercator') ? x : roundTo(xToCoordinate(mapModel, radiansToDegrees(lng)), 3);\n        y = (type === 'Mercator') ? y : (-(roundTo(yToCoordinate(mapModel, radiansToDegrees(lat)), 3)));\n    }\n    return new Point(x, y);\n}\n/**\n * Converting tile latitude and longitude to point\n */\nexport function convertTileLatLongToPoint(center, zoomLevel, tileTranslatePoint, isMapCoordinates) {\n    var size = Math.pow(2, zoomLevel) * 256;\n    var x = (center.x + 180) / 360;\n    var sinLatitude = Math.sin(center.y * Math.PI / 180);\n    var y = 0.5 - Math.log((1 + sinLatitude) / (1 - sinLatitude)) / (4 * Math.PI);\n    var pixelX = center.x;\n    var pixelY = center.y;\n    if (isMapCoordinates) {\n        pixelX = (x * size + 0.5) + tileTranslatePoint.x;\n        pixelY = (y * size + 0.5) + tileTranslatePoint.y;\n    }\n    return { x: pixelX, y: pixelY };\n}\n/**\n * Method for calculate x point\n */\nexport function xToCoordinate(mapObject, val) {\n    var longitudeMinMax = mapObject.baseMapBounds.longitude;\n    var totalSize = isNullOrUndefined(mapObject.baseSize) ? mapObject.mapAreaRect.width : mapObject.mapAreaRect.width +\n        (Math.abs(mapObject.baseSize.width - mapObject.mapAreaRect.width) / 2);\n    return Math.round(totalSize * (val - longitudeMinMax.min) / (longitudeMinMax.max - longitudeMinMax.min) * 100) / 100;\n}\n/**\n * Method for calculate y point\n */\nexport function yToCoordinate(mapObject, val) {\n    var latitudeMinMax = mapObject.baseMapBounds.latitude;\n    return Math.round(mapObject.mapAreaRect.height * (val - latitudeMinMax.min) / (latitudeMinMax.max - latitudeMinMax.min) * 100) / 100;\n}\n/**\n * Method for calculate aitoff projection\n */\nexport function aitoff(x, y) {\n    var cosy = Math.cos(y);\n    var sincia = sinci(acos(cosy * Math.cos(x /= 2)));\n    return new Point(2 * cosy * Math.sin(x) * sincia, Math.sin(y) * sincia);\n}\n/**\n * Method to round the number\n */\nexport function roundTo(a, b) {\n    var c = Math.pow(10, b);\n    return (Math.round(a * c) / c);\n}\nexport function sinci(x) {\n    return x / Math.sin(x);\n}\nexport function acos(a) {\n    return Math.acos(a);\n}\n/**\n * Method to calculate bound\n */\nexport function calculateBound(value, min, max) {\n    if (!isNullOrUndefined(min)) {\n        value = Math.max(value, min);\n    }\n    if (!(isNullOrUndefined(max))) {\n        value = Math.min(value, max);\n    }\n    return value;\n}\n/**\n * To trigger the download element\n * @param fileName\n * @param type\n * @param url\n */\nexport function triggerDownload(fileName, type, url, isDownload) {\n    createElement('a', {\n        attrs: {\n            'download': fileName + '.' + type.toLocaleLowerCase(),\n            'href': url\n        }\n    }).dispatchEvent(new MouseEvent(isDownload ? 'click' : 'move', {\n        view: window,\n        bubbles: false,\n        cancelable: true\n    }));\n}\n/**\n * Map internal class for point\n */\nvar Point = /** @class */ (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return Point;\n}());\nexport { Point };\n/**\n * Map internal class for min and max\n *\n */\nvar MinMax = /** @class */ (function () {\n    function MinMax(min, max) {\n        this.min = min;\n        this.max = max;\n    }\n    return MinMax;\n}());\nexport { MinMax };\n/**\n * Map internal class locations\n */\nvar GeoLocation = /** @class */ (function () {\n    function GeoLocation(latitude, longitude) {\n        this.latitude = new MinMax(latitude.min, latitude.max);\n        this.longitude = new MinMax(longitude.min, longitude.max);\n    }\n    return GeoLocation;\n}());\nexport { GeoLocation };\n/**\n * Function to measure the height and width of the text.\n * @param  {string} text\n * @param  {FontModel} font\n * @param  {string} id\n * @returns no\n * @private\n */\nexport function measureText(text, font) {\n    var measureObject = document.getElementById('mapsmeasuretext');\n    if (measureObject === null) {\n        measureObject = createElement('text', { id: 'mapsmeasuretext' });\n        document.body.appendChild(measureObject);\n    }\n    measureObject.innerHTML = text;\n    measureObject.style.position = 'absolute';\n    if (typeof (font.size) === 'number') {\n        measureObject.style.fontSize = (font.size) + 'px';\n    }\n    else {\n        measureObject.style.fontSize = font.size;\n    }\n    measureObject.style.fontWeight = font.fontWeight;\n    measureObject.style.fontStyle = font.fontStyle;\n    measureObject.style.fontFamily = font.fontFamily;\n    measureObject.style.visibility = 'hidden';\n    measureObject.style.top = '-100';\n    measureObject.style.left = '0';\n    measureObject.style.whiteSpace = 'nowrap';\n    // For bootstrap line height issue\n    measureObject.style.lineHeight = 'normal';\n    return new Size(measureObject.clientWidth, measureObject.clientHeight);\n}\n/**\n * Internal use of text options\n * @private\n */\nvar TextOption = /** @class */ (function () {\n    function TextOption(id, x, y, anchor, text, transform, baseLine) {\n        if (transform === void 0) { transform = ''; }\n        this.transform = '';\n        this.baseLine = 'auto';\n        this.id = id;\n        this.text = text;\n        this.transform = transform;\n        this.anchor = anchor;\n        this.x = x;\n        this.y = y;\n        this.baseLine = baseLine;\n    }\n    return TextOption;\n}());\nexport { TextOption };\n/**\n * Internal use of path options\n * @private\n */\nvar PathOption = /** @class */ (function () {\n    function PathOption(id, fill, width, color, opacity, dashArray, d) {\n        this.id = id;\n        this.opacity = opacity;\n        this.fill = fill;\n        this.stroke = color;\n        this['stroke-width'] = width;\n        this['stroke-dasharray'] = dashArray;\n        this.d = d;\n    }\n    return PathOption;\n}());\nexport { PathOption };\n/** @private */\nvar ColorValue = /** @class */ (function () {\n    function ColorValue(r, g, b) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n    }\n    return ColorValue;\n}());\nexport { ColorValue };\n/**\n * Internal use of rectangle options\n * @private\n */\nvar RectOption = /** @class */ (function (_super) {\n    __extends(RectOption, _super);\n    function RectOption(id, fill, border, opacity, rect, rx, ry, transform, dashArray) {\n        var _this = _super.call(this, id, fill, border.width, border.color, opacity, dashArray) || this;\n        _this.y = rect.y;\n        _this.x = rect.x;\n        _this.height = rect.height;\n        _this.width = rect.width;\n        _this.rx = rx ? rx : 0;\n        _this.ry = ry ? ry : 0;\n        _this.transform = transform ? transform : '';\n        _this['stroke-dasharray'] = dashArray;\n        return _this;\n    }\n    return RectOption;\n}(PathOption));\nexport { RectOption };\n/**\n * Internal use of circle options\n * @private\n */\nvar CircleOption = /** @class */ (function (_super) {\n    __extends(CircleOption, _super);\n    function CircleOption(id, fill, border, opacity, cx, cy, r, dashArray) {\n        var _this = _super.call(this, id, fill, border.width, border.color, opacity) || this;\n        _this.cy = cy;\n        _this.cx = cx;\n        _this.r = r;\n        _this['stroke-dasharray'] = dashArray;\n        return _this;\n    }\n    return CircleOption;\n}(PathOption));\nexport { CircleOption };\n/**\n * Internal use of polygon options\n * @private\n */\nvar PolygonOption = /** @class */ (function (_super) {\n    __extends(PolygonOption, _super);\n    function PolygonOption(id, points, fill, width, color, opacity, dashArray) {\n        if (opacity === void 0) { opacity = 1; }\n        if (dashArray === void 0) { dashArray = ''; }\n        var _this = _super.call(this, id, fill, width, color, opacity, dashArray) || this;\n        _this.points = points;\n        return _this;\n    }\n    return PolygonOption;\n}(PathOption));\nexport { PolygonOption };\n/**\n * Internal use of polyline options\n * @private\n */\nvar PolylineOption = /** @class */ (function (_super) {\n    __extends(PolylineOption, _super);\n    function PolylineOption(id, points, fill, width, color, opacity, dashArray) {\n        if (opacity === void 0) { opacity = 1; }\n        if (dashArray === void 0) { dashArray = ''; }\n        return _super.call(this, id, points, fill, width, color, opacity, dashArray) || this;\n    }\n    return PolylineOption;\n}(PolygonOption));\nexport { PolylineOption };\n/**\n * Internal use of line options\n * @private\n */\nvar LineOption = /** @class */ (function (_super) {\n    __extends(LineOption, _super);\n    function LineOption(id, line, fill, width, color, opacity, dashArray) {\n        if (opacity === void 0) { opacity = 1; }\n        if (dashArray === void 0) { dashArray = ''; }\n        var _this = _super.call(this, id, fill, width, color, opacity, dashArray) || this;\n        _this.x1 = line.x1;\n        _this.y1 = line.y1;\n        _this.x2 = line.x2;\n        _this.y2 = line.y2;\n        return _this;\n    }\n    return LineOption;\n}(PathOption));\nexport { LineOption };\n/**\n * Internal use of line\n * @property\n */\nvar Line = /** @class */ (function () {\n    function Line(x1, y1, x2, y2) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n    return Line;\n}());\nexport { Line };\n/**\n * Internal use of map location type\n */\nvar MapLocation = /** @class */ (function () {\n    function MapLocation(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return MapLocation;\n}());\nexport { MapLocation };\n/**\n * Internal use of type rect\n * @private\n */\nvar Rect = /** @class */ (function () {\n    function Rect(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    return Rect;\n}());\nexport { Rect };\n/**\n * Internal use for pattern creation.\n * @property\n */\nvar PatternOptions = /** @class */ (function () {\n    function PatternOptions(id, x, y, width, height, patternUnits, patternContentUnits, patternTransform, href) {\n        if (patternUnits === void 0) { patternUnits = 'userSpaceOnUse'; }\n        if (patternContentUnits === void 0) { patternContentUnits = 'userSpaceOnUse'; }\n        if (patternTransform === void 0) { patternTransform = ''; }\n        if (href === void 0) { href = ''; }\n        this.id = id;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.patternUnits = patternUnits;\n        this.patternContentUnits = patternContentUnits;\n        this.patternTransform = patternTransform;\n        this.href = href;\n    }\n    return PatternOptions;\n}());\nexport { PatternOptions };\n/**\n * Internal rendering of text\n * @private\n */\nexport function renderTextElement(option, style, color, parent, isMinus) {\n    if (isMinus === void 0) { isMinus = false; }\n    var renderOptions = {\n        'id': option.id,\n        'x': option.x,\n        'y': option.y,\n        'fill': color,\n        'font-size': style.size,\n        'font-style': style.fontStyle,\n        'font-family': style.fontFamily,\n        'font-weight': style.fontWeight,\n        'text-anchor': option.anchor,\n        'transform': option.transform,\n        'opacity': style.opacity,\n        'dominant-baseline': option.baseLine\n    };\n    var text = typeof option.text === 'string' ? option.text : isMinus ? option.text[option.text.length - 1] : option.text[0];\n    var tspanElement;\n    var renderer = new SvgRenderer('');\n    var height;\n    var htmlObject = renderer.createText(renderOptions, text);\n    htmlObject.style['user-select'] = 'none';\n    htmlObject.style['-moz-user-select'] = 'none';\n    htmlObject.style['-webkit-touch-callout'] = 'none';\n    htmlObject.style['-webkit-user-select'] = 'none';\n    htmlObject.style['-khtml-user-select'] = 'none';\n    htmlObject.style['-ms-user-select'] = 'none';\n    htmlObject.style['-o-user-select'] = 'none';\n    if (typeof option.text !== 'string' && option.text.length > 1) {\n        for (var i = 1, len = option.text.length; i < len; i++) {\n            height = (measureText(option.text[i], style).height);\n            tspanElement = renderer.createTSpan({\n                'x': option.x, 'id': option.id,\n                'y': (option.y) + ((isMinus) ? -(i * height) : (i * height))\n            }, isMinus ? option.text[option.text.length - (i + 1)] : option.text[i]);\n            htmlObject.appendChild(tspanElement);\n        }\n    }\n    parent.appendChild(htmlObject);\n    return htmlObject;\n}\n/**\n * @private\n */\nexport function convertElement(element, markerId, data, index, mapObj) {\n    var childElement = createElement('div', {\n        id: markerId,\n        styles: 'position: absolute;pointer-events: auto;'\n    });\n    var elementLength = element.length;\n    while (elementLength > 0) {\n        childElement.appendChild(element[0]);\n        elementLength--;\n    }\n    var templateHtml = childElement.innerHTML;\n    var templateSplitValue;\n    var properties = Object.keys(data);\n    for (var i = 0; i < properties.length; i++) {\n        if (typeof data[properties[i]] === 'object') {\n            templateHtml = convertStringToValue(templateHtml, '', data, mapObj);\n        }\n        else if (properties[i].toLowerCase() !== 'latitude' && properties[i].toLowerCase() !== 'longitude') {\n            templateHtml = templateHtml.replace(new RegExp('{{:' + properties[i] + '}}', 'g'), data[properties[i].toString()]);\n        }\n    }\n    childElement.innerHTML = templateHtml;\n    return childElement;\n}\nexport function formatValue(value, maps) {\n    var formatValue;\n    var formatFunction;\n    if (maps.format && !isNaN(Number(value))) {\n        formatFunction = maps.intl.getNumberFormat({ format: maps.format, useGrouping: maps.useGroupingSeparator });\n        formatValue = formatFunction(Number(value));\n    }\n    else {\n        formatValue = value;\n    }\n    return formatValue;\n}\nexport function convertStringToValue(stringTemplate, format, data, maps) {\n    var templateHtml = (stringTemplate === '') ? format : stringTemplate;\n    var templateValue = (stringTemplate === '') ? templateHtml.split('${') : templateHtml.split('{{:');\n    for (var i = 0; i < templateValue.length; i++) {\n        if ((templateValue[i].indexOf('}}') > -1 && templateValue[i].indexOf('.') > -1) ||\n            (templateValue[i].indexOf('}') > -1 && templateValue[i].search('.') > -1)) {\n            var split = (stringTemplate === '') ? templateValue[i].split('}') : templateValue[i].split('}}');\n            for (var j = 0; j < split.length; j++) {\n                if (split[j].indexOf('.') > -1) {\n                    var templateSplitValue = (getValueFromObject(data, split[j])).toString();\n                    templateHtml = (stringTemplate === '') ?\n                        templateHtml.split('${' + split[j] + '}').join(formatValue(templateSplitValue, maps)) :\n                        templateHtml.replace(new RegExp('{{:' + split[j] + '}}', 'g'), templateSplitValue);\n                }\n            }\n        }\n    }\n    return templateHtml;\n}\nexport function convertElementFromLabel(element, labelId, data, index, mapObj) {\n    var labelEle = isNullOrUndefined(element.childElementCount) ? element[0] : element;\n    var templateHtml = labelEle.outerHTML;\n    var properties = Object.keys(data);\n    for (var i = 0; i < properties.length; i++) {\n        templateHtml = templateHtml.replace(new RegExp('{{:' + properties[i] + '}}', 'g'), data[properties[i].toString()]);\n    }\n    return createElement('div', {\n        id: labelId,\n        innerHTML: templateHtml,\n        styles: 'position: absolute'\n    });\n}\n/* tslint:disable:no-string-literal */\n//tslint:disable\nexport function drawSymbols(shape, imageUrl, location, markerID, shapeCustom, markerCollection, maps) {\n    var markerEle;\n    var x;\n    var y;\n    var size = shapeCustom['size'];\n    var borderColor = shapeCustom['borderColor'];\n    var borderWidth = parseFloat(shapeCustom['borderWidth']);\n    var fill = shapeCustom['fill'];\n    var dashArray = shapeCustom['dashArray'];\n    var border = { color: borderColor, width: borderWidth };\n    var opacity = shapeCustom['opacity'];\n    var padding = 5;\n    var circleOptions;\n    var pathOptions;\n    var rectOptions;\n    pathOptions = new PathOption(markerID, fill, borderWidth, borderColor, opacity, dashArray, '');\n    if (shape === 'Circle') {\n        var radius = (size.width + size.height) / 4;\n        circleOptions = new CircleOption(markerID, fill, border, opacity, location.x, location.y, radius, dashArray);\n        markerEle = maps.renderer.drawCircle(circleOptions);\n    }\n    else if (shape === 'Rectangle') {\n        x = location.x - (size.width / 2);\n        y = location.y - (size.height / 2);\n        rectOptions = new RectOption(markerID, fill, border, opacity, new Rect(x, y, size.width, size.height), null, null, '', dashArray);\n        markerEle = maps.renderer.drawRectangle(rectOptions);\n    }\n    else if (shape === 'Image') {\n        x = location.x - (size.width / 2);\n        y = location.y - size.height;\n        merge(pathOptions, { 'href': imageUrl, 'height': size.height, 'width': size.width, x: x, y: y });\n        markerEle = maps.renderer.drawImage(pathOptions);\n    }\n    else {\n        markerEle = calculateShapes(maps, shape, pathOptions, size, location, markerCollection);\n    }\n    return markerEle;\n}\nexport function getValueFromObject(data, value) {\n    if (!isNullOrUndefined(data) && !isNullOrUndefined(value)) {\n        var splits = value.replace(/\\[/g, '.').replace(/\\]/g, '').split('.');\n        if (splits.length === 1) {\n            data = data[splits[0]];\n        }\n        else {\n            for (var i = 0; i < splits.length && !isNullOrUndefined(data); i++) {\n                data = data[splits[i]];\n            }\n        }\n    }\n    return data;\n}\nexport function markerColorChoose(eventArgs, data) {\n    var color = (!isNullOrUndefined(eventArgs.colorValuePath)) ? ((eventArgs.colorValuePath.indexOf('.') > -1) ? (getValueFromObject(data, eventArgs.colorValuePath)).toString() :\n        data[eventArgs.colorValuePath]) : data[eventArgs.colorValuePath];\n    eventArgs.fill = (!isNullOrUndefined(eventArgs.colorValuePath) &&\n        !isNullOrUndefined(color)) ?\n        ((eventArgs.colorValuePath.indexOf('.') > -1) ? (getValueFromObject(data, eventArgs.colorValuePath)).toString() :\n            data[eventArgs.colorValuePath]) : eventArgs.fill;\n    return eventArgs;\n}\nexport function markerShapeChoose(eventArgs, data) {\n    if (!isNullOrUndefined(eventArgs.shapeValuePath) && !isNullOrUndefined(data[eventArgs.shapeValuePath])) {\n        var shape = ((eventArgs.shapeValuePath.indexOf('.') > -1) ?\n            (getValueFromObject(data, eventArgs.shapeValuePath).toString()) :\n            data[eventArgs.shapeValuePath]);\n        eventArgs.shape = shape;\n        if (data[eventArgs.shapeValuePath] == 'Image') {\n            eventArgs.imageUrl = (!isNullOrUndefined(eventArgs.imageUrlValuePath) &&\n                !isNullOrUndefined(data[eventArgs.imageUrlValuePath])) ?\n                ((eventArgs.imageUrlValuePath.indexOf('.') > -1) ? getValueFromObject(data, eventArgs.imageUrlValuePath).toString() : data[eventArgs.imageUrlValuePath]) : eventArgs.imageUrl;\n        }\n    }\n    else {\n        var shapes = (!isNullOrUndefined(eventArgs.shapeValuePath)) ? ((eventArgs.shapeValuePath.indexOf('.') > -1) ? getValueFromObject(data, eventArgs.shapeValuePath).toString() : eventArgs.shape) : eventArgs.shape;\n        eventArgs.shape = shapes;\n        var shapeImage = (!isNullOrUndefined(eventArgs.imageUrlValuePath)) ? ((eventArgs.imageUrlValuePath.indexOf('.') > -1) ? (getValueFromObject(data, eventArgs.imageUrlValuePath)).toString() : eventArgs.imageUrl) : eventArgs.imageUrl;\n        eventArgs.imageUrl = shapeImage;\n    }\n    return eventArgs;\n}\n//tslint:disable\nexport function clusterTemplate(currentLayer, markerTemplate, maps, layerIndex, markerCollection, layerElement, check, zoomCheck) {\n    var bounds1;\n    var bounds2;\n    var colloideBounds = [];\n    var clusterColloideBounds = [];\n    var tempX = 0;\n    var tempY = 0;\n    var data;\n    var style = currentLayer.markerClusterSettings.labelStyle;\n    var options;\n    var textElement;\n    var tempElement1;\n    var shapeCustom;\n    var tempElement;\n    var postionY = (15 / 4);\n    var m = 0;\n    var indexCollection = [];\n    var clusters = currentLayer.markerClusterSettings;\n    var clusterGroup = maps.renderer.createGroup({ id: maps.element.id + '_LayerIndex_' + layerIndex + '_markerCluster' });\n    var eventArg = {\n        cancel: false, name: markerClusterRendering, fill: clusters.fill, height: clusters.height,\n        width: clusters.width, imageUrl: clusters.imageUrl, shape: clusters.shape,\n        data: data, maps: maps, cluster: clusters, border: clusters.border\n    };\n    if (isBlazor()) {\n        var data_1 = eventArg.data, maps_1 = eventArg.maps, cluster = eventArg.cluster, blazorEventArgs = __rest(eventArg, [\"data\", \"maps\", \"cluster\"]);\n        eventArg = blazorEventArgs;\n    }\n    maps.trigger('markerClusterRendering', eventArg, function (clusterargs) {\n        for (var o_1 = 0; o_1 < markerTemplate.childElementCount; o_1++) {\n            indexCollection = [];\n            if (markerTemplate.childNodes[o_1]['style']['visibility'] !== 'hidden') {\n                tempElement = markerTemplate.childNodes[o_1];\n                bounds1 = tempElement.getBoundingClientRect();\n                indexCollection.push(o_1);\n                if (!isNullOrUndefined(bounds1)) {\n                    for (var p_1 = o_1 + 1; p_1 < markerTemplate.childElementCount; p_1++) {\n                        if (markerTemplate.childNodes[p_1]['style']['visibility'] !== 'hidden') {\n                            tempElement = markerTemplate.childNodes[p_1];\n                            bounds2 = tempElement.getBoundingClientRect();\n                            if (!isNullOrUndefined(bounds2)) {\n                                if (bounds1.left > bounds2.right || bounds1.right < bounds2.left\n                                    || bounds1.top > bounds2.bottom || bounds1.bottom < bounds2.top) {\n                                }\n                                else {\n                                    colloideBounds.push(bounds2);\n                                    markerTemplate.childNodes[p_1]['style']['visibility'] = \"hidden\";\n                                    indexCollection.push(p_1);\n                                }\n                            }\n                        }\n                    }\n                    tempX = bounds1.left + bounds1.width / 2;\n                    tempY = bounds1.top + bounds1.height;\n                    if (colloideBounds.length > 0) {\n                        indexCollection = indexCollection.filter(function (item, index, value) { return value.indexOf(item) === index; });\n                        var container = maps.element.getBoundingClientRect();\n                        tempX = tempX - container['left'];\n                        tempY = tempY - container['top'];\n                        var translate = (maps.isTileMap) ? new Object() : getTranslate(maps, currentLayer, false);\n                        var transPoint = (maps.isTileMap) ? { x: 0, y: 0 } : (maps.translatePoint.x !== 0) ?\n                            maps.translatePoint : translate['location'];\n                        var dataIndex = parseInt(markerTemplate.childNodes[o_1]['id'].split('_dataIndex_')[1].split('_')[0], 10);\n                        var markerIndex = parseInt(markerTemplate.childNodes[o_1]['id'].split('_MarkerIndex_')[1].split('_')[0], 10);\n                        markerTemplate.childNodes[o_1]['style']['visibility'] = \"hidden\";\n                        var clusters_1 = currentLayer.markerClusterSettings;\n                        if (eventArg.cancel) {\n                            shapeCustom = {\n                                size: new Size(clusters_1.width, clusters_1.height),\n                                fill: clusters_1.fill, borderColor: clusters_1.border.color,\n                                borderWidth: clusters_1.border.width, opacity: clusters_1.opacity,\n                                dashArray: clusters_1.dashArray\n                            };\n                            shapeCustom['fill'] = clusters_1.fill;\n                            shapeCustom['size']['width'] = clusters_1.width;\n                            shapeCustom['size']['height'] = clusters_1.height;\n                            shapeCustom['imageUrl'] = clusters_1.imageUrl;\n                            shapeCustom['shape'] = clusters_1.shape;\n                            shapeCustom['borderColor'] = clusters_1.border.color;\n                            shapeCustom['borderWidth'] = clusters_1.border.width;\n                        }\n                        else {\n                            shapeCustom = {\n                                size: new Size(clusters_1.width, clusters_1.height),\n                                fill: clusters_1.fill, borderColor: clusters_1.border.color,\n                                borderWidth: clusters_1.border.width, opacity: clusters_1.opacity,\n                                dashArray: clusters_1.dashArray\n                            };\n                            shapeCustom['fill'] = eventArg.fill;\n                            shapeCustom['size']['width'] = eventArg.width;\n                            shapeCustom['size']['height'] = eventArg.height;\n                            shapeCustom['imageUrl'] = eventArg.imageUrl;\n                            shapeCustom['shape'] = eventArg.shape;\n                            shapeCustom['borderColor'] = eventArg.border.color;\n                            shapeCustom['borderWidth'] = eventArg.border.width;\n                        }\n                        tempX = (maps.isTileMap) ? tempX : (markerTemplate.id.indexOf('_Markers_Group') > -1) ? tempX : ((tempX + transPoint.x) * maps.mapScaleValue);\n                        tempY = (maps.isTileMap) ? tempY : (markerTemplate.id.indexOf('_Markers_Group') > -1) ? tempY : ((tempY + transPoint.y) * maps.mapScaleValue);\n                        var clusterID = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex + '_cluster_' + (m);\n                        var labelID = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex + '_cluster_' + (m) + '_datalabel_' + m;\n                        m++;\n                        var imageShapeY = shapeCustom['shape'] === 'Image' ? shapeCustom['size']['height'] / 2 : 0;\n                        var ele = drawSymbols(shapeCustom['shape'], shapeCustom['imageUrl'], { x: 0, y: imageShapeY }, clusterID, shapeCustom, markerCollection, maps);\n                        ele.setAttribute('transform', 'translate( ' + tempX + ' ' + tempY + ' )');\n                        if (eventArg.shape === 'Balloon') {\n                            ele.children[0].innerHTML = indexCollection.toString();\n                        }\n                        else {\n                            ele.innerHTML = indexCollection.toString();\n                        }\n                        options = new TextOption(labelID, (0), postionY, 'middle', (colloideBounds.length + 1).toString(), '', '');\n                        textElement = renderTextElement(options, style, style.color, markerCollection);\n                        textElement.setAttribute('transform', 'translate( ' + tempX + ' ' + tempY + ' )');\n                        clusterGroup.appendChild(textElement);\n                        clusterGroup.appendChild(ele);\n                    }\n                }\n                colloideBounds = [];\n            }\n        }\n        layerElement.appendChild(clusterGroup);\n        maps.svgObject.appendChild(layerElement);\n        maps.element.appendChild(maps.svgObject);\n        for (var o = 0; o < clusterGroup.childElementCount; o++) {\n            if (clusterGroup.childNodes[o]['style']['visibility'] !== 'hidden') {\n                tempElement = clusterGroup.childNodes[o];\n                bounds1 = tempElement.getBoundingClientRect();\n                if (!isNullOrUndefined(bounds1) && !(tempElement.id.indexOf('_datalabel_') > -1)) {\n                    for (var p = o + 1; p < clusterGroup.childElementCount; p++) {\n                        if (clusterGroup.childNodes[p]['style']['visibility'] !== 'hidden') {\n                            tempElement1 = clusterGroup.childNodes[p];\n                            bounds2 = tempElement1.getBoundingClientRect();\n                            if (!isNullOrUndefined(bounds2) && !(tempElement1.id.indexOf('_datalabel_') > -1)) {\n                                if (bounds1.left > bounds2.right || bounds1.right < bounds2.left\n                                    || bounds1.top > bounds2.bottom || bounds1.bottom < bounds2.top) {\n                                }\n                                else {\n                                    clusterColloideBounds.push(tempElement1);\n                                    clusterColloideBounds.push(clusterGroup.childNodes[p - 1]);\n                                    clusterGroup.childNodes[p]['style']['visibility'] = \"hidden\";\n                                    clusterGroup.childNodes[p - 1]['style']['visibility'] = \"hidden\";\n                                    indexCollection.push(p);\n                                }\n                            }\n                        }\n                    }\n                    if (clusterColloideBounds.length > 0) {\n                        tempElement = clusterGroup.childNodes[o];\n                        for (var i = 0; i < clusterColloideBounds.length; i++) {\n                            if (tempElement.tagName === 'g') {\n                                tempElement.childNodes[0].textContent = tempElement.childNodes[0].textContent + ',' +\n                                    clusterColloideBounds[i].textContent;\n                            }\n                            else {\n                                tempElement.textContent = tempElement.textContent + ',' + clusterColloideBounds[i].textContent;\n                            }\n                            clusterGroup.childNodes[o - 1].textContent = ((+(clusterGroup.childNodes[o - 1].textContent)) + (+(clusterColloideBounds[i + 1].textContent))).toString();\n                            i++;\n                        }\n                    }\n                    clusterColloideBounds = [];\n                }\n            }\n        }\n        while (0 < clusterGroup.childNodes.length) {\n            markerCollection.insertBefore(clusterGroup.childNodes[0], markerCollection.firstChild);\n        }\n        if (check) {\n            layerElement.appendChild(markerCollection);\n        }\n        else {\n            getElementByID(maps.element.id + '_Secondary_Element').appendChild(markerCollection);\n            layerElement.appendChild(markerCollection);\n        }\n        document.getElementById(maps.element.id + '_LayerIndex_0_markerCluster').remove();\n        if (zoomCheck) {\n            document.getElementById(maps.element.id + '_Layer_Collections').appendChild(layerElement);\n        }\n    });\n}\nexport function mergeSeparateCluster(sameMarkerData, maps, markerElement) {\n    var layerIndex = sameMarkerData[0].layerIndex;\n    var clusterIndex = sameMarkerData[0].targetClusterIndex;\n    var markerIndex = sameMarkerData[0].markerIndex;\n    var dataIndex = sameMarkerData[0].dataIndex;\n    var markerId = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex;\n    var clusterId = markerId + '_dataIndex_' + dataIndex + '_cluster_' + clusterIndex;\n    var clusterEle = getElement(clusterId);\n    var clusterEleLabel = getElement(clusterId + '_datalabel_' + clusterIndex);\n    clusterEle.setAttribute('visibility', 'visible');\n    clusterEleLabel.setAttribute('visibility', 'visible');\n    var markerEle;\n    var markerDataLength = sameMarkerData[0].data.length;\n    for (var i = 0; i < markerDataLength; i++) {\n        markerEle = getElement(markerId + '_dataIndex_' + sameMarkerData[0].data[i]['index']);\n        markerEle['style']['visibility'] = \"hidden\";\n    }\n    removeElement(maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_markerClusterConnectorLine');\n}\nexport function clusterSeparate(sameMarkerData, maps, markerElement, isDom) {\n    var layerIndex = sameMarkerData[0].layerIndex;\n    var markerIndex = sameMarkerData[0].markerIndex;\n    var clusterIndex = sameMarkerData[0].targetClusterIndex;\n    var dataIndex = sameMarkerData[0].dataIndex;\n    var getElementFunction = isDom ? getElement : markerElement.querySelector.bind(markerElement);\n    var getQueryConnect = isDom ? '' : '#';\n    var markerId = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex;\n    var clusterId = markerId + '_dataIndex_' + dataIndex + '_cluster_' + clusterIndex;\n    var clusterEle = getElementFunction(getQueryConnect + '' + clusterId);\n    var clusterEleLabel = getElementFunction(getQueryConnect + '' + clusterId + '_datalabel_' + clusterIndex);\n    clusterEle.setAttribute('visibility', 'hidden');\n    clusterEleLabel.setAttribute('visibility', 'hidden');\n    var marker = maps.layers[layerIndex].markerSettings[markerIndex];\n    var markerEle = getElementFunction(getQueryConnect + '' + markerId + '_dataIndex_' + dataIndex);\n    var height = marker.height;\n    var width = marker.width;\n    var centerX = +clusterEle.getAttribute('transform').split('translate(')[1].trim().split(' ')[0];\n    var centerY = +clusterEle.getAttribute('transform').split('translate(')[1].trim().split(' ')[1].split(')')[0].trim();\n    var radius = width + 5;\n    var area = 2 * 3.14 * radius;\n    var totalMarker = 0;\n    var numberOfMarker = Math.round(area / width);\n    totalMarker += numberOfMarker;\n    var markerDataLength = sameMarkerData[0].data.length;\n    var percent = Math.round((height / area) * 100);\n    percent = markerDataLength < numberOfMarker ? 100 / markerDataLength : percent;\n    var angle = (percent / 100) * 360;\n    var newAngle = markerDataLength < numberOfMarker ? 45 : 0;\n    var count = 1;\n    var start = 'M ' + centerX + ' ' + centerY + ' ';\n    var path = '';\n    for (var i = 0; i < markerDataLength; i++) {\n        if (totalMarker === i || Math.round(newAngle) >= 360) {\n            count++;\n            radius = (width + 5) * count;\n            newAngle = 0;\n            area = 2 * 3.14 * radius;\n            numberOfMarker = Math.round(area / height);\n            percent = Math.round((height / area) * 100);\n            while (percent * numberOfMarker < 100) {\n                numberOfMarker++;\n            }\n            angle = ((percent / 100) * 360);\n            totalMarker += numberOfMarker;\n        }\n        var x1 = centerX + radius * Math.sin((Math.PI * 2 * newAngle) / 360);\n        var y1 = centerY + radius * Math.cos((Math.PI * 2 * newAngle) / 360);\n        path += start + 'L ' + (x1) + ' ' + y1 + ' ';\n        markerEle = getElementFunction(getQueryConnect + '' + markerId + '_dataIndex_' + sameMarkerData[0].data[i]['index']);\n        markerEle.setAttribute('transform', 'translate( ' + x1 + ' ' + y1 + ')');\n        markerEle['style']['visibility'] = \"visible\";\n        newAngle += angle;\n    }\n    var options;\n    var connectorLine = maps.layers[layerIndex].markerClusterSettings.connectorLineSettings;\n    options = {\n        d: path, id: maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex + '_markerClusterConnectorLine', stroke: connectorLine.color,\n        opacity: connectorLine.opacity, 'stroke-width': connectorLine.width\n    };\n    markerElement = isDom ? getElementFunction(maps.element.id + '_Markers_Group') : markerElement;\n    var groupEle = maps.renderer.createGroup({ id: maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_markerClusterConnectorLine' });\n    groupEle.appendChild(maps.renderer.drawPath(options));\n    markerElement.insertBefore(groupEle, markerElement.querySelector('#' + markerId + '_dataIndex_0'));\n}\nexport function marker(eventArgs, markerSettings, markerData, dataIndex, location, transPoint, markerID, offset, scale, maps, markerCollection) {\n    var shapeCustom = {\n        size: new Size(eventArgs.width, eventArgs.height),\n        fill: eventArgs.fill, borderColor: eventArgs.border.color,\n        borderWidth: eventArgs.border.width, opacity: markerSettings.opacity,\n        dashArray: markerSettings.dashArray\n    };\n    var ele = drawSymbols(eventArgs.shape, eventArgs.imageUrl, { x: 0, y: 0 }, markerID, shapeCustom, markerCollection, maps);\n    var x = (maps.isTileMap ? location.x : (location.x + transPoint.x) * scale) + offset.x;\n    var y = (maps.isTileMap ? location.y : (location.y + transPoint.y) * scale) + offset.y;\n    ele.setAttribute('transform', 'translate( ' + x + ' ' + y + ' )');\n    maintainSelection(maps.selectedMarkerElementId, maps.markerSelectionClass, ele, 'MarkerselectionMapStyle');\n    markerCollection.appendChild(ele);\n    var element = (markerData.length - 1) === dataIndex ? 'marker' : null;\n    var markerPoint = new Point(x, y);\n    if (markerSettings.animationDuration > 0) {\n        elementAnimate(ele, markerSettings.animationDelay, markerSettings.animationDuration, markerPoint, maps, element);\n    }\n    return markerCollection;\n}\nexport function markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplate, location, scale, offset, maps) {\n    templateFn = getTemplateFunction(eventArgs.template);\n    if (templateFn && (!maps.isBlazor ? templateFn(data, null, null, maps.element.id + '_MarkerTemplate' + markerIndex, false).length : {})) {\n        var templateElement = templateFn(data, null, null, maps.element.id + '_MarkerTemplate' + markerIndex, false);\n        var markerElement = convertElement(templateElement, markerID, data, markerIndex, maps);\n        for (var i = 0; i < markerElement.children.length; i++) {\n            markerElement.children[i].style.pointerEvents = 'none';\n        }\n        markerElement.style.left = ((maps.isTileMap ? location.x :\n            ((Math.abs(maps.baseMapRectBounds['min']['x'] - location.x)) * scale)) + offset.x) + 'px';\n        markerElement.style.top = ((maps.isTileMap ? location.y :\n            ((Math.abs(maps.baseMapRectBounds['min']['y'] - location.y)) * scale)) + offset.y) + 'px';\n        markerTemplate.appendChild(markerElement);\n        if (maps.layers[maps.baseLayerIndex].layerType === 'GoogleStaticMap') {\n            var staticMapOffset = getElementByID(maps.element.id + '_StaticGoogleMap').getBoundingClientRect();\n            var markerElementOffset = markerElement.getBoundingClientRect();\n            var staticMapOffsetWidth = 640;\n            if ((staticMapOffset['x'] > markerElementOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < markerElementOffset['x'] + markerElementOffset['width'])\n                && (staticMapOffset['y'] > markerElementOffset['y'] || staticMapOffset['y'] + staticMapOffset['height'] < markerElementOffset['y'] + markerElementOffset['height'])) {\n                markerElement.style.display = 'none';\n            }\n        }\n    }\n    return markerTemplate;\n}\n/**\n * To maintain selection during page resize\n * @private\n */\nexport function maintainSelection(elementId, elementClass, element, className) {\n    if (elementId) {\n        for (var index = 0; index < elementId.length; index++) {\n            if (element.getAttribute('id') === elementId[index]) {\n                if (isNullOrUndefined(getElement(elementClass.id)) || index === 0) {\n                    document.body.appendChild(elementClass);\n                    if (element.id.indexOf('_MarkerIndex_') > -1 && element.childElementCount > 0) {\n                        element.children[0].setAttribute('class', className);\n                    }\n                }\n                element.setAttribute('class', className);\n            }\n        }\n    }\n}\n/**\n * To maintain selection style class\n * @private\n */\nexport function maintainStyleClass(id, idClass, fill, opacity, borderColor, borderWidth, maps) {\n    if (!getElement(id)) {\n        var styleClass = void 0;\n        styleClass = createElement('style', {\n            id: id, innerHTML: '.' + idClass + '{fill:'\n                + fill + ';' + 'opacity:' + opacity + ';' +\n                'stroke-width:' + borderWidth + ';' +\n                'stroke:' + borderColor + ';' + '}'\n        });\n        maps.shapeSelectionClass = styleClass;\n        document.body.appendChild(styleClass);\n    }\n}\n/**\n * Internal use of append shape element\n * @private\n */\nexport function appendShape(shape, element) {\n    if (element) {\n        element.appendChild(shape);\n    }\n    return shape;\n}\n/**\n * Internal rendering of Circle\n * @private\n */\nexport function drawCircle(maps, options, element) {\n    return appendShape(maps.renderer.drawCircle(options), element);\n}\n/**\n * Internal rendering of Rectangle\n * @private\n */\nexport function drawRectangle(maps, options, element) {\n    return appendShape(maps.renderer.drawRectangle(options), element);\n}\n/**\n * Internal rendering of Path\n * @private\n */\nexport function drawPath(maps, options, element) {\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Polygon\n * @private\n */\nexport function drawPolygon(maps, options, element) {\n    return appendShape(maps.renderer.drawPolygon(options), element);\n}\n/**\n * Internal rendering of Polyline\n * @private\n */\nexport function drawPolyline(maps, options, element) {\n    return appendShape(maps.renderer.drawPolyline(options), element);\n}\n/**\n * Internal rendering of Line\n * @private\n */\nexport function drawLine(maps, options, element) {\n    return appendShape(maps.renderer.drawLine(options), element);\n}\n/**\n * @private\n * Calculate marker shapes\n */\nexport function calculateShapes(maps, shape, options, size, location, markerEle) {\n    var tempGroup;\n    switch (shape) {\n        case 'Balloon':\n            tempGroup = drawBalloon(maps, options, size, location, markerEle);\n            break;\n        case 'Cross':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height\n                / 2) + ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n            break;\n        case 'Diamond':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' '\n                + location.y + ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2)\n                + ' ' + location.y + ' Z';\n            break;\n        case 'Star':\n            options.d = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2)\n                + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6)\n                + ' L ' + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' +\n                (location.y + size.height / 2) + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n            break;\n        case 'Triangle':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' +\n                (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 2) + ' Z';\n            break;\n        case 'HorizontalLine':\n            options.d = ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' '\n                + location.y;\n            break;\n        case 'VerticalLine':\n            options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' +\n                (location.y + size.height / 2);\n            break;\n        case 'InvertedTriangle':\n            options.d = 'M ' + (location.x - size.width / 2) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' +\n                (location.y - size.height / 2) + ' L ' + (location.x) + ' ' + (location.y + size.height / 2) + ' Z';\n            break;\n        case 'Pentagon':\n            var eq = 72;\n            var xValue = void 0;\n            var yValue = void 0;\n            for (var i = 0; i < 5; i++) {\n                xValue = (size.width / 2) * Math.cos((Math.PI / 180) * (i * eq));\n                yValue = (size.height / 2) * Math.sin((Math.PI / 180) * (i * eq));\n                options.d += (i == 0 ? 'M ' : 'L ') + (location.x + xValue) + ' ' + (location.y + yValue);\n            }\n            options.d += ' Z';\n            break;\n    }\n    if (shape === 'Cross' || shape === 'HorizontalLine' || shape === 'VerticalLine') {\n        options['stroke'] = (options['stroke'] === 'transparent') ? options['fill'] : options['stroke'];\n    }\n    return shape === 'Balloon' ? tempGroup : maps.renderer.drawPath(options);\n}\n/**\n * Internal rendering of Diamond\n * @private\n */\nexport function drawDiamond(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' + location.y +\n        ' L ' + location.x + ' ' + (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + location.y + ' Z';\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Triangle\n * @private\n */\nexport function drawTriangle(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + (location.x + size.width / 2) + ' ' +\n        (location.y + size.height / 2) + ' L ' + (location.x - size.width / 2) + ' ' + (location.y + size.height / 2) + ' Z';\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Cross\n * @private\n */\nexport function drawCross(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2) +\n        ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of HorizontalLine\n * @private\n */\nexport function drawHorizontalLine(maps, options, size, location, element) {\n    options.d = ' M ' + (location.x - size.width / 2) + ' ' + location.y + ' L ' + (location.x + size.width / 2) + ' ' + location.y;\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of VerticalLine\n * @private\n */\nexport function drawVerticalLine(maps, options, size, location, element) {\n    options.d = 'M ' + location.x + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2);\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Star\n * @private\n */\nexport function drawStar(maps, options, size, location, element) {\n    options.d = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2)\n        + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6) + ' L '\n        + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' + (location.y + size.height / 2)\n        + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n    return appendShape(maps.renderer.drawPath(options), element);\n}\n/**\n * Internal rendering of Balloon\n * @private\n */\nexport function drawBalloon(maps, options, size, location, element) {\n    var width = size.width;\n    var height = size.height;\n    location.x -= width / 2;\n    location.y -= height;\n    options.d = 'M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16' +\n        'c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z';\n    var balloon = maps.renderer.drawPath(options);\n    var x = size.width / 30;\n    var y = size.height / 30;\n    balloon.setAttribute('transform', 'translate(' + location.x + ', ' + location.y + ') scale(' + x + ', ' + y + ')');\n    var g = maps.renderer.createGroup({ id: options.id });\n    appendShape(balloon, g);\n    return appendShape(g, element);\n}\n/**\n * Internal rendering of Pattern\n * @private\n */\nexport function drawPattern(maps, options, elements, element) {\n    var pattern = maps.renderer.createPattern(options, 'pattern');\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var ele = elements_1[_i];\n        appendShape(ele, pattern);\n    }\n    return appendShape(pattern, element);\n}\n/**\n * Method to get specific field and vaues from data.\n * @private\n */\n// tslint:disable:no-any\nexport function getFieldData(dataSource, fields) {\n    var newData = [];\n    var data;\n    for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n        var temp = dataSource_1[_i];\n        data = {};\n        for (var _a = 0, fields_1 = fields; _a < fields_1.length; _a++) {\n            var field = fields_1[_a];\n            if (temp[field]) {\n                data[field] = temp[field];\n            }\n        }\n        newData.push(data);\n    }\n    return newData;\n}\n/**\n * To find the index of dataSource from shape properties\n */\n// tslint:disable:no-string-literal\nexport function checkShapeDataFields(dataSource, properties, dataPath, propertyPath, layer) {\n    if (!(isNullOrUndefined(properties))) {\n        for (var i = 0; i < dataSource.length; i++) {\n            var shapeDataPath = ((dataPath.indexOf('.') > -1) ? getValueFromObject(dataSource[i], dataPath) :\n                dataSource[i][dataPath]);\n            var shapePath = checkPropertyPath(shapeDataPath, propertyPath, properties);\n            var shapeDataPathValue = !isNullOrUndefined(shapeDataPath) && isNaN(properties[shapePath])\n                ? shapeDataPath.toLowerCase() : shapeDataPath;\n            var propertiesShapePathValue = !isNullOrUndefined(properties[shapePath]) && isNaN(properties[shapePath])\n                ? properties[shapePath].toLowerCase() : properties[shapePath];\n            if (shapeDataPathValue === propertiesShapePathValue) {\n                return i;\n            }\n        }\n    }\n    return null;\n}\nexport function checkPropertyPath(shapeData, shapePropertyPath, shape) {\n    if (!isNullOrUndefined(shapeData) && !isNullOrUndefined(shape)) {\n        if (!isNullOrUndefined(shapePropertyPath)) {\n            var length_1;\n            var properties = (Object.prototype.toString.call(shapePropertyPath) === '[object Array]' ?\n                shapePropertyPath : [shapePropertyPath]);\n            for (var i = 0; i < properties.length; i++) {\n                var shapeDataValue = !isNullOrUndefined(shapeData) ? shapeData.toLowerCase() : shapeData;\n                var shapePropertiesValue = !isNullOrUndefined(shape[properties[i]])\n                    && isNaN(shape[properties[i]])\n                    ? shape[properties[i]].toLowerCase() : shape[properties[i]];\n                if (shapeDataValue === shapePropertiesValue) {\n                    return properties[i];\n                }\n            }\n        }\n    }\n    return null;\n}\nexport function filter(points, start, end) {\n    var pointObject = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        if (start <= point.y && end >= point.y) {\n            pointObject.push(point);\n        }\n    }\n    return pointObject;\n}\nexport function getRatioOfBubble(min, max, value, minValue, maxValue) {\n    var percent = (100 / (maxValue - minValue)) * (value - minValue);\n    var bubbleRadius = (((max - min) / 100) * percent) + min;\n    if (maxValue === minValue) {\n        bubbleRadius = (((max - min) / 100)) + min;\n    }\n    return bubbleRadius;\n}\n/**\n * To find the midpoint of the polygon from points\n */\nexport function findMidPointOfPolygon(points, type) {\n    if (!points.length) {\n        return null;\n    }\n    var min = 0;\n    var max = points.length;\n    var startX;\n    var startY;\n    var startX1;\n    var startY1;\n    var sum = 0;\n    var xSum = 0;\n    var ySum = 0;\n    for (var i = min; i <= max - 1; i++) {\n        startX = points[i].x;\n        startY = type === 'Mercator' ? points[i].y : -(points[i].y);\n        if (i === max - 1) {\n            startX1 = points[0].x;\n            startY1 = type === 'Mercator' ? points[0].y : -(points[0].y);\n        }\n        else {\n            startX1 = points[i + 1].x;\n            startY1 = type === 'Mercator' ? points[i + 1].y : -(points[i + 1].y);\n        }\n        sum = sum + Math.abs(((startX * startY1)) - (startX1 * startY));\n        xSum = xSum + Math.abs(((startX + startX1) * (((startX * startY1) - (startX1 * startY)))));\n        ySum = ySum + Math.abs(((startY + startY1) * (((startX * startY1) - (startX1 * startY)))));\n    }\n    sum = 0.5 * sum;\n    xSum = (1 / (4 * sum)) * xSum;\n    ySum = (1 / (4 * sum)) * ySum;\n    /* Code for finding nearest points in polygon related to midPoint*/\n    var rightMinPoint = { x: 0, y: 0 };\n    var rightMaxPoint = { x: 0, y: 0 };\n    var leftMinPoint = { x: 0, y: 0 };\n    var leftMaxPoint = { x: 0, y: 0 };\n    var bottomMinPoint = { x: 0, y: 0 };\n    var bottomMaxPoint = { x: 0, y: 0 };\n    var topMinPoint = { x: 0, y: 0 };\n    var topMaxPoint = { x: 0, y: 0 };\n    var height = 0;\n    for (var i = min; i <= max - 1; i++) {\n        var point = points[i];\n        point.y = type === 'Mercator' ? point.y : -(point.y);\n        if (point.y > ySum) {\n            if (point.x < xSum && xSum - point.x < xSum - bottomMinPoint.x) {\n                bottomMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.x > xSum && (bottomMaxPoint.x === 0 || point.x - xSum < bottomMaxPoint.x - xSum)) {\n                bottomMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n        else {\n            if (point.x < xSum && xSum - point.x < xSum - topMinPoint.x) {\n                topMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.x > xSum && (topMaxPoint.x === 0 || point.x - xSum < topMaxPoint.x - xSum)) {\n                topMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n        height = (bottomMaxPoint.y - topMaxPoint.y) + ((bottomMaxPoint.y - topMaxPoint.y) / 4);\n        if (point.x > xSum) {\n            if (point.y < ySum && ySum - point.y < ySum - rightMinPoint.y) {\n                rightMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.y > ySum && (rightMaxPoint.y === 0 || point.y - ySum < rightMaxPoint.y - ySum)) {\n                rightMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n        else {\n            if (point.y < ySum && ySum - point.y < ySum - leftMinPoint.y) {\n                leftMinPoint = { x: point.x, y: point.y };\n            }\n            else if (point.y > ySum && (leftMaxPoint.y === 0 || point.y - ySum < leftMaxPoint.y - ySum)) {\n                leftMaxPoint = { x: point.x, y: point.y };\n            }\n        }\n    }\n    return {\n        x: xSum, y: ySum, rightMin: rightMinPoint, rightMax: rightMaxPoint,\n        leftMin: leftMinPoint, leftMax: leftMaxPoint, points: points, topMax: topMaxPoint, topMin: topMinPoint,\n        bottomMax: bottomMaxPoint, bottomMin: bottomMinPoint, height: height\n    };\n}\n/**\n * @private\n * Check custom path\n */\n/* tslint:disable:no-string-literal */\nexport function isCustomPath(layerData) {\n    var customPath = false;\n    if (Object.prototype.toString.call(layerData) === '[object Array]') {\n        Array.prototype.forEach.call(layerData, function (layer, index) {\n            if (!isNullOrUndefined(layer['geometry']) && layer['geometry']['type'] === 'Path') {\n                customPath = true;\n            }\n        });\n    }\n    return customPath;\n}\n/**\n * @private\n * Trim the title text\n */\nexport function textTrim(maxWidth, text, font) {\n    var label = text;\n    var size = measureText(text, font).width;\n    if (size > maxWidth) {\n        var textLength = text.length;\n        for (var i = textLength - 1; i >= 0; --i) {\n            label = text.substring(0, i) + '...';\n            size = measureText(label, font).width;\n            if (size <= maxWidth || label.length < 4) {\n                if (label.length < 4) {\n                    label = ' ';\n                }\n                return label;\n            }\n        }\n    }\n    return label;\n}\n/**\n * Method to calculate x position of title\n */\nexport function findPosition(location, alignment, textSize, type) {\n    var x;\n    var y;\n    switch (alignment) {\n        case 'Near':\n            x = location.x;\n            break;\n        case 'Center':\n            x = (type === 'title') ? (location.width / 2 - textSize.width / 2) :\n                ((location.x + (location.width / 2)) - textSize.width / 2);\n            break;\n        case 'Far':\n            x = (type === 'title') ? (location.width - location.y - textSize.width) :\n                ((location.x + location.width) - textSize.width);\n            break;\n    }\n    y = (type === 'title') ? location.y + (textSize.height / 2) : ((location.y + location.height / 2) + textSize.height / 2);\n    return new Point(x, y);\n}\n/**\n * To remove element by id\n */\nexport function removeElement(id) {\n    var element = document.getElementById(id);\n    return element ? remove(element) : null;\n}\n/**\n *  To calculate map center position from pixel values\n */\nexport function calculateCenterFromPixel(mapObject, layer) {\n    var point1 = convertGeoToPoint(mapObject.minLatOfGivenLocation, mapObject.minLongOfGivenLocation, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n    var point2 = convertGeoToPoint(mapObject.maxLatOfGivenLocation, mapObject.maxLongOfGivenLocation, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n    var x = (point1.x + point2.x) / 2;\n    var y = (point1.y + point2.y) / 2;\n    return new Point(x, y);\n}\n/**\n * @private\n */\nexport function getTranslate(mapObject, layer, animate) {\n    var zoomFactorValue = mapObject.zoomSettings.zoomFactor;\n    var scaleFactor;\n    var center = mapObject.centerPosition;\n    var centerLatitude = center.latitude;\n    var centerLongitude = center.longitude;\n    var checkMethodeZoom = !isNullOrUndefined(mapObject.centerLatOfGivenLocation) &&\n        !isNullOrUndefined(mapObject.centerLongOfGivenLocation) && mapObject.zoomNotApplied;\n    if (isNullOrUndefined(mapObject.mapScaleValue)) {\n        mapObject.mapScaleValue = zoomFactorValue;\n    }\n    if (mapObject.zoomSettings.shouldZoomInitially && mapObject.zoomSettings.enable) {\n        mapObject.mapScaleValue = scaleFactor = zoomFactorValue = ((mapObject.zoomSettings.shouldZoomInitially || mapObject.enablePersistence) && mapObject.scale == 1)\n            ? mapObject.scale : (isNullOrUndefined(mapObject.markerZoomFactor)) ? 1 : mapObject.markerZoomFactor;\n        if (mapObject.mapScaleValue !== mapObject.markerZoomFactor && !mapObject.enablePersistence) {\n            mapObject.mapScaleValue = zoomFactorValue = mapObject.markerZoomFactor;\n        }\n        if (!isNullOrUndefined(mapObject.markerCenterLatitude) && !isNullOrUndefined(mapObject.markerCenterLongitude)) {\n            centerLatitude = mapObject.markerCenterLatitude;\n            centerLongitude = mapObject.markerCenterLongitude;\n        }\n    }\n    if (checkMethodeZoom) {\n        mapObject.mapScaleValue = scaleFactor = zoomFactorValue = mapObject.scaleOfGivenLocation;\n    }\n    var min = mapObject.baseMapRectBounds['min'];\n    var max = mapObject.baseMapRectBounds['max'];\n    var zoomFactor = animate ? 1 : mapObject.mapScaleValue;\n    if (isNullOrUndefined(mapObject.currentShapeDataLength)) {\n        mapObject.currentShapeDataLength = !isNullOrUndefined(layer.shapeData[\"features\"])\n            ? layer.shapeData[\"features\"].length : layer.shapeData[\"geometries\"].length;\n    }\n    var size = (mapObject.totalRect && mapObject.legendSettings.visible) ? mapObject.totalRect : mapObject.mapAreaRect;\n    var availSize = mapObject.availableSize;\n    var x;\n    var y;\n    var mapWidth = Math.abs(max['x'] - min['x']);\n    var mapHeight = Math.abs(min['y'] - max['y']);\n    var factor = animate ? 1 : mapObject.markerZoomFactor === 1 ? mapObject.mapScaleValue : zoomFactorValue;\n    center = mapObject.zoomSettings.shouldZoomInitially\n        && mapObject.markerZoomedState && !mapObject.zoomPersistence ? mapObject.markerZoomCenterPoint :\n        mapObject.centerPosition;\n    if ((!isNullOrUndefined(centerLongitude) && !isNullOrUndefined(centerLatitude)) || checkMethodeZoom) {\n        var leftPosition = (((mapWidth + Math.abs(mapObject.mapAreaRect.width - mapWidth)) / 2) + mapObject.mapAreaRect.x) / factor;\n        var topPosition = (((mapHeight + Math.abs(mapObject.mapAreaRect.height - mapHeight)) / 2) + mapObject.mapAreaRect.y) / factor;\n        var point = checkMethodeZoom ? calculateCenterFromPixel(mapObject, layer) :\n            convertGeoToPoint(centerLatitude, centerLongitude, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n        if (isNullOrUndefined(mapObject.previousProjection) || mapObject.previousProjection !== mapObject.projectionType) {\n            x = -point.x + leftPosition;\n            y = -point.y + topPosition;\n            scaleFactor = zoomFactor;\n        }\n        else {\n            if (Math.floor(mapObject.scale) !== 1 && mapObject.zoomSettings.shouldZoomInitially || (mapObject.zoomNotApplied)) {\n                x = -point.x + leftPosition;\n                y = -point.y + topPosition;\n            }\n            else {\n                if (mapObject.zoomSettings.shouldZoomInitially || mapObject.zoomNotApplied) {\n                    x = -point.x + leftPosition;\n                    y = -point.y + topPosition;\n                    scaleFactor = zoomFactor;\n                }\n                else {\n                    x = mapObject.zoomTranslatePoint.x;\n                    y = mapObject.zoomTranslatePoint.y;\n                }\n            }\n            scaleFactor = mapObject.mapScaleValue;\n        }\n    }\n    else {\n        if (isNullOrUndefined(mapObject.previousProjection) || mapObject.previousProjection !== mapObject.projectionType) {\n            scaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n            mapWidth *= scaleFactor;\n            mapHeight *= scaleFactor;\n            var widthDiff = min['x'] !== 0 && mapObject.translateType === 'layers' ? availSize.width - size.width : 0;\n            x = size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2))) - widthDiff;\n            y = size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2)));\n            mapObject.previousTranslate = new Point(x, y);\n        }\n        else {\n            if (!mapObject.zoomSettings.shouldZoomInitially && mapObject.markerZoomFactor === 1 && mapObject.mapScaleValue === 1) {\n                scaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n                mapHeight *= scaleFactor;\n                mapWidth *= scaleFactor;\n                y = size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2)));\n                x = size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2)));\n            }\n            else {\n                scaleFactor = mapObject.mapScaleValue < 1 ? mapObject.mapScaleValue + 1 : mapObject.mapScaleValue;\n                mapObject.mapScaleValue = mapObject.zoomSettings.enable && mapObject.mapScaleValue !== 1 ? mapObject.mapScaleValue : 1;\n                if ((mapObject.currentShapeDataLength !== (!isNullOrUndefined(layer.shapeData[\"features\"])\n                    ? layer.shapeData[\"features\"].length : layer.shapeData[\"geometries\"].length)) && layer.type !== 'SubLayer') {\n                    var scale = parseFloat(Math.min(size.height / mapHeight, size.width / mapWidth).toFixed(2));\n                    mapHeight *= scale;\n                    mapWidth *= scale;\n                    y = size.y + ((-(min['y'])) + ((size.height / 2)\n                        - (mapHeight / 2)));\n                    scaleFactor = scale;\n                    x = size.x + ((-(min['x']))\n                        + ((size.width / 2) - (mapWidth / 2)));\n                }\n                else if (mapObject.availableSize.height !== mapObject.heightBeforeRefresh || mapObject.widthBeforeRefresh !== mapObject.availableSize.width) {\n                    var cscaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n                    var cmapWidth = mapWidth;\n                    cmapWidth *= cscaleFactor;\n                    var cmapHeight = mapHeight;\n                    cmapHeight *= cscaleFactor;\n                    var x1 = size.x + ((-(min['x'])) + ((size.width / 2) - (cmapWidth / 2)));\n                    var y1 = size.y + ((-(min['y'])) + ((size.height / 2) - (cmapHeight / 2)));\n                    var xdiff = (mapObject.translatePoint.x - mapObject.previousTranslate.x) / (mapObject.widthBeforeRefresh);\n                    var ydiff = (mapObject.translatePoint.y - mapObject.previousTranslate.y) / (mapObject.heightBeforeRefresh);\n                    var actxdiff = xdiff * (mapObject.availableSize.width);\n                    var actydiff = ydiff * (mapObject.availableSize.height);\n                    x = x1 + actxdiff;\n                    y = y1 + actydiff;\n                    mapObject.previousTranslate = new Point(x1, y1);\n                    mapObject.zoomTranslatePoint.x = x;\n                    mapObject.zoomTranslatePoint.y = y;\n                }\n                else {\n                    if (!isNullOrUndefined(mapObject.previousProjection) && mapObject.mapScaleValue === 1 && !mapObject.zoomModule.isDragZoom) {\n                        scaleFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n                        mapWidth *= scaleFactor;\n                        x = size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2)));\n                        mapHeight *= scaleFactor;\n                        y = size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2)));\n                    }\n                    else {\n                        x = mapObject.zoomTranslatePoint.x;\n                        y = mapObject.zoomTranslatePoint.y;\n                        scaleFactor = mapObject.scale;\n                    }\n                }\n            }\n        }\n    }\n    if (!isNullOrUndefined(mapObject.translatePoint)) {\n        x = (mapObject.enablePersistence && mapObject.translatePoint.x != 0 && !mapObject.zoomNotApplied) ? mapObject.translatePoint.x : x;\n        y = (mapObject.enablePersistence && mapObject.translatePoint.y != 0 && !mapObject.zoomNotApplied) ? mapObject.translatePoint.y : y;\n    }\n    scaleFactor = (mapObject.enablePersistence) ? ((mapObject.mapScaleValue >= 1) ? mapObject.mapScaleValue : 1) : scaleFactor;\n    mapObject.widthBeforeRefresh = mapObject.availableSize.width;\n    mapObject.heightBeforeRefresh = mapObject.availableSize.height;\n    return { scale: scaleFactor, location: new Point(x, y) };\n}\n/**\n * @private\n */\nexport function getZoomTranslate(mapObject, layer, animate) {\n    var zoomFactorValue = mapObject.zoomSettings.zoomFactor;\n    var scaleFactor;\n    var center = mapObject.centerPosition;\n    var latitude = center.latitude;\n    var longitude = center.longitude;\n    var checkZoomMethod = !isNullOrUndefined(mapObject.centerLongOfGivenLocation) &&\n        !isNullOrUndefined(mapObject.centerLatOfGivenLocation) && mapObject.zoomNotApplied;\n    if (isNullOrUndefined(mapObject.previousCenterLatitude) &&\n        isNullOrUndefined(mapObject.previousCenterLongitude)) {\n        mapObject.previousCenterLatitude = mapObject.centerPosition.latitude;\n        mapObject.previousCenterLongitude = mapObject.centerPosition.longitude;\n    }\n    else if (mapObject.previousCenterLatitude !==\n        mapObject.centerPosition.latitude && mapObject.previousCenterLongitude !==\n        mapObject.centerPosition.longitude) {\n        mapObject.centerPositionChanged = true;\n        mapObject.previousCenterLatitude = mapObject.centerPosition.latitude;\n        mapObject.previousCenterLongitude = mapObject.centerPosition.longitude;\n    }\n    else {\n        mapObject.centerPositionChanged = false;\n    }\n    if (isNullOrUndefined(mapObject.mapScaleValue) || (zoomFactorValue > mapObject.mapScaleValue)) {\n        if (mapObject.isReset && mapObject.mapScaleValue === 1) {\n            mapObject.mapScaleValue = mapObject.mapScaleValue;\n        }\n        else {\n            mapObject.mapScaleValue = zoomFactorValue;\n        }\n    }\n    mapObject.mapScaleValue = mapObject.zoomSettings.zoomFactor !== 1 &&\n        mapObject.zoomSettings.zoomFactor ===\n            mapObject.mapScaleValue ? mapObject.zoomSettings.zoomFactor :\n        mapObject.zoomSettings.zoomFactor !== mapObject.mapScaleValue && !mapObject.centerPositionChanged ? mapObject.mapScaleValue : mapObject.zoomSettings.zoomFactor;\n    if (mapObject.zoomSettings.shouldZoomInitially) {\n        mapObject.mapScaleValue = zoomFactorValue = scaleFactor = ((mapObject.enablePersistence || mapObject.zoomSettings.shouldZoomInitially) && mapObject.scale == 1)\n            ? mapObject.scale : (isNullOrUndefined(mapObject.markerZoomFactor)) ? mapObject.mapScaleValue : mapObject.markerZoomFactor;\n        zoomFactorValue = mapObject.mapScaleValue;\n        if (!isNullOrUndefined(mapObject.markerCenterLatitude) && !isNullOrUndefined(mapObject.markerCenterLongitude)) {\n            latitude = mapObject.markerCenterLatitude;\n            longitude = mapObject.markerCenterLongitude;\n        }\n    }\n    if (checkZoomMethod) {\n        mapObject.mapScaleValue = scaleFactor = zoomFactorValue = mapObject.scaleOfGivenLocation;\n    }\n    var zoomFactor = animate ? 1 : mapObject.mapScaleValue;\n    var size = mapObject.mapAreaRect;\n    var x;\n    var y;\n    var min = mapObject.baseMapRectBounds['min'];\n    var max = mapObject.baseMapRectBounds['max'];\n    var factor = animate ? 1 : mapObject.mapScaleValue;\n    var mapWidth = Math.abs(max['x'] - min['x']);\n    var mapHeight = Math.abs(min['y'] - max['y']);\n    if ((!isNullOrUndefined(longitude) && !isNullOrUndefined(latitude)) || checkZoomMethod) {\n        var topPosition = ((mapHeight + Math.abs(mapObject.mapAreaRect.height - mapHeight)) / 2) / factor;\n        var leftPosition = ((mapWidth + Math.abs(mapObject.mapAreaRect.width - mapWidth)) / 2) / factor;\n        var point = checkZoomMethod ? calculateCenterFromPixel(mapObject, layer) :\n            convertGeoToPoint(latitude, longitude, mapObject.mapLayerPanel.calculateFactor(layer), layer, mapObject);\n        if ((!isNullOrUndefined(mapObject.zoomTranslatePoint) || !isNullOrUndefined(mapObject.previousProjection)) && !mapObject.zoomNotApplied) {\n            if (mapObject.previousProjection !== mapObject.projectionType) {\n                x = -point.x + leftPosition;\n                y = -point.y + topPosition;\n            }\n            else {\n                x = mapObject.zoomTranslatePoint.x;\n                y = mapObject.zoomTranslatePoint.y;\n                zoomFactorValue = zoomFactor;\n            }\n        }\n        else {\n            x = -point.x + leftPosition + mapObject.mapAreaRect.x / zoomFactor;\n            y = -point.y + topPosition + mapObject.mapAreaRect.y / zoomFactor;\n        }\n        if (!isNullOrUndefined(mapObject.translatePoint)) {\n            y = (mapObject.enablePersistence && mapObject.translatePoint.y != 0 && !mapObject.zoomNotApplied) ? mapObject.translatePoint.y : y;\n            x = (mapObject.enablePersistence && mapObject.translatePoint.x != 0 && !mapObject.zoomNotApplied) ? mapObject.translatePoint.x : x;\n        }\n        scaleFactor = zoomFactorValue !== 0 ? zoomFactorValue : 1;\n    }\n    else {\n        var zoomFact = mapObject.zoomSettings.zoomFactor === 0 ? 1 : mapObject.zoomSettings.zoomFactor;\n        var maxZoomFact = 10;\n        zoomFact = zoomFact > maxZoomFact ? maxZoomFact : zoomFact;\n        scaleFactor = zoomFact;\n        var mapScale = mapObject.mapScaleValue === 0 ? 1 : mapObject.mapScaleValue > maxZoomFact\n            ? maxZoomFact : mapObject.mapScaleValue;\n        var leftPosition = (size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2))));\n        var topPosition = (size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2))));\n        if (!isNullOrUndefined(mapObject.zoomTranslatePoint) || !isNullOrUndefined(mapObject.previousProjection)) {\n            if (mapObject.previousProjection !== mapObject.projectionType) {\n                var previousPositions = [];\n                var previousPoints = { x: leftPosition, y: topPosition };\n                previousPositions.push(previousPoints);\n                for (var i = 1; i < maxZoomFact; i++) {\n                    var translatePointX = previousPositions[i - 1]['x'] - (((size.width / (i)) - (size.width / (i + 1))) / 2);\n                    var translatePointY = previousPositions[i - 1]['y'] - (((size.height / (i)) - (size.height / (i + 1))) / 2);\n                    previousPoints = { x: translatePointX, y: translatePointY };\n                    previousPositions.push(previousPoints);\n                }\n                leftPosition = previousPositions[zoomFact - 1]['x'];\n                topPosition = previousPositions[zoomFact - 1]['y'];\n            }\n            else {\n                leftPosition = mapObject.zoomTranslatePoint.x;\n                topPosition = mapObject.zoomTranslatePoint.y;\n                if (zoomFact !== mapScale) {\n                    scaleFactor = mapScale;\n                }\n            }\n        }\n        if (!isNullOrUndefined(mapObject.translatePoint)) {\n            x = (mapObject.enablePersistence && mapObject.translatePoint.x != 0 && !mapObject.zoomNotApplied) ? mapObject.translatePoint.x : leftPosition;\n            y = (mapObject.enablePersistence && mapObject.translatePoint.y != 0 && !mapObject.zoomNotApplied) ? mapObject.translatePoint.y : topPosition;\n        }\n    }\n    scaleFactor = (mapObject.enablePersistence) ? (mapObject.mapScaleValue == 0 ? 1 : mapObject.mapScaleValue) : scaleFactor;\n    return { scale: animate ? 1 : scaleFactor, location: new Point(x, y) };\n}\n/**\n * To get the html element by specified id\n */\nexport function fixInitialScaleForTile(map) {\n    map.tileZoomScale = map.tileZoomLevel = Math.floor(map.availableSize.height / 512) + 1;\n    var padding = map.layers[map.baseLayerIndex].layerType !== 'GoogleStaticMap' ?\n        20 : 0;\n    var totalSize = Math.pow(2, map.tileZoomLevel) * 256;\n    map.tileTranslatePoint.x = (map.availableSize.width / 2) - (totalSize / 2);\n    map.tileTranslatePoint.y = (map.availableSize.height / 2) - (totalSize / 2) + padding;\n    map.previousTileWidth = map.availableSize.width;\n    map.previousTileHeight = map.availableSize.height;\n}\n/**\n * To get the html element by specified id\n */\nexport function getElementByID(id) {\n    return document.getElementById(id);\n}\n/**\n * To apply internalization\n */\nexport function Internalize(maps, value) {\n    maps.formatFunction =\n        maps.intl.getNumberFormat({ format: maps.format, useGrouping: maps.useGroupingSeparator });\n    return maps.formatFunction(value);\n}\n/**\n * Function     to compile the template function for maps.\n * @returns Function\n * @private\n */\nexport function getTemplateFunction(template) {\n    var templateFn = null;\n    var e;\n    try {\n        if (document.querySelectorAll(template).length) {\n            templateFn = templateComplier(document.querySelector(template).innerHTML.trim());\n        }\n    }\n    catch (e) {\n        templateFn = templateComplier(template);\n    }\n    return templateFn;\n}\n/**\n * Function to get element from id.\n * @returns Element\n * @private\n */\nexport function getElement(id) {\n    return document.getElementById(id);\n}\n/**\n * Function to get shape data using target id\n */\nexport function getShapeData(targetId, map) {\n    var layerIndex = parseInt(targetId.split('_LayerIndex_')[1].split('_')[0], 10);\n    var shapeIndex = parseInt(targetId.split('_shapeIndex_')[1].split('_')[0], 10);\n    var layer = map.layersCollection[layerIndex];\n    var shapeData = layer.layerData[shapeIndex]['property'];\n    var data;\n    if (layer.dataSource) {\n        data = layer.dataSource[checkShapeDataFields(layer.dataSource, shapeData, layer.shapeDataPath, layer.shapePropertyPath, layer)];\n    }\n    return { shapeData: shapeData, data: data };\n}\n/**\n * Function to trigger shapeSelected event\n * @private\n */\nexport function triggerShapeEvent(targetId, selection, maps, eventName) {\n    var shape = getShapeData(targetId, maps);\n    var eventArgs = (selection.enableMultiSelect) ? {\n        cancel: false,\n        name: eventName,\n        fill: selection.fill,\n        opacity: selection.opacity,\n        border: selection.border,\n        shapeData: shape.shapeData,\n        data: shape.data,\n        target: targetId,\n        maps: maps,\n        shapeDataCollection: maps.shapeSelectionItem\n    } : {\n        cancel: false,\n        name: eventName,\n        fill: selection.fill,\n        opacity: selection.opacity,\n        border: selection.border,\n        shapeData: shape.shapeData,\n        data: shape.data,\n        target: targetId,\n        maps: maps\n    };\n    if (maps.isBlazor) {\n        var maps_2 = eventArgs.maps, shapeData = eventArgs.shapeData, blazorEventArgs = __rest(eventArgs, [\"maps\", \"shapeData\"]);\n        eventArgs = blazorEventArgs;\n    }\n    maps.trigger(eventName, eventArgs);\n    return eventArgs;\n}\n/**\n * Function to get elements using class name\n */\nexport function getElementsByClassName(className) {\n    return document.getElementsByClassName(className);\n}\n/**\n * Function to get elements using querySelectorAll\n */\n// export function querySelectorAll(args: string, element: Element): ArrayOf<Element> {\n//     return element.querySelectorAll('.' + args);\n// }\n/**\n * Function to get elements using querySelector\n */\nexport function querySelector(args, elementSelector) {\n    var targetEle = null;\n    if (document.getElementById(elementSelector)) {\n        targetEle = document.getElementById(elementSelector).querySelector('#' + args);\n    }\n    return targetEle;\n}\n/**\n * Function to get the element for selection and highlight using public method\n */\nexport function getTargetElement(layerIndex, name, enable, map) {\n    var shapeIndex;\n    var targetId;\n    var targetEle;\n    var shapeData = map.layers[layerIndex].shapeData['features'];\n    for (var i = 0; i < shapeData.length; i++) {\n        if (shapeData[i]['properties'].name === name) {\n            targetId = map.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_undefined';\n            break;\n        }\n    }\n    targetEle = getElement(targetId);\n    return targetEle;\n}\n/**\n * Function to create style element for highlight and selection\n */\nexport function createStyle(id, className, eventArgs) {\n    return createElement('style', {\n        id: id, innerHTML: '.' + className + '{fill:'\n            + eventArgs['fill'] + ';' + 'opacity:' + (eventArgs['opacity']).toString() + ';' +\n            'stroke-width:' + (eventArgs['border']['width']).toString() + ';' +\n            'stroke:' + eventArgs['border']['color'] + ';' + '}'\n    });\n}\n/**\n * Function to customize the style for highlight and selection\n */\nexport function customizeStyle(id, className, eventArgs) {\n    var styleEle = getElement(id);\n    styleEle.innerHTML = '.' + className + '{fill:'\n        + eventArgs['fill'] + ';' + 'opacity:' + (eventArgs['opacity']).toString() + ';' +\n        'stroke-width:' + (eventArgs['border']['width']).toString() + ';' +\n        'stroke:' + eventArgs['border']['color'] + '}';\n}\n/**\n * Function to trigger itemSelection event for legend selection and public method\n */\nexport function triggerItemSelectionEvent(selectionSettings, map, targetElement, shapeData, data) {\n    var border = {\n        color: selectionSettings.border.color,\n        width: selectionSettings.border.width / map.scale\n    };\n    var eventArgs = {\n        opacity: selectionSettings.opacity,\n        fill: selectionSettings.fill,\n        border: border,\n        name: itemSelection,\n        target: targetElement.id,\n        cancel: false,\n        shapeData: shapeData,\n        data: data,\n        maps: map\n    };\n    map.trigger('itemSelection', eventArgs, function (observedArgs) {\n        map.shapeSelectionItem.push(eventArgs.shapeData);\n        if (!getElement('ShapeselectionMap')) {\n            document.body.appendChild(createStyle('ShapeselectionMap', 'ShapeselectionMapStyle', eventArgs));\n        }\n        else {\n            customizeStyle('ShapeselectionMap', 'ShapeselectionMapStyle', eventArgs);\n        }\n    });\n}\n/**\n * Function to remove class from element\n */\nexport function removeClass(element) {\n    element.removeAttribute('class');\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\nexport function elementAnimate(element, delay, duration, point, maps, ele, radius) {\n    if (radius === void 0) { radius = 0; }\n    var centerX = point.x;\n    var centerY = point.y;\n    var height = 0;\n    var transform = element.getAttribute('transform') || '';\n    new Animation({}).animate(element, {\n        duration: duration,\n        delay: delay,\n        progress: function (args) {\n            if (args.timeStamp > args.delay) {\n                height = ((args.timeStamp - args.delay) / args.duration);\n                element.setAttribute('transform', 'translate( ' + (centerX - (radius * height)) + ' ' + (centerY - (radius * height)) +\n                    ' ) scale(' + height + ')');\n            }\n        },\n        end: function (model) {\n            element.setAttribute('transform', transform);\n            if (!ele) {\n                return;\n            }\n            var event = {\n                cancel: false, name: animationComplete, element: ele, maps: !maps.isBlazor ? maps : null\n            };\n            maps.trigger(animationComplete, event);\n        }\n    });\n}\nexport function timeout(id) {\n    removeElement(id);\n}\nexport function showTooltip(text, size, x, y, areaWidth, areaHeight, id, element, isTouch) {\n    var location = getMousePosition(x, y, element);\n    if (!isNullOrUndefined(location)) {\n        x = location.x;\n        y = location.y;\n    }\n    var tooltip = document.getElementById(id);\n    var width = measureText(text, {\n        fontFamily: 'Segoe UI', size: '8px',\n        fontStyle: 'Normal', fontWeight: 'Regular'\n    }).width;\n    var str = text.split(' ');\n    var demo = str[0].length;\n    for (var i = 1; i < str.length; i++) {\n        if (demo < str[i].length) {\n            demo = str[i].length;\n        }\n    }\n    if (!tooltip) {\n        tooltip = createElement('div', {\n            id: id,\n            styles: 'background-color: rgb(255, 255, 255) !important; color:black !important; ' +\n                'position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;' +\n                'font-size:12px; font-family: \"Segoe UI\"; text-align:center'\n        });\n    }\n    if (x < (areaWidth - width)) {\n        x = x;\n    }\n    else if (x > (areaWidth - width) && x < areaWidth - (demo * 8)) {\n        width = (areaWidth - x);\n    }\n    else if (x >= areaWidth - demo * 8) {\n        if (x > width) {\n            x = x - width;\n        }\n        else {\n            width = x;\n            x = 0;\n        }\n    }\n    var size1 = size.split('px');\n    wordWrap(tooltip, text, x, y, size1, width, areaWidth, element);\n    var height = tooltip.clientHeight;\n    if ((height + parseInt(size1[0], 10) * 2) > areaHeight) {\n        width = x;\n        x = 0;\n    }\n    wordWrap(tooltip, text, x, y, size1, width, areaWidth, element);\n    if (isTouch) {\n        setTimeout(timeout, 5000, id);\n    }\n}\nexport function wordWrap(tooltip, text, x, y, size1, width, areaWidth, element) {\n    tooltip.innerHTML = text;\n    tooltip.style.top = tooltip.id.indexOf('_Legend') !== -1 ?\n        (parseInt(size1[0], 10) + y).toString() + 'px' : (parseInt(size1[0], 10) * 2).toString() + 'px';\n    tooltip.style.left = (x).toString() + 'px';\n    tooltip.style.width = width.toString() + 'px';\n    tooltip.style.maxWidth = (areaWidth).toString() + 'px';\n    tooltip.style.wordWrap = 'break-word';\n    element.appendChild(tooltip);\n}\n// /**\n//  *\n//  * @param touchList\n//  * @param e\n//  * @param touches\n//  */\n// export function addTouchPointer(touchList: ITouches[], e: PointerEvent, touches: TouchList): ITouches[] {\n//     if (touches) {\n//         touchList = [];\n//         for (let i: number = 0, length: number = touches.length; i < length; i++) {\n//             touchList.push({ pageX: touches[i].clientX, pageY: touches[i].clientY, pointerId: null });\n//         }\n//     } else {\n//         touchList = touchList ? touchList : [];\n//         if (touchList.length === 0) {\n//             touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n//         } else {\n//             for (let i: number = 0, length: number = touchList.length; i < length; i++) {\n//                 if (touchList[i].pointerId === e.pointerId) {\n//                     touchList[i] = { pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId };\n//                 } else {\n//                     touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n//                 }\n//             }\n//         }\n//     }\n//     return touchList;\n// }\n/** @private */\nexport function createTooltip(id, text, top, left, fontSize) {\n    var tooltip = getElement(id);\n    var style = 'top:' + top.toString() + 'px;' +\n        'left:' + left.toString() + 'px;' +\n        'color: #000000; ' +\n        'background:' + '#FFFFFF' + ';' +\n        'position:absolute;border:1px solid #707070;font-size:' + fontSize + ';border-radius:2px;';\n    if (!tooltip) {\n        tooltip = createElement('div', {\n            id: id, innerHTML: '&nbsp;' + text + '&nbsp;', styles: style\n        });\n        document.body.appendChild(tooltip);\n    }\n    else {\n        tooltip.setAttribute('innerHTML', '&nbsp;' + text + '&nbsp;');\n        tooltip.setAttribute('styles', style);\n    }\n}\n/** @private */\nexport function drawSymbol(location, shape, size, url, options) {\n    var functionName = 'Path';\n    var renderer = new SvgRenderer('');\n    var temp = renderLegendShape(location, size, shape, options, url);\n    var htmlObject = renderer['draw' + temp.functionName](temp.renderOption);\n    return htmlObject;\n}\n/** @private */\nexport function renderLegendShape(location, size, shape, options, url) {\n    var renderPath;\n    var functionName = 'Path';\n    var shapeWidth = size.width;\n    var shapeHeight = size.height;\n    var shapeX = location.x;\n    var shapeY = location.y;\n    var x = location.x + (-shapeWidth / 2);\n    var y = location.y + (-shapeHeight / 2);\n    switch (shape) {\n        case 'Circle':\n        case 'Bubble':\n            functionName = 'Ellipse';\n            merge(options, { 'rx': shapeWidth / 2, 'ry': shapeHeight / 2, 'cx': shapeX, 'cy': shapeY });\n            break;\n        case 'VerticalLine':\n            renderPath = 'M' + ' ' + shapeX + ' ' + (shapeY + (shapeHeight / 2)) + ' ' + 'L' + ' ' + shapeX + ' '\n                + (shapeY + (-shapeHeight / 2));\n            merge(options, { 'd': renderPath });\n            break;\n        case 'Diamond':\n            renderPath = 'M' + ' ' + x + ' ' + shapeY + ' ' +\n                'L' + ' ' + shapeX + ' ' + (shapeY + (-shapeHeight / 2)) + ' ' +\n                'L' + ' ' + (shapeX + (shapeWidth / 2)) + ' ' + shapeY + ' ' +\n                'L' + ' ' + shapeX + ' ' + (shapeY + (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + shapeY + ' z';\n            merge(options, { 'd': renderPath });\n            break;\n        case 'Rectangle':\n            renderPath = 'M' + ' ' + x + ' ' + (shapeY + (-shapeHeight / 2)) + ' ' +\n                'L' + ' ' + (shapeX + (shapeWidth / 2)) + ' ' + (shapeY + (-shapeHeight / 2)) + ' ' +\n                'L' + ' ' + (shapeX + (shapeWidth / 2)) + ' ' + (shapeY + (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + (shapeY + (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + (shapeY + (-shapeHeight / 2)) + ' z';\n            merge(options, { 'd': renderPath });\n            break;\n        case 'Triangle':\n            renderPath = 'M' + ' ' + x + ' ' + (shapeY + (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + shapeX + ' ' + (shapeY + (-shapeHeight / 2)) + ' ' +\n                'L' + ' ' + (shapeX + (shapeWidth / 2)) + ' ' + (shapeY + (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + x + ' ' + (shapeY + (shapeHeight / 2)) + ' z';\n            merge(options, { 'd': renderPath });\n            break;\n        case 'InvertedTriangle':\n            renderPath = 'M' + ' ' + (shapeX + (shapeWidth / 2)) + ' ' + (shapeY - (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + shapeX + ' ' + (shapeY + (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + (shapeX - (shapeWidth / 2)) + ' ' + (shapeY - (shapeHeight / 2)) + ' ' +\n                'L' + ' ' + (shapeX + (shapeWidth / 2)) + ' ' + (shapeY - (shapeHeight / 2)) + ' z';\n            merge(options, { 'd': renderPath });\n            break;\n        case 'Pentagon':\n            var eq = 72;\n            var xValue = void 0;\n            var yValue = void 0;\n            for (var i = 0; i <= 5; i++) {\n                xValue = (shapeWidth / 2) * Math.cos((Math.PI / 180) * (i * eq));\n                yValue = (shapeWidth / 2) * Math.sin((Math.PI / 180) * (i * eq));\n                if (i === 0) {\n                    renderPath = 'M' + ' ' + (shapeX + xValue) + ' ' + (shapeY + yValue) + ' ';\n                }\n                else {\n                    renderPath = renderPath.concat('L' + ' ' + (shapeX + xValue) + ' ' + (shapeY + yValue) + ' ');\n                }\n            }\n            renderPath = renderPath.concat('Z');\n            merge(options, { 'd': renderPath });\n            break;\n        case 'Star':\n            renderPath = 'M ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + (location.x - size.width / 2)\n                + ' ' + (location.y + size.height / 6) + ' L ' + (location.x + size.width / 2) + ' ' + (location.y + size.height / 6)\n                + ' L ' + (location.x - size.width / 3) + ' ' + (location.y - size.height / 2) + ' L ' + location.x + ' ' +\n                (location.y + size.height / 2) + ' L ' + (location.x + size.width / 3) + ' ' + (location.y - size.height / 2) + ' Z';\n            merge(options, { 'd': renderPath });\n            break;\n        case 'Cross':\n            renderPath = 'M' + ' ' + x + ' ' + shapeY + ' ' + 'L' + ' ' + (shapeX + (shapeWidth / 2)) + ' ' + shapeY + ' ' +\n                'M' + ' ' + shapeX + ' ' + (shapeY + (shapeHeight / 2)) + ' ' + 'L' + ' ' + shapeX + ' ' +\n                (shapeY + (-shapeHeight / 2));\n            merge(options, { 'd': renderPath });\n            break;\n        case 'Image':\n            functionName = 'Image';\n            merge(options, { 'href': url, 'height': shapeHeight, 'width': shapeWidth, x: x, y: y });\n            break;\n    }\n    return { renderOption: options, functionName: functionName };\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\n// export function markerTemplateAnimate(element: Element, delay: number, duration: number, point: MapLocation): void {\n//     let delta: number = 0;\n//     let top: string = (element as HTMLElement).style.top;\n//     let y: number = parseInt(top, 10);\n//     new Animation({}).animate(<HTMLElement>element, {\n//         duration: duration,\n//         delay: delay,\n//         progress: (args: AnimationOptions): void => {\n//             if (args.timeStamp > args.delay) {\n//                 delta = ((args.timeStamp - args.delay) / args.duration);\n//                 (element as HTMLElement).style.top = y - 100 + (delta * 100) + 'px';\n//             }\n//         },\n//         end: (model: AnimationOptions) => {\n//             (element as HTMLElement).style.top = top;\n//         }\n//     });\n// }\n/** @private */\nexport function getElementOffset(childElement, parentElement) {\n    var width;\n    var height;\n    parentElement.appendChild(childElement);\n    width = childElement.offsetWidth;\n    height = childElement.offsetHeight;\n    parentElement.removeChild(childElement);\n    return new Size(width, height);\n}\n/** @private */\nexport function changeBorderWidth(element, index, scale, maps) {\n    var childNode;\n    for (var l = 0; l < element.childElementCount; l++) {\n        childNode = element.childNodes[l];\n        if (childNode.id.indexOf('_NavigationGroup') > -1) {\n            changeNavaigationLineWidth(childNode, index, scale, maps);\n        }\n        else {\n            var currentStroke = (maps.layersCollection[index].shapeSettings.border.width);\n            childNode.setAttribute('stroke-width', (currentStroke / scale).toString());\n        }\n    }\n}\n/** @private */\nexport function changeNavaigationLineWidth(element, index, scale, maps) {\n    var node;\n    for (var m = 0; m < element.childElementCount; m++) {\n        node = element.childNodes[m];\n        if (node.tagName === 'path') {\n            var currentStroke = (maps.layersCollection[index]\n                .navigationLineSettings[parseFloat(node.id.split('_NavigationIndex_')[1].split('_')[0])].width);\n            node.setAttribute('stroke-width', (currentStroke / scale).toString());\n        }\n    }\n}\n// /** Pinch zoom helper methods */\n/** @private */\nexport function targetTouches(event) {\n    var targetTouches = [];\n    var touches = event.touches;\n    for (var i = 0; i < touches.length; i++) {\n        targetTouches.push({ pageX: touches[i].pageX, pageY: touches[i].pageY });\n    }\n    return targetTouches;\n}\n/** @private */\nexport function calculateScale(startTouches, endTouches) {\n    var startDistance = getDistance(startTouches[0], startTouches[1]);\n    var endDistance = getDistance(endTouches[0], endTouches[1]);\n    return (endDistance / startDistance);\n}\n/** @private */\nexport function getDistance(a, b) {\n    var x = a.pageX - b.pageX;\n    var y = a.pageY - b.pageY;\n    return Math.sqrt(x * x + y * y);\n}\n/** @private */\nexport function getTouches(touches, maps) {\n    var rect = maps.element.getBoundingClientRect();\n    var posTop = rect.top + document.defaultView.pageXOffset;\n    var posLeft = rect.left + document.defaultView.pageYOffset;\n    return Array.prototype.slice.call(touches).map(function (touch) {\n        return {\n            x: touch.pageX - posLeft,\n            y: touch.pageY - posTop,\n        };\n    });\n}\n/** @private */\nexport function getTouchCenter(touches) {\n    return {\n        x: touches.map(function (e) { return e['x']; }).reduce(sum) / touches.length,\n        y: touches.map(function (e) { return e['y']; }).reduce(sum) / touches.length\n    };\n}\n/** @private */\nexport function sum(a, b) {\n    return a + b;\n}\n/**\n * Animation Effect Calculation End\n * @private\n */\nexport function zoomAnimate(element, delay, duration, point, scale, size, maps) {\n    var delta = 0;\n    var previousLocation = maps.previousPoint;\n    var preScale = maps.previousScale;\n    var diffScale = scale - preScale;\n    var currentLocation = new MapLocation(0, 0);\n    var currentScale = 1;\n    if (scale === preScale) {\n        element.setAttribute('transform', 'scale( ' + (scale) + ' ) translate( ' + point.x + ' ' + point.y + ' )');\n        return;\n    }\n    var slope = function (previousLocation, point) {\n        if (previousLocation.x === point.x) {\n            return null;\n        }\n        return (point.y - previousLocation.y) / (point.x - previousLocation.x);\n    };\n    var intercept = function (point, slopeValue) {\n        if (slopeValue === null) {\n            return point.x;\n        }\n        return point.y - slopeValue * point.x;\n    };\n    var slopeFactor = slope(previousLocation, point);\n    var slopeIntersection = intercept(previousLocation, slopeFactor);\n    var horizontalDifference = point.x - previousLocation.x;\n    var verticalDifference = point.y - previousLocation.y;\n    animate(element, delay, duration, function (args) {\n        if (args.timeStamp > args.delay) {\n            delta = ((args.timeStamp - args.delay) / args.duration);\n            currentScale = preScale + (delta * diffScale);\n            currentLocation.x = previousLocation.x + (delta * horizontalDifference) / (currentScale / scale);\n            if (slopeFactor == null) {\n                currentLocation.y = previousLocation.y + (delta * verticalDifference);\n            }\n            else {\n                currentLocation.y = ((slopeFactor * currentLocation.x) + slopeIntersection);\n            }\n            args.element.setAttribute('transform', 'scale( ' + currentScale + ' ) ' +\n                'translate( ' + currentLocation.x + ' ' + currentLocation.y + ' )');\n            maps.translatePoint = currentLocation;\n            maps.scale = currentScale;\n            maps.zoomModule.processTemplate(point.x, point.y, currentScale, maps);\n        }\n    }, function () {\n        maps.translatePoint = point;\n        maps.scale = scale;\n        element.setAttribute('transform', 'scale( ' + (scale) + ' ) translate( ' + point.x + ' ' + point.y + ' )');\n        maps.zoomModule.processTemplate(point.x, point.y, scale, maps);\n    });\n}\n/**\n * To process custom animation\n */\nexport function animate(element, delay, duration, process, end) {\n    var _this = this;\n    var start = null;\n    var clearAnimation;\n    var markerStyle = 'visibility:visible';\n    var startAnimation = function (timestamp) {\n        if (!start) {\n            start = timestamp;\n        }\n        var progress = timestamp - start;\n        if (progress < duration) {\n            process.call(_this, { element: element, delay: 0, timeStamp: progress, duration: duration });\n            window.requestAnimationFrame(startAnimation);\n        }\n        else {\n            window.cancelAnimationFrame(clearAnimation);\n            end.call(_this, { element: element });\n            element.setAttribute('style', markerStyle);\n        }\n    };\n    clearAnimation = window.requestAnimationFrame(startAnimation);\n}\n/**\n * To get shape data file using Ajax.\n */\nvar MapAjax = /** @class */ (function () {\n    function MapAjax(options, type, async, contentType, sendData) {\n        this.dataOptions = options;\n        this.type = type || 'GET';\n        this.async = async || true;\n        this.contentType = contentType;\n        this.sendData = sendData;\n    }\n    return MapAjax;\n}());\nexport { MapAjax };\n/**\n * Animation Translate\n * @private\n */\nexport function smoothTranslate(element, delay, duration, point) {\n    var delta = 0;\n    var transform = element.getAttribute('transform').split(' ');\n    if (transform.length === 2) {\n        transform[2] = transform[1].split(')')[0];\n        transform[1] = transform[0].split('(')[1];\n    }\n    var previousLocation = new MapLocation(parseInt(transform[1], 10), parseInt(transform[2], 10));\n    var diffx = point.x - previousLocation.x;\n    var diffy = point.y - previousLocation.y;\n    var currentLocation = new MapLocation(0, 0);\n    animate(element, delay, duration, function (args) {\n        if (args.timeStamp > args.delay) {\n            delta = ((args.timeStamp - args.delay) / args.duration);\n            currentLocation.x = previousLocation.x + (delta * diffx);\n            currentLocation.y = previousLocation.y + (delta * diffy);\n            args.element.setAttribute('transform', 'translate( ' + currentLocation.x + ' ' + currentLocation.y + ' )');\n        }\n    }, function () {\n        element.setAttribute('transform', 'translate( ' + point.x + ' ' + point.y + ' )');\n    });\n}\n/**\n * To find compare should zoom factor with previous factor and current factor\n */\nexport function compareZoomFactor(scaleFactor, maps) {\n    var previous = isNullOrUndefined(maps.shouldZoomPreviousFactor) ?\n        null : maps.shouldZoomPreviousFactor;\n    var current = isNullOrUndefined(maps.shouldZoomCurrentFactor) ?\n        null : maps.shouldZoomCurrentFactor;\n    if (!isNullOrUndefined(current)) {\n        maps.shouldZoomCurrentFactor = null;\n        maps.shouldZoomPreviousFactor = null;\n    }\n    else if (!isNullOrUndefined(previous)\n        && isNullOrUndefined(current)\n        && maps.shouldZoomPreviousFactor !== scaleFactor) {\n        maps.shouldZoomCurrentFactor = scaleFactor;\n    }\n    else {\n        maps.shouldZoomPreviousFactor = scaleFactor;\n    }\n}\n/**\n * To find zoom level for the min and max latitude values\n */\nexport function calculateZoomLevel(minLat, maxLat, minLong, maxLong, mapWidth, mapHeight, maps) {\n    var latRatio;\n    var lngRatio;\n    var scaleFactor;\n    var maxZoomFact = 10;\n    var applyMethodeZoom;\n    var latZoom;\n    var lngZoom;\n    var result;\n    var maxLatSin = Math.sin(maxLat * Math.PI / 180);\n    var maxLatRad = Math.log((1 + maxLatSin) / (1 - maxLatSin)) / 2;\n    var maxLatValue = Math.max(Math.min(maxLatRad, Math.PI), -Math.PI) / 2;\n    var minLatSin = Math.sin(minLat * Math.PI / 180);\n    var minLatRad = Math.log((1 + minLatSin) / (1 - minLatSin)) / 2;\n    var minLatValue = Math.max(Math.min(minLatRad, Math.PI), -Math.PI) / 2;\n    if (maps.zoomNotApplied && !maps.isTileMap) {\n        var latiRatio = Math.abs((maps.baseMapBounds.latitude.max - maps.baseMapBounds.latitude.min) / (maxLat - minLat));\n        var longiRatio = Math.abs((maps.baseMapBounds.longitude.max - maps.baseMapBounds.longitude.min) / (maxLong - minLong));\n        applyMethodeZoom = Math.min(latiRatio, longiRatio);\n        var minLocation = convertGeoToPoint(minLat, minLong, 1, maps.layersCollection[0], maps);\n        var maxLocation = convertGeoToPoint(maxLat, maxLong, 1, maps.layersCollection[0], maps);\n    }\n    latRatio = (maxLatValue - minLatValue) / Math.PI;\n    var lngDiff = maxLong - minLong;\n    lngRatio = ((lngDiff < 0) ? (lngDiff + 360) : lngDiff) / 360;\n    var WORLD_PX_HEIGHT = 256;\n    var WORLD_PX_WIDTH = 256;\n    latZoom = (Math.log(mapHeight / WORLD_PX_HEIGHT / latRatio) / Math.LN2);\n    lngZoom = (Math.log(mapWidth / WORLD_PX_WIDTH / lngRatio) / Math.LN2);\n    result = (maps.zoomNotApplied && !maps.isTileMap) ? applyMethodeZoom : Math.min(latZoom, lngZoom);\n    scaleFactor = Math.min(result, maxZoomFact);\n    scaleFactor = maps.isTileMap || !maps.zoomNotApplied ? Math.floor(scaleFactor) : scaleFactor;\n    if (!maps.isTileMap) {\n        compareZoomFactor(scaleFactor, maps);\n    }\n    return scaleFactor;\n}\n// tslint:disable:no-any\nexport function processResult(e) {\n    var dataValue;\n    var resultValue = !isNullOrUndefined(e['result']) ? e['result'] : e['actual'];\n    if (isNullOrUndefined(resultValue.length)) {\n        if (!isNullOrUndefined(resultValue['Items'])) {\n            dataValue = resultValue['Items'];\n        }\n    }\n    else {\n        dataValue = resultValue;\n    }\n    return dataValue;\n}\n"]},"metadata":{},"sourceType":"module"}