{"ast":null,"code":"import { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PdfPageOrientation, PdfDocument, PdfBitmap } from '@syncfusion/ej2-pdf-export';\n/**\n * This module enables the export to PDF functionality in Maps control.\n * @hidden\n */\n\nvar PdfExport =\n/** @class */\nfunction () {\n  /**\n   * Constructor for Maps\n   * @param control\n   */\n  function PdfExport(control) {\n    this.control = control;\n  }\n  /**\n   * To export the file as image/svg format\n   * @param type\n   * @param fileName\n   * @private\n   */\n\n\n  PdfExport.prototype.export = function (type, fileName, allowDownload, orientation) {\n    var _this = this; // tslint:disable-next-line:max-func-body-length\n\n\n    var promise = new Promise(function (resolve, reject) {\n      var canvasElement = createElement('canvas', {\n        id: 'ej2-canvas',\n        attrs: {\n          'width': _this.control.availableSize.width.toString(),\n          'height': _this.control.availableSize.height.toString()\n        }\n      });\n      orientation = isNullOrUndefined(orientation) ? PdfPageOrientation.Landscape : orientation;\n      var svgParent = document.getElementById(_this.control.element.id + '_Tile_SVG_Parent');\n      var svgData;\n      var url = window.URL.createObjectURL(new Blob(type === 'SVG' ? [svgData] : [new XMLSerializer().serializeToString(_this.control.svgObject)], {\n        type: 'image/svg+xml'\n      }));\n      var pdfDocument = new PdfDocument();\n      var image = new Image();\n      var ctx = canvasElement.getContext('2d');\n\n      if (!_this.control.isTileMap) {\n        image.onload = function () {\n          ctx.drawImage(image, 0, 0);\n          window.URL.revokeObjectURL(url);\n\n          if (type === 'PDF') {\n            var imageString = canvasElement.toDataURL('image/jpeg').replace('image/jpeg', 'image/octet-stream');\n            pdfDocument.pageSettings.orientation = orientation;\n            imageString = imageString.slice(imageString.indexOf(',') + 1);\n            pdfDocument.pages.add().graphics.drawImage(new PdfBitmap(imageString), 0, 0, _this.control.availableSize.width - 60, _this.control.availableSize.height);\n\n            if (allowDownload) {\n              pdfDocument.save(fileName + '.pdf');\n              pdfDocument.destroy();\n            } else {\n              resolve(null);\n            }\n          }\n        };\n\n        image.src = url;\n      } else {\n        var xHttp = new XMLHttpRequest();\n        var tileLength_1 = _this.control.mapLayerPanel.tiles.length;\n\n        var _loop_1 = function (i) {\n          var tile = document.getElementById('tile_' + (i - 1));\n          var tileImg = new Image();\n          tileImg.crossOrigin = 'Anonymous';\n          ctx.fillStyle = _this.control.background ? _this.control.background : '#FFFFFF';\n          ctx.fillRect(0, 0, _this.control.availableSize.width, _this.control.availableSize.height);\n          ctx.font = _this.control.titleSettings.textStyle.size + ' Arial';\n          ctx.fillStyle = document.getElementById(_this.control.element.id + '_Map_title').getAttribute('fill');\n          ctx.fillText(_this.control.titleSettings.text, parseFloat(document.getElementById(_this.control.element.id + '_Map_title').getAttribute('x')), parseFloat(document.getElementById(_this.control.element.id + '_Map_title').getAttribute('y')));\n\n          tileImg.onload = function () {\n            if (i === 0 || i === tileLength_1 + 1) {\n              if (i === 0) {\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                ctx.rect(0, parseFloat(svgParent.style.top), parseFloat(svgParent.style.width), parseFloat(svgParent.style.height));\n                ctx.clip();\n              } else {\n                ctx.setTransform(1, 0, 0, 1, parseFloat(svgParent.style.left), parseFloat(svgParent.style.top));\n              }\n            } else {\n              ctx.setTransform(1, 0, 0, 1, parseFloat(tile.style.left) + 10, parseFloat(tile.style.top) + parseFloat(document.getElementById(_this.control.element.id + '_tile_parent').style.top));\n            }\n\n            ctx.drawImage(tileImg, 0, 0);\n\n            if (i === tileLength_1 + 1) {\n              if (type === 'PDF') {\n                localStorage.setItem('saved-image-example', canvasElement.toDataURL('image/jpeg'));\n                var x = localStorage.getItem('saved-image-example');\n                pdfDocument.pageSettings.orientation = orientation;\n                x = x.slice(x.indexOf(',') + 1);\n                pdfDocument.pages.add().graphics.drawImage(new PdfBitmap(x), 0, 0, _this.control.availableSize.width - 60, _this.control.availableSize.height);\n\n                if (allowDownload) {\n                  pdfDocument.save(fileName + '.pdf');\n                  pdfDocument.destroy();\n                } else {\n                  resolve(null);\n                }\n              }\n            }\n          };\n\n          if (i === 0 || i === tileLength_1 + 1) {\n            if (i === 0) {\n              tileImg.src = url;\n            } else {\n              setTimeout(function () {\n                tileImg.src = window.URL.createObjectURL(new Blob([new XMLSerializer().serializeToString(document.getElementById(_this.control.element.id + '_Tile_SVG'))], {\n                  type: 'image/svg+xml'\n                })); // tslint:disable-next-line:align\n              }, 300);\n            }\n          } else {\n            xHttp.open('GET', tile.children[0].getAttribute('src'), true);\n            xHttp.send();\n            tileImg.src = tile.children[0].getAttribute('src');\n          }\n        };\n\n        for (var i = 0; i <= tileLength_1 + 1; i++) {\n          _loop_1(i);\n        }\n      }\n    });\n    return promise;\n  };\n  /**\n   * Get module name.\n   */\n\n\n  PdfExport.prototype.getModuleName = function () {\n    return 'PdfExport';\n  };\n  /**\n   * To destroy the PdfExports.\n   * @return {void}\n   * @private\n   */\n\n\n  PdfExport.prototype.destroy = function (maps) {\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return PdfExport;\n}();\n\nexport { PdfExport };","map":{"version":3,"sources":["/Users/kristalduran/Desktop/PC3-/PC3 Mapa/pc3-mapa/node_modules/@syncfusion/ej2-maps/src/maps/model/export-pdf.js"],"names":["createElement","isNullOrUndefined","PdfPageOrientation","PdfDocument","PdfBitmap","PdfExport","control","prototype","export","type","fileName","allowDownload","orientation","_this","promise","Promise","resolve","reject","canvasElement","id","attrs","availableSize","width","toString","height","Landscape","svgParent","document","getElementById","element","svgData","url","window","URL","createObjectURL","Blob","XMLSerializer","serializeToString","svgObject","pdfDocument","image","Image","ctx","getContext","isTileMap","onload","drawImage","revokeObjectURL","imageString","toDataURL","replace","pageSettings","slice","indexOf","pages","add","graphics","save","destroy","src","xHttp","XMLHttpRequest","tileLength_1","mapLayerPanel","tiles","length","_loop_1","i","tile","tileImg","crossOrigin","fillStyle","background","fillRect","font","titleSettings","textStyle","size","getAttribute","fillText","text","parseFloat","setTransform","rect","style","top","clip","left","localStorage","setItem","x","getItem","setTimeout","open","children","send","getModuleName","maps"],"mappings":"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","sourcesContent":["import { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PdfPageOrientation, PdfDocument, PdfBitmap } from '@syncfusion/ej2-pdf-export';\n/**\n * This module enables the export to PDF functionality in Maps control.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for Maps\n     * @param control\n     */\n    function PdfExport(control) {\n        this.control = control;\n    }\n    /**\n     * To export the file as image/svg format\n     * @param type\n     * @param fileName\n     * @private\n     */\n    PdfExport.prototype.export = function (type, fileName, allowDownload, orientation) {\n        var _this = this;\n        // tslint:disable-next-line:max-func-body-length\n        var promise = new Promise(function (resolve, reject) {\n            var canvasElement = createElement('canvas', {\n                id: 'ej2-canvas',\n                attrs: {\n                    'width': _this.control.availableSize.width.toString(),\n                    'height': _this.control.availableSize.height.toString()\n                }\n            });\n            orientation = isNullOrUndefined(orientation) ? PdfPageOrientation.Landscape : orientation;\n            var svgParent = document.getElementById(_this.control.element.id + '_Tile_SVG_Parent');\n            var svgData;\n            var url = window.URL.createObjectURL(new Blob(type === 'SVG' ? [svgData] :\n                [(new XMLSerializer()).serializeToString(_this.control.svgObject)], { type: 'image/svg+xml' }));\n            var pdfDocument = new PdfDocument();\n            var image = new Image();\n            var ctx = canvasElement.getContext('2d');\n            if (!_this.control.isTileMap) {\n                image.onload = (function () {\n                    ctx.drawImage(image, 0, 0);\n                    window.URL.revokeObjectURL(url);\n                    if (type === 'PDF') {\n                        var imageString = canvasElement.toDataURL('image/jpeg').replace('image/jpeg', 'image/octet-stream');\n                        pdfDocument.pageSettings.orientation = orientation;\n                        imageString = imageString.slice(imageString.indexOf(',') + 1);\n                        pdfDocument.pages.add().graphics.drawImage(new PdfBitmap(imageString), 0, 0, (_this.control.availableSize.width - 60), _this.control.availableSize.height);\n                        if (allowDownload) {\n                            pdfDocument.save(fileName + '.pdf');\n                            pdfDocument.destroy();\n                        }\n                        else {\n                            resolve(null);\n                        }\n                    }\n                });\n                image.src = url;\n            }\n            else {\n                var xHttp = new XMLHttpRequest();\n                var tileLength_1 = _this.control.mapLayerPanel.tiles.length;\n                var _loop_1 = function (i) {\n                    var tile = document.getElementById('tile_' + (i - 1));\n                    var tileImg = new Image();\n                    tileImg.crossOrigin = 'Anonymous';\n                    ctx.fillStyle = _this.control.background ? _this.control.background : '#FFFFFF';\n                    ctx.fillRect(0, 0, _this.control.availableSize.width, _this.control.availableSize.height);\n                    ctx.font = _this.control.titleSettings.textStyle.size + ' Arial';\n                    ctx.fillStyle = document.getElementById(_this.control.element.id + '_Map_title').getAttribute('fill');\n                    ctx.fillText(_this.control.titleSettings.text, parseFloat(document.getElementById(_this.control.element.id + '_Map_title').getAttribute('x')), parseFloat(document.getElementById(_this.control.element.id + '_Map_title').getAttribute('y')));\n                    tileImg.onload = (function () {\n                        if (i === 0 || i === tileLength_1 + 1) {\n                            if (i === 0) {\n                                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                                ctx.rect(0, parseFloat(svgParent.style.top), parseFloat(svgParent.style.width), parseFloat(svgParent.style.height));\n                                ctx.clip();\n                            }\n                            else {\n                                ctx.setTransform(1, 0, 0, 1, parseFloat(svgParent.style.left), parseFloat(svgParent.style.top));\n                            }\n                        }\n                        else {\n                            ctx.setTransform(1, 0, 0, 1, parseFloat(tile.style.left) + 10, parseFloat(tile.style.top) +\n                                (parseFloat(document.getElementById(_this.control.element.id + '_tile_parent').style.top)));\n                        }\n                        ctx.drawImage(tileImg, 0, 0);\n                        if (i === tileLength_1 + 1) {\n                            if (type === 'PDF') {\n                                localStorage.setItem('saved-image-example', canvasElement.toDataURL('image/jpeg'));\n                                var x = localStorage.getItem('saved-image-example');\n                                pdfDocument.pageSettings.orientation = orientation;\n                                x = x.slice(x.indexOf(',') + 1);\n                                pdfDocument.pages.add().graphics.drawImage(new PdfBitmap(x), 0, 0, (_this.control.availableSize.width - 60), _this.control.availableSize.height);\n                                if (allowDownload) {\n                                    pdfDocument.save(fileName + '.pdf');\n                                    pdfDocument.destroy();\n                                }\n                                else {\n                                    resolve(null);\n                                }\n                            }\n                        }\n                    });\n                    if (i === 0 || i === tileLength_1 + 1) {\n                        if (i === 0) {\n                            tileImg.src = url;\n                        }\n                        else {\n                            setTimeout(function () {\n                                tileImg.src = window.URL.createObjectURL(new Blob([(new XMLSerializer()).serializeToString(document.getElementById(_this.control.element.id + '_Tile_SVG'))], { type: 'image/svg+xml' }));\n                                // tslint:disable-next-line:align\n                            }, 300);\n                        }\n                    }\n                    else {\n                        xHttp.open('GET', tile.children[0].getAttribute('src'), true);\n                        xHttp.send();\n                        tileImg.src = tile.children[0].getAttribute('src');\n                    }\n                };\n                for (var i = 0; i <= tileLength_1 + 1; i++) {\n                    _loop_1(i);\n                }\n            }\n        });\n        return promise;\n    };\n    /**\n     * Get module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    /**\n     * To destroy the PdfExports.\n     * @return {void}\n     * @private\n     */\n    PdfExport.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n"]},"metadata":{},"sourceType":"module"}