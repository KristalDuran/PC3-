{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * Maps Component file\n */\n\n\nimport { Component, NotifyPropertyChanges, Property, Ajax } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, isNullOrUndefined, createElement, setValue, extend } from '@syncfusion/ej2-base';\nimport { Event, remove, L10n, Collection, Internationalization, Complex, isBlazor } from '@syncfusion/ej2-base';\nimport { updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { Size, createSvg, Point, removeElement, triggerShapeEvent, showTooltip, checkShapeDataFields } from './utils/helper';\nimport { getElement, removeClass, getTranslate, triggerItemSelectionEvent, mergeSeparateCluster, customizeStyle } from './utils/helper';\nimport { createStyle } from './utils/helper';\nimport { ZoomSettings, LegendSettings } from './model/base';\nimport { LayerSettings, TitleSettings, Border, Margin, MapsAreaSettings, Annotation, CenterPosition } from './model/base';\nimport { Marker } from './layers/marker';\nimport { load, click, loaded, resize, shapeSelected, zoomIn } from './model/constants';\nimport { getThemeStyle } from './model/theme';\nimport { BingMap } from './layers/bing-map';\nimport { LayerPanel } from './layers/layer-panel';\nimport { Rect, RectOption, measureText, getElementByID, MapAjax, processResult } from '../maps/utils/helper';\nimport { findPosition, textTrim, TextOption, renderTextElement, convertGeoToPoint, calculateZoomLevel } from '../maps/utils/helper';\nimport { Annotations } from '../maps/user-interaction/annotation';\nimport { MarkerSettings } from './index';\nimport { changeBorderWidth } from './index';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\n/**\n * Represents the Maps control.\n * ```html\n * <div id=\"maps\"/>\n * <script>\n *   var maps = new Maps();\n *   maps.appendTo(\"#maps\");\n * </script>\n * ```\n */\n\nvar Maps =\n/** @class */\nfunction (_super) {\n  __extends(Maps, _super);\n  /**\n   * Constructor for creating the widget\n   */\n\n\n  function Maps(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    /**\n     * Check layer whether is geometry or tile\n     * @private\n     */\n\n\n    _this.isTileMap = false;\n    /**\n     * Resize the map\n     */\n\n    _this.isResize = false;\n    /** @private */\n\n    _this.baseSize = new Size(0, 0);\n    /** @public */\n\n    _this.translatePoint = new Point(0, 0);\n    /** @private */\n\n    _this.baseTranslatePoint = new Point(0, 0);\n    /** @public */\n\n    _this.zoomTranslatePoint = new Point(0, 0);\n    /** @private */\n\n    _this.markerZoomedState = true;\n    /** @private */\n\n    _this.zoomPersistence = false;\n    /** @private */\n\n    _this.defaultState = true;\n    /** @private */\n\n    _this.centerPositionChanged = false;\n    /** @private */\n\n    _this.isTileMapSubLayer = false;\n    /** @private */\n\n    _this.markerNullCount = 0;\n    /** @private */\n\n    _this.tileTranslatePoint = new Point(0, 0);\n    /** @private */\n\n    _this.baseTileTranslatePoint = new Point(0, 0);\n    /** @private */\n\n    _this.isDevice = false;\n    /** @private */\n\n    _this.staticMapZoom = _this.zoomSettings.enable ? _this.zoomSettings.zoomFactor : 0;\n    /** @private */\n\n    _this.zoomNotApplied = false;\n    /** @public */\n\n    _this.dataLabelShape = [];\n    _this.zoomShapeCollection = [];\n    _this.zoomLabelPositions = [];\n    _this.mouseDownEvent = {\n      x: null,\n      y: null\n    };\n    _this.mouseClickEvent = {\n      x: null,\n      y: null\n    };\n    /** @private */\n\n    _this.selectedElementId = [];\n    /** @private */\n\n    _this.selectedMarkerElementId = [];\n    /** @private */\n\n    _this.selectedBubbleElementId = [];\n    /** @private */\n\n    _this.selectedNavigationElementId = [];\n    /** @private */\n\n    _this.selectedLegendElementId = [];\n    /** @private */\n\n    _this.legendSelectionCollection = [];\n    /** @private */\n\n    _this.shapeSelections = true;\n    /** @private */\n\n    _this.legendSelection = true;\n    /** @private */\n\n    _this.toggledLegendId = [];\n    /** @private */\n\n    _this.toggledShapeElementId = [];\n    /** @private */\n\n    _this.checkInitialRender = true;\n    /** @private */\n\n    _this.initialTileTranslate = new Point(0, 0);\n    /** @private */\n\n    _this.initialCheck = true;\n    /** @private */\n\n    _this.applyZoomReset = false;\n    /** @private */\n\n    _this.markerClusterExpandCheck = false;\n    /** @private */\n\n    _this.markerClusterExpand = false;\n    /** @private */\n\n    _this.shapeSelectionItem = [];\n    setValue('mergePersistData', _this.mergePersistMapsData, _this);\n    return _this;\n  }\n\n  Object.defineProperty(Maps.prototype, \"isShapeSelected\", {\n    /**\n     * Specifies whether the shape is selected in the maps or not..\n     */\n    get: function () {\n      return this.mapSelect;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ;\n  /**\n   * To manage persist maps data\n   */\n\n  Maps.prototype.mergePersistMapsData = function () {\n    var data;\n\n    if (!isNullOrUndefined(window.localStorage)) {\n      data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n    }\n\n    if (!(isNullOrUndefined(data) || data === '')) {\n      var dataObj = JSON.parse(data);\n      var keys = Object.keys(dataObj);\n      this.isProtectedOnChange = true;\n\n      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n\n        if (typeof this[key] === 'object' && !isNullOrUndefined(this[key])) {\n          extend(this[key], dataObj[key]);\n        } else {\n          this[key] = dataObj[key];\n        }\n      }\n\n      this.isProtectedOnChange = false;\n    }\n  };\n  /**\n   * Gets the localized label by locale keyword.\n   * @param  {string} key\n   * @return {string}\n   */\n\n\n  Maps.prototype.getLocalizedLabel = function (key) {\n    return this.localeObject.getConstant(key);\n  };\n  /**\n   * Initializing pre-required values.\n   */\n\n\n  Maps.prototype.preRender = function () {\n    this.isDevice = Browser.isDevice;\n    this.isBlazor = isBlazor();\n    this.initPrivateVariable();\n    this.allowServerDataBinding = false;\n    this.unWireEVents();\n    this.wireEVents();\n    this.setCulture();\n  };\n  /**\n   * To Initialize the control rendering.\n   */\n\n\n  Maps.prototype.render = function () {\n    this.trigger(load, this.isBlazor ? {} : {\n      maps: this\n    });\n    this.createSVG();\n    this.findBaseAndSubLayers();\n    this.createSecondaryElement();\n    this.addTabIndex();\n    this.themeStyle = getThemeStyle(this.theme);\n    this.renderBorder();\n    this.renderTitle(this.titleSettings, 'title', null, null);\n    this.renderArea();\n    this.processRequestJsonData();\n    this.renderComplete();\n  };\n  /* tslint:disable:no-string-literal */\n\n\n  Maps.prototype.processRequestJsonData = function () {\n    var _this = this;\n\n    var length = this.layersCollection.length - 1;\n    this.serverProcess = {\n      request: 0,\n      response: 0\n    };\n    var queryModule;\n    var localAjax;\n    var ajaxModule;\n    var dataModule;\n    Array.prototype.forEach.call(this.layersCollection, function (layer, layerIndex) {\n      if (layer.shapeData instanceof DataManager) {\n        _this.serverProcess['request']++;\n        dataModule = layer.shapeData;\n        queryModule = layer.query instanceof Query ? layer.query : _this.isBlazor ? new Query().requiresCount() : new Query();\n        var dataManager = dataModule.executeQuery(queryModule);\n        dataManager.then(function (e) {\n          _this.processResponseJsonData('DataManager', e, layer, 'ShapeData');\n        });\n      } else if (layer.shapeData instanceof MapAjax || layer.shapeData) {\n        if (!isNullOrUndefined(layer.shapeData['dataOptions'])) {\n          _this.processAjaxRequest(layer, layer.shapeData, 'ShapeData');\n        }\n      }\n\n      if (layer.dataSource instanceof DataManager) {\n        _this.serverProcess['request']++;\n        dataModule = layer.dataSource;\n        queryModule = layer.query instanceof Query ? layer.query : _this.isBlazor ? new Query().requiresCount() : new Query();\n        var dataManager = dataModule.executeQuery(queryModule);\n        dataManager.then(function (e) {\n          layer.dataSource = processResult(e);\n        });\n      }\n\n      if (layer.markerSettings.length > 0) {\n        var _loop_1 = function (i) {\n          if (layer.markerSettings[i].dataSource instanceof DataManager) {\n            _this.serverProcess['request']++;\n            dataModule = layer.markerSettings[i].dataSource;\n            queryModule = layer.markerSettings[i].query instanceof Query ? layer.markerSettings[i].query : _this.isBlazor ? new Query().requiresCount() : new Query();\n            var dataManager = dataModule.executeQuery(queryModule);\n            dataManager.then(function (e) {\n              layer.markerSettings[i].dataSource = processResult(e);\n            });\n          }\n        };\n\n        for (var i = 0; i < layer.markerSettings.length; i++) {\n          _loop_1(i);\n        }\n      }\n\n      if (layer.bubbleSettings.length > 0) {\n        var _loop_2 = function (i) {\n          if (layer.bubbleSettings[i].dataSource instanceof DataManager) {\n            _this.serverProcess['request']++;\n            dataModule = layer.bubbleSettings[i].dataSource;\n            queryModule = layer.bubbleSettings[i].query instanceof Query ? layer.bubbleSettings[i].query : _this.isBlazor ? new Query().requiresCount() : new Query();\n            var dataManager = dataModule.executeQuery(queryModule);\n            dataManager.then(function (e) {\n              layer.bubbleSettings[i].dataSource = processResult(e);\n            });\n          }\n        };\n\n        for (var i = 0; i < layer.bubbleSettings.length; i++) {\n          _loop_2(i);\n        }\n      }\n\n      if (layer.dataSource instanceof MapAjax || !isNullOrUndefined(layer.dataSource['dataOptions'])) {\n        _this.processAjaxRequest(layer, layer.dataSource, 'DataSource');\n      }\n\n      if (_this.serverProcess['request'] === _this.serverProcess['response'] && length === layerIndex) {\n        _this.processResponseJsonData(null);\n      }\n    });\n  }; // tslint:disable:no-any\n\n\n  Maps.prototype.processAjaxRequest = function (layer, localAjax, type) {\n    var _this = this;\n\n    var ajaxModule;\n    this.serverProcess['request']++;\n    ajaxModule = new Ajax(localAjax.dataOptions, localAjax.type, localAjax.async, localAjax.contentType);\n\n    ajaxModule.onSuccess = function (args) {\n      _this.processResponseJsonData('Ajax', args, layer, type);\n    };\n\n    ajaxModule.send(localAjax.sendData);\n  };\n  /**\n   * This method is used to process the JSON data to render the maps.\n   * @param processType - Specifies the process type in maps.\n   * @param data - Specifies the data for maps.\n   * @param layer - Specifies the layer for the maps.\n   * @param dataType - Specifies the data type for maps.\n   */\n\n  /* tslint:disable:no-eval */\n\n\n  Maps.prototype.processResponseJsonData = function (processType, data, layer, dataType) {\n    this.serverProcess['response']++;\n\n    if (processType) {\n      if (dataType === 'ShapeData') {\n        layer.shapeData = processType === 'DataManager' ? processResult(data) : JSON.parse(data);\n      } else {\n        layer.dataSource = processType === 'DataManager' ? processResult(data) : JSON.parse('[' + data + ']')[0];\n      }\n    }\n\n    if (!isNullOrUndefined(processType) && this.serverProcess['request'] === this.serverProcess['response']) {\n      var collection = this.layersCollection;\n      this.layersCollection = [];\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].isBaseLayer) {\n          this.layersCollection.push(collection[i]);\n        }\n      }\n\n      for (var j = 0; j < collection.length; j++) {\n        if (!collection[j].isBaseLayer) {\n          this.layersCollection.push(collection[j]);\n        }\n      }\n\n      this.renderMap();\n    } else if (isNullOrUndefined(processType)) {\n      this.renderMap();\n    }\n  };\n  /* tslint:disable:max-func-body-length */\n\n\n  Maps.prototype.renderMap = function () {\n    if (this.legendModule && this.legendSettings.visible) {\n      if (!this.isTileMap) {\n        this.legendModule.renderLegend();\n      } else {\n        var layerCount = this.layersCollection.length - 1;\n\n        if (!this.layersCollection[layerCount].isBaseLayer) {\n          this.isTileMapSubLayer = true;\n          this.legendModule.renderLegend();\n        }\n      }\n    }\n\n    this.createTile();\n\n    if (this.zoomSettings.enable && this.zoomModule) {\n      this.zoomModule.createZoomingToolbars();\n    }\n\n    if (!isNullOrUndefined(this.dataLabelModule)) {\n      this.dataLabelModule.dataLabelCollections = [];\n      this.dataLabelShape = [];\n    }\n\n    this.mapLayerPanel.measureLayerPanel();\n    this.element.appendChild(this.svgObject);\n\n    for (var i = 0; i < this.layers.length; i++) {\n      if (this.layers[i].selectionSettings && this.layers[i].selectionSettings.enable && this.layers[i].initialShapeSelection.length > 0 && this.checkInitialRender) {\n        var checkSelection = this.layers[i].selectionSettings.enableMultiSelect;\n        this.layers[i].selectionSettings.enableMultiSelect = checkSelection ? checkSelection : true;\n        var shapeSelection = this.layers[i].initialShapeSelection;\n\n        for (var j = 0; j < this.layers[i].initialShapeSelection.length; j++) {\n          this.shapeSelection(i, shapeSelection[j].shapePath, shapeSelection[j].shapeValue, true);\n        }\n\n        this.layers[i].selectionSettings.enableMultiSelect = checkSelection;\n\n        if (i === this.layers.length - 1) {\n          this.checkInitialRender = false;\n        }\n      }\n\n      for (var k = 0; k < this.layers[i].markerSettings.length; k++) {\n        if (this.layers[i].markerSettings[k].selectionSettings && this.layers[i].markerSettings[k].selectionSettings.enable && this.layers[i].markerSettings[k].initialMarkerSelection.length > 0) {\n          var markerSelectionValues = this.layers[i].markerSettings[k].initialMarkerSelection;\n\n          for (var j = 0; j < markerSelectionValues.length; j++) {\n            this.markerInitialSelection(i, k, this.layers[i].markerSettings[k], markerSelectionValues[j].latitude, markerSelectionValues[j].longitude);\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(document.getElementById(this.element.id + '_tile_parent'))) {\n      var svg = this.svgObject.getBoundingClientRect();\n      var element = document.getElementById(this.element.id);\n      var tileElement = document.getElementById(this.element.id + '_tile_parent');\n      var tileElement1 = document.getElementById(this.element.id + '_tiles');\n      var tile = tileElement.getBoundingClientRect();\n      var bottom = void 0;\n      var top_1;\n      var left = void 0;\n      left = parseFloat(tileElement.style.left) + element.offsetLeft;\n      var titleTextSize = measureText(this.titleSettings.text, this.titleSettings.textStyle);\n      var subTitleTextSize = measureText(this.titleSettings.subtitleSettings.text, this.titleSettings.subtitleSettings.textStyle);\n\n      if (this.isTileMap && this.isTileMapSubLayer && this.legendSettings.position === 'Bottom' && this.legendSettings.visible) {\n        if (this.legendSettings.mode !== 'Default') {\n          if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop + subTitleTextSize.height / 2 - this.legendModule.legendBorderRect.height / 2;\n          } else {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop - this.mapAreaRect.y;\n          }\n        } else {\n          left = this.legendModule.legendBorderRect.x;\n\n          if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop + subTitleTextSize['height'] / 2 - this.legendModule.legendBorderRect.y;\n          } else {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop + subTitleTextSize['height'] / 2;\n          }\n        }\n      } else {\n        bottom = svg.bottom - tile.bottom - element.offsetTop;\n        top_1 = parseFloat(tileElement.style.top) + element.offsetTop;\n      }\n\n      top_1 = bottom <= 11 ? top_1 : top_1 * 2;\n      left = bottom <= 11 ? left : left * 2;\n      tileElement.style.top = top_1 + 'px';\n      tileElement.style.left = left + 'px';\n      tileElement1.style.top = top_1 + 'px';\n      tileElement1.style.left = left + 'px';\n    }\n\n    this.arrangeTemplate();\n    var blazor = this.isBlazor ? this.blazorTemplates() : null;\n\n    if (this.annotationsModule) {\n      if (this.width !== '0px' && this.height !== '0px' && this.width !== '0%' && this.height !== '0%') {\n        this.annotationsModule.renderAnnotationElements();\n      }\n    }\n\n    this.zoomingChange();\n    this.trigger(loaded, this.isBlazor ? {\n      isResized: this.isResize\n    } : {\n      maps: this,\n      isResized: this.isResize\n    });\n    this.isResize = false;\n  };\n  /**\n   * @private\n   * To apply color to the initial selected marker\n   */\n\n\n  Maps.prototype.markerSelection = function (selectionSettings, map, targetElement, data) {\n    var border = {\n      color: selectionSettings.border.color,\n      width: selectionSettings.border.width / map.scale\n    };\n    var markerSelectionProperties = {\n      opacity: selectionSettings.opacity,\n      fill: selectionSettings.fill,\n      border: border,\n      target: targetElement.id,\n      cancel: false,\n      data: data,\n      maps: map\n    };\n\n    if (!getElement('MarkerselectionMap')) {\n      document.body.appendChild(createStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties));\n    } else {\n      customizeStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties);\n    }\n\n    if (this.selectedMarkerElementId.length === 0 || selectionSettings.enableMultiSelect) {\n      targetElement.setAttribute('class', 'MarkerselectionMapStyle');\n    }\n  };\n  /**\n   * @private\n   * initial selection of marker\n   *\n   */\n\n\n  Maps.prototype.markerInitialSelection = function (layerIndex, markerIndex, markerSettings, latitude, longitude) {\n    var selectionSettings = markerSettings.selectionSettings;\n\n    if (selectionSettings.enable) {\n      for (var i = 0; i < markerSettings.dataSource['length']; i++) {\n        var data = markerSettings.dataSource[i];\n\n        if (data['latitude'] === latitude && data['longitude'] === longitude) {\n          var targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + i;\n          this.markerSelection(selectionSettings, this, getElement(targetId), data);\n        }\n      }\n    }\n  };\n  /**\n   * To append blazor templates\n   * @private\n   */\n\n\n  Maps.prototype.blazorTemplates = function () {\n    for (var i = 0; i < this.layers.length; i++) {\n      var markerLength = this.layers[i].markerSettings.length - 1;\n\n      if (markerLength >= 0) {\n        if (this.layers[i].dataLabelSettings.visible || this.layers[i].markerSettings[markerLength].template) {\n          updateBlazorTemplate(this.element.id + '_LabelTemplate', 'LabelTemplate', this.layers[i].dataLabelSettings);\n\n          for (var j = 0; j < this.layers[i].markerSettings.length; j++) {\n            updateBlazorTemplate(this.element.id + '_MarkerTemplate' + j, 'MarkerTemplate', this.layers[i].markerSettings[j]);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Render the map area border\n   */\n\n\n  Maps.prototype.renderArea = function () {\n    var width = this.mapsArea.border.width;\n    var background = this.mapsArea.background;\n\n    if (width > 0 || background || this.themeStyle.areaBackgroundColor) {\n      var rect = new RectOption(this.element.id + '_MapAreaBorder', background || this.themeStyle.areaBackgroundColor, this.mapsArea.border, 1, this.mapAreaRect);\n      this.svgObject.appendChild(this.renderer.drawRectangle(rect));\n    }\n  };\n  /**\n   * To add tab index for map element\n   */\n\n\n  Maps.prototype.addTabIndex = function () {\n    this.element.setAttribute('aria-label', this.description || 'Maps Element');\n    this.element.setAttribute('tabindex', this.tabIndex.toString());\n  }; // private setSecondaryElementPosition(): void {\n  //     if (!this.isTileMap) {\n  //         let element: HTMLDivElement = getElementByID(this.element.id + '_Secondary_Element') as HTMLDivElement;\n  //         let rect: ClientRect = this.element.getBoundingClientRect();\n  //         let svgRect: ClientRect = getElementByID(this.element.id + '_svg').getBoundingClientRect();\n  //         element.style.marginLeft = Math.max(svgRect.left - rect.left, 0) + 'px';\n  //         element.style.marginTop = Math.max(svgRect.top - rect.top, 0) + 'px';\n  //     }\n  // }\n\n\n  Maps.prototype.zoomingChange = function () {\n    var left;\n    var top;\n\n    if (getElementByID(this.element.id + '_Layer_Collections') && this.zoomModule) {\n      this.zoomModule.layerCollectionEle = getElementByID(this.element.id + '_Layer_Collections');\n    }\n\n    if (this.isTileMap && getElementByID(this.element.id + '_Tile_SVG') && getElementByID(this.element.id + '_tile_parent')) {\n      var tileRect = getElementByID(this.element.id + '_tile_parent').getBoundingClientRect();\n      var tileSvgRect = getElementByID(this.element.id + '_Tile_SVG').getBoundingClientRect();\n      left = tileRect.left - tileSvgRect.left;\n      top = tileRect.top - tileSvgRect.top;\n      getElementByID(this.element.id + '_Tile_SVG_Parent').style.left = left + 'px';\n      getElementByID(this.element.id + '_Tile_SVG_Parent').style.top = top + 'px';\n      var markerTemplateElements = document.getElementsByClassName('template');\n\n      if (!isNullOrUndefined(markerTemplateElements) && markerTemplateElements.length > 0) {\n        for (var i = 0; i < markerTemplateElements.length; i++) {\n          var templateGroupEle = markerTemplateElements[i];\n          templateGroupEle.style.left = left + 'px';\n          templateGroupEle.style.top = top + 'px';\n        }\n      }\n    }\n\n    if (this.zoomSettings.zoomFactor >= 1) {\n      if (this.zoomModule && this.zoomModule.toolBarGroup && this.zoomSettings.enable) {\n        this.zoomModule.alignToolBar();\n      }\n\n      var elements = document.getElementById(this.element.id + '_Layer_Collections');\n\n      if (!isNullOrUndefined(elements) && elements.childElementCount > 0) {\n        for (var i = 0; i < elements.childNodes.length; i++) {\n          var childElement = elements.childNodes[i];\n\n          if (childElement.tagName === 'g') {\n            var layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n\n            for (var j = 0; j < childElement.childNodes.length; j++) {\n              var childNode = childElement.childNodes[j];\n\n              if (!(childNode.id.indexOf('_Markers_Group') > -1) && !(childNode.id.indexOf('_bubble_Group') > -1) && !(childNode.id.indexOf('_dataLableIndex_Group') > -1)) {\n                changeBorderWidth(childNode, layerIndex, this.scale, this);\n              }\n            }\n          }\n        }\n      }\n\n      if (this.zoomModule && this.previousScale !== this.scale) {\n        this.zoomModule.applyTransform(true);\n      }\n    }\n  };\n\n  Maps.prototype.createSecondaryElement = function () {\n    if (isNullOrUndefined(document.getElementById(this.element.id + '_Secondary_Element'))) {\n      var secondaryElement = createElement('div', {\n        id: this.element.id + '_Secondary_Element',\n        styles: 'position: absolute;z-index:2;'\n      });\n      this.element.appendChild(secondaryElement);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Maps.prototype.arrangeTemplate = function () {\n    if (document.getElementById(this.element.id + '_Legend_Border')) {\n      document.getElementById(this.element.id + '_Legend_Border').style.pointerEvents = 'none';\n    }\n\n    var templateElements = document.getElementsByClassName(this.element.id + '_template');\n\n    if (!isNullOrUndefined(templateElements) && templateElements.length > 0 && getElementByID(this.element.id + '_Layer_Collections') && this.layers[this.layers.length - 1].layerType !== 'OSM') {\n      for (var i = 0; i < templateElements.length; i++) {\n        var templateGroupEle = templateElements[i];\n\n        if (!isNullOrUndefined(templateGroupEle) && templateGroupEle.childElementCount > 0) {\n          var layerOffset = getElementByID(this.element.id + '_Layer_Collections').getBoundingClientRect();\n          var elementOffset = getElementByID(templateGroupEle.id).getBoundingClientRect();\n          var offSetLetValue = this.isTileMap ? 0 : layerOffset.left < elementOffset.left ? -Math.abs(elementOffset.left - layerOffset.left) : Math.abs(elementOffset.left - layerOffset.left);\n          var offSetTopValue = this.isTileMap ? 0 : layerOffset.top < elementOffset.top ? -Math.abs(elementOffset.top - layerOffset.top) : Math.abs(elementOffset.top - layerOffset.top);\n\n          for (var j = 0; j < templateGroupEle.childElementCount; j++) {\n            var currentTemplate = templateGroupEle.childNodes[j];\n            currentTemplate.style.left = parseFloat(currentTemplate.style.left) + offSetLetValue + 'px';\n            currentTemplate.style.top = parseFloat(currentTemplate.style.top) + offSetTopValue + 'px';\n            currentTemplate.style.transform = 'translate(-50%, -50%)';\n          }\n        }\n      }\n    }\n  };\n\n  Maps.prototype.createTile = function () {\n    var mainLayer = this.layersCollection[0];\n    var padding = 0;\n\n    if (mainLayer.isBaseLayer && (mainLayer.layerType === 'OSM' || mainLayer.layerType === 'Bing' || mainLayer.layerType === 'GoogleStaticMap' || mainLayer.layerType === 'Google')) {\n      if (mainLayer.layerType === 'Google') {\n        mainLayer.urlTemplate = 'https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level';\n      }\n\n      removeElement(this.element.id + '_tile_parent');\n      removeElement(this.element.id + '_tiles');\n      removeElement('animated_tiles');\n      var ele = createElement('div', {\n        id: this.element.id + '_tile_parent',\n        styles: 'position: absolute; left: ' + this.mapAreaRect.x + 'px; top: ' + (this.mapAreaRect.y + padding) + 'px; height: ' + this.mapAreaRect.height + 'px; width: ' + this.mapAreaRect.width + 'px; overflow: hidden;'\n      });\n      var ele1 = createElement('div', {\n        id: this.element.id + '_tiles',\n        styles: 'position: absolute; left: ' + this.mapAreaRect.x + 'px; top: ' + (this.mapAreaRect.y + padding) + 'px; height: ' + this.mapAreaRect.height + 'px; width: ' + this.mapAreaRect.width + 'px; overflow: hidden;'\n      });\n      this.element.appendChild(ele);\n      this.element.appendChild(ele1);\n    }\n  };\n  /**\n   * To initilize the private varibales of maps.\n   */\n\n\n  Maps.prototype.initPrivateVariable = function () {\n    if (this.element.id === '') {\n      var collection = document.getElementsByClassName('e-maps').length;\n      this.element.id = 'maps_control_' + collection;\n    }\n\n    this.renderer = new SvgRenderer(this.element.id);\n    this.mapLayerPanel = new LayerPanel(this);\n  };\n\n  Maps.prototype.findBaseAndSubLayers = function () {\n    var _this = this;\n\n    var baseIndex = this.baseLayerIndex;\n    var mainLayers = [];\n    var subLayers = [];\n    this.layersCollection = [];\n    Array.prototype.forEach.call(this.layers, function (layer) {\n      layer.type === 'Layer' ? mainLayers.push(layer) : subLayers.push(layer);\n    });\n\n    for (var i = 0; i < mainLayers.length; i++) {\n      var baseLayer = mainLayers[i];\n\n      if (baseLayer.visible && baseIndex === i) {\n        baseLayer.isBaseLayer = true;\n        this.isTileMap = baseLayer.layerType === 'Geometry' ? false : true;\n        this.layersCollection.push(baseLayer);\n        break;\n      } else if (i === mainLayers.length - 1) {\n        this.layersCollection.push(mainLayers[0]);\n        break;\n      }\n    }\n\n    subLayers.map(function (subLayer, subLayerIndex) {\n      if (subLayer.visible) {\n        _this.layersCollection.push(subLayer);\n      }\n    });\n  };\n  /**\n   * @private\n   * Render the map border\n   */\n\n\n  Maps.prototype.renderBorder = function () {\n    var width = this.border.width;\n    var borderElement = this.svgObject.querySelector('#' + this.element.id + '_MapBorder');\n\n    if ((width > 0 || this.background || this.themeStyle.backgroundColor) && isNullOrUndefined(borderElement)) {\n      var borderRect = new RectOption(this.element.id + '_MapBorder', this.background || this.themeStyle.backgroundColor, this.border, 1, new Rect(width / 2, width / 2, this.availableSize.width - width, this.availableSize.height - width));\n      this.svgObject.appendChild(this.renderer.drawRectangle(borderRect));\n    } else {\n      borderElement.setAttribute('fill', this.background || this.themeStyle.backgroundColor);\n    }\n  };\n  /**\n   * @private\n   * Render the title and subtitle\n   */\n\n\n  Maps.prototype.renderTitle = function (title, type, bounds, groupEle) {\n    var style = title.textStyle;\n    var height;\n    var width = Math.abs(this.margin.left + this.margin.right - this.availableSize.width);\n    style.fontFamily = this.themeStyle.fontFamily || style.fontFamily;\n    style.size = this.themeStyle.titleFontSize || style.size;\n\n    if (title.text) {\n      if (isNullOrUndefined(groupEle)) {\n        groupEle = this.renderer.createGroup({\n          id: this.element.id + '_Title_Group'\n        });\n      }\n\n      var trimmedTitle = textTrim(width, title.text, style);\n      var elementSize = measureText(trimmedTitle, style);\n      var rect = isNullOrUndefined(bounds) ? new Rect(this.margin.left, this.margin.top, this.availableSize.width, this.availableSize.height) : bounds;\n      var location_1 = findPosition(rect, title.alignment, elementSize, type);\n      var options = new TextOption(this.element.id + '_Map_' + type, location_1.x, location_1.y, 'start', trimmedTitle);\n      var titleBounds = new Rect(location_1.x, location_1.y, elementSize.width, elementSize.height);\n      var element = renderTextElement(options, style, style.color || (type === 'title' ? this.themeStyle.titleFontColor : this.themeStyle.subTitleFontColor), groupEle);\n      element.setAttribute('aria-label', this.description || title.text);\n      element.setAttribute('tabindex', (this.tabIndex + (type === 'title' ? 1 : 2)).toString());\n\n      if (type === 'title' && !title.subtitleSettings.text || type === 'subtitle') {\n        height = Math.abs(titleBounds.y + this.margin.bottom - this.availableSize.height);\n        this.mapAreaRect = new Rect(this.margin.left, titleBounds.y + 10, width, height - 10);\n      }\n\n      if (type !== 'subtitle' && title.subtitleSettings.text) {\n        this.renderTitle(title.subtitleSettings, 'subtitle', titleBounds, groupEle);\n      } else {\n        this.svgObject.appendChild(groupEle);\n      }\n    } else {\n      height = Math.abs(this.margin.top + this.margin.bottom - this.availableSize.height);\n      this.mapAreaRect = new Rect(this.margin.left, this.margin.top, width, height);\n    }\n  };\n  /**\n   * To create svg element for maps\n   */\n\n\n  Maps.prototype.createSVG = function () {\n    resetBlazorTemplate(this.element.id + '_LabelTemplate', 'LabelTemplate');\n\n    for (var i = 0; i < this.layers.length; i++) {\n      for (var j = 0; j < this.layers[i].markerSettings.length; j++) {\n        resetBlazorTemplate(this.element.id + '_MarkerTemplate' + j, 'MarkerTemplate');\n      }\n    }\n\n    this.removeSvg();\n    createSvg(this);\n  };\n  /**\n   * To Remove the SVG\n   */\n\n\n  Maps.prototype.removeSvg = function () {\n    for (var i = 0; i < this.annotations.length; i++) {\n      resetBlazorTemplate(this.element.id + '_ContentTemplate_' + i, 'ContentTemplate');\n    }\n\n    removeElement(this.element.id + '_Secondary_Element');\n    removeElement(this.element.id + '_tile_parent');\n    removeElement(this.element.id + '_tiles');\n\n    if (this.svgObject) {\n      while (this.svgObject.childNodes.length > 0) {\n        this.svgObject.removeChild(this.svgObject.firstChild);\n      }\n\n      if (!this.svgObject.hasChildNodes() && this.svgObject.parentNode) {\n        remove(this.svgObject);\n      }\n    }\n  };\n  /**\n   * To bind event handlers for maps.\n   */\n\n\n  Maps.prototype.wireEVents = function () {\n    //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    EventHandler.add(this.element, 'click', this.mapsOnClick, this); // EventHandler.add(this.element, 'contextmenu', this.mapsOnRightClick, this);\n\n    EventHandler.add(this.element, 'dblclick', this.mapsOnDoubleClick, this);\n    EventHandler.add(this.element, Browser.touchStartEvent, this.mouseDownOnMap, this);\n    EventHandler.add(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap, this);\n    EventHandler.add(this.element, Browser.touchEndEvent, this.mouseEndOnMap, this);\n    EventHandler.add(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap, this); //  EventHandler.add(this.element, cancelEvent, this.mouseLeaveOnMap, this);\n\n    window.addEventListener(Browser.isTouch && 'orientation' in window && 'onorientationchange' in window ? 'orientationchange' : 'resize', this.mapsOnResize.bind(this));\n  };\n  /**\n   * To unbind event handlers from maps.\n   */\n\n\n  Maps.prototype.unWireEVents = function () {\n    //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    EventHandler.remove(this.element, 'click', this.mapsOnClick); // EventHandler.remove(this.element, 'contextmenu', this.mapsOnRightClick);\n\n    EventHandler.remove(this.element, 'dblclick', this.mapsOnDoubleClick);\n    EventHandler.remove(this.element, Browser.touchStartEvent, this.mouseDownOnMap);\n    EventHandler.remove(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap);\n    EventHandler.remove(this.element, Browser.touchEndEvent, this.mouseEndOnMap);\n    EventHandler.remove(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap); //EventHandler.remove(this.element, cancelEvent, this.mouseLeaveOnMap);\n\n    window.removeEventListener(Browser.isTouch && 'orientation' in window && 'onorientationchange' in window ? 'orientationchange' : 'resize', this.mapsOnResize);\n  };\n  /**\n   * This method is used to perform operations when mouse pointer leave from maps.\n   * @param e - Specifies the pointer event on maps.\n   */\n\n\n  Maps.prototype.mouseLeaveOnMap = function (e) {\n    if (document.getElementsByClassName('highlightMapStyle').length > 0 && this.legendModule) {\n      this.legendModule.removeShapeHighlightCollection();\n      removeClass(document.getElementsByClassName('highlightMapStyle')[0]);\n    }\n  };\n  /**\n   * This method is used to perform the operations when a click operation is performed on maps.\n   * @param e - Specifies the pointer event on maps.\n   * @blazorProperty 'PerformClick'\n   */\n\n  /* tslint:disable:no-string-literal */\n\n\n  Maps.prototype.mapsOnClick = function (e) {\n    var _this = this;\n\n    var targetEle = e.target;\n    var targetId = targetEle.id;\n    var layerIndex = 0;\n    var latLongValue;\n    var latitude = null;\n    var longitude = null;\n    this.mouseClickEvent = {\n      x: e.x,\n      y: e.y\n    };\n\n    if (targetEle.id.indexOf('_ToolBar') === -1) {\n      if (targetEle.id.indexOf('_LayerIndex_') !== -1 && !this.isTileMap && this.mouseDownEvent['x'] === this.mouseClickEvent['x'] && this.mouseDownEvent['y'] === this.mouseClickEvent['y']) {\n        layerIndex = parseFloat(targetEle.id.split('_LayerIndex_')[1].split('_')[0]);\n        latLongValue = this.getGeoLocation(layerIndex, e);\n        latitude = latLongValue['latitude'];\n        longitude = latLongValue['longitude'];\n      } else if (this.isTileMap && this.mouseDownEvent['x'] === this.mouseClickEvent['x'] && this.mouseDownEvent['y'] === this.mouseClickEvent['y']) {\n        latLongValue = this.getTileGeoLocation(e);\n        latitude = latLongValue['latitude'];\n        longitude = latLongValue['longitude'];\n      }\n\n      var eventArgs_1 = {\n        cancel: false,\n        name: click,\n        target: targetId,\n        x: e.clientX,\n        y: e.clientY,\n        latitude: latitude,\n        longitude: longitude\n      };\n      this.trigger('click', eventArgs_1, function (mouseArgs) {\n        if (targetEle.id.indexOf('shapeIndex') > -1) {\n          if (_this.markerModule && _this.markerModule.sameMarkerData.length > 0 && (_this.zoomModule ? _this.zoomModule.isSingleClick : true)) {\n            mergeSeparateCluster(_this.markerModule.sameMarkerData, _this, getElement(_this.element.id + '_Markers_Group'));\n            _this.markerModule.sameMarkerData = [];\n          }\n\n          if (getElement(_this.element.id + '_mapsTooltip') && _this.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') > -1) {\n            removeElement(_this.element.id + '_mapsTooltip');\n          }\n        }\n\n        if (_this.markerModule) {\n          _this.markerModule.markerClick(e);\n\n          _this.markerModule.markerClusterClick(e);\n        }\n\n        if (_this.bubbleModule) {\n          _this.bubbleModule.bubbleClick(e);\n        }\n\n        if (!eventArgs_1.cancel) {\n          _this.notify(click, targetEle);\n        }\n\n        if (!eventArgs_1.cancel && targetEle.id.indexOf('shapeIndex') !== -1) {\n          var layerIndex_1 = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n          var shapeSelectedEventArgs = triggerShapeEvent(targetId, _this.layers[layerIndex_1].selectionSettings, _this, shapeSelected);\n\n          if (!shapeSelectedEventArgs.cancel && _this.selectionModule && !isNullOrUndefined(_this.shapeSelected)) {\n            customizeStyle(_this.selectionModule.selectionType + 'selectionMap', _this.selectionModule.selectionType + 'selectionMapStyle', shapeSelectedEventArgs);\n          } else if (shapeSelectedEventArgs.cancel && _this.selectionModule && isNullOrUndefined(shapeSelectedEventArgs['data'])) {\n            removeClass(targetEle);\n\n            _this.selectionModule.removedSelectionList(targetEle);\n          }\n        }\n      });\n    }\n  };\n  /**\n   * This method is used to perform operations when mouse click on maps.\n   * @param e - Specifies the pointer event on maps.\n   */\n\n\n  Maps.prototype.mouseEndOnMap = function (e) {\n    var targetEle = e.target;\n    var targetId = targetEle.id;\n    var pageX;\n    var pageY;\n    var target;\n    var touchArg;\n    var rect = this.element.getBoundingClientRect();\n    var element = e.target;\n\n    if (e.type.indexOf('touch') !== -1) {\n      this.isTouch = true;\n      touchArg = e;\n      pageX = touchArg.changedTouches[0].pageX;\n      pageY = touchArg.changedTouches[0].pageY;\n      target = touchArg.target;\n    } else {\n      this.isTouch = e.pointerType === 'touch';\n      pageX = e.pageX;\n      pageY = e.pageY;\n      target = e.target;\n    }\n\n    if (this.isTouch) {\n      this.titleTooltip(e, pageX, pageY, true);\n\n      if (!isNullOrUndefined(this.legendModule)) {\n        this.legendTooltip(e, e.pageX, e.pageY, true);\n      }\n    }\n\n    this.notify(Browser.touchEndEvent, e);\n    e.preventDefault();\n    return false;\n  };\n  /**\n   * This method is used to perform operations when mouse is clicked down on maps.\n   * @param e - Specifies the pointer event on maps.\n   */\n\n\n  Maps.prototype.mouseDownOnMap = function (e) {\n    var pageX;\n    var pageY;\n    var target;\n    var touchArg;\n    this.mouseDownEvent = {\n      x: e.x,\n      y: e.y\n    };\n    var rect = this.element.getBoundingClientRect();\n    var element = e.target;\n\n    if (element.id.indexOf('_ToolBar') === -1) {\n      var markerModule = this.markerModule;\n\n      if (element.id.indexOf('shapeIndex') > -1 || element.id.indexOf('Tile') > -1) {\n        if (markerModule && markerModule.sameMarkerData.length > 0 && (this.zoomModule ? this.zoomModule.isSingleClick : true)) {\n          mergeSeparateCluster(markerModule.sameMarkerData, this, getElement(this.element.id + '_Markers_Group'));\n          markerModule.sameMarkerData = [];\n        }\n      }\n\n      if (markerModule) {\n        markerModule.markerClick(e);\n        markerModule.markerClusterClick(e);\n      }\n\n      if (this.bubbleModule) {\n        this.bubbleModule.bubbleClick(e);\n      }\n    }\n\n    this.notify(Browser.touchStartEvent, e);\n  };\n  /**\n   * This method is used to perform operations when performing the double click operation on maps.\n   * @param e - Specifies the pointer event.\n   * @blazorProperty 'PerformDoubleClick'\n   */\n\n\n  Maps.prototype.mapsOnDoubleClick = function (e) {\n    this.notify('dblclick', e);\n  };\n  /**\n   * This method is used to perform operations while performing mouse over on maps.\n   * @param e - Specifies the pointer event on maps.\n   */\n\n  /* tslint:disable:no-string-literal */\n\n\n  Maps.prototype.mouseMoveOnMap = function (e) {\n    var pageX;\n    var pageY;\n    var touchArg;\n    var target;\n    var touches = null;\n    target = e.type === 'touchmove' ? e.target : target = e.target; // if (target.id.indexOf('shapeIndex') !== -1 && !this.highlightSettings.enable) {\n    //     triggerShapeEvent(target.id, this.highlightSettings, this, shapeHighlight);\n    // }\n\n    if (this.markerModule) {\n      this.markerModule.markerMove(e);\n      this.markerModule.markerClusterMouseMove(e);\n    }\n\n    if (this.bubbleModule) {\n      this.bubbleModule.bubbleMove(e);\n    }\n\n    this.onMouseMove(e);\n    this.notify(Browser.touchMoveEvent, e);\n  };\n  /**\n   * This method is used to perform operations when mouse move event is performed on maps.\n   * @param e - Specifies the pointer event on maps.\n   */\n\n\n  Maps.prototype.onMouseMove = function (e) {\n    var element = e.target;\n    var pageX;\n    var pageY;\n    var target;\n    var touchArg;\n\n    if (!this.isTouch) {\n      this.titleTooltip(e, e.pageX, e.pageY);\n\n      if (!isNullOrUndefined(this.legendModule)) {\n        this.legendTooltip(e, e.pageX, e.pageY, true);\n      }\n    }\n\n    return false;\n  };\n\n  Maps.prototype.legendTooltip = function (event, x, y, isTouch) {\n    var targetId = event.target.id;\n    var legendText;\n    var page = this.legendModule.currentPage;\n    var legendIndex = event.target.id.split('_Index_')[1];\n    var collection;\n    page = this.legendModule.totalPages.length <= this.legendModule.currentPage ? this.legendModule.totalPages.length - 1 : this.legendModule.currentPage < 0 ? 0 : this.legendModule.currentPage;\n    var count = this.legendModule.totalPages.length !== 0 ? this.legendModule.totalPages[page]['Collection'].length : this.legendModule.totalPages.length;\n\n    for (var i = 0; i < count; i++) {\n      collection = this.legendModule.totalPages[page]['Collection'][i];\n      legendText = collection['DisplayText'];\n      targetId = event.target['id'];\n      legendIndex = event.target['id'].split('_Index_')[1];\n\n      if (targetId === this.element.id + '_Legend_Text_Index_' + legendIndex && event.target.textContent.indexOf('...') > -1 && collection['idIndex'] === parseInt(legendIndex, 10)) {\n        showTooltip(legendText, this.legendSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Legend_Text_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n      }\n    }\n\n    if (targetId !== this.element.id + '_Legend_Text_Index_' + legendIndex) {\n      removeElement(this.element.id + '_EJ2_Legend_Text_Tooltip');\n    }\n  };\n\n  Maps.prototype.titleTooltip = function (event, x, y, isTouch) {\n    var targetId = event.target.id;\n\n    if (targetId === this.element.id + '_LegendTitle' && event.target.textContent.indexOf('...') === -1) {\n      showTooltip(this.legendSettings.title.text, this.legendSettings.titleStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_LegendTitle_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n    } else {\n      removeElement(this.element.id + '_EJ2_LegendTitle_Tooltip');\n    }\n\n    if (targetId === this.element.id + '_Map_title' && event.target.textContent.indexOf('...') > -1) {\n      showTooltip(this.titleSettings.text, this.titleSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Title_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n    } else {\n      removeElement(this.element.id + '_EJ2_Title_Tooltip');\n    }\n  };\n  /*\n   /**\n   * This method is used to perform operations while resizing the window.\n   * @param e - Specifies the arguments of window resize event.\n   */\n\n\n  Maps.prototype.mapsOnResize = function (e) {\n    var _this = this;\n\n    this.isResize = true;\n    var args = {\n      name: resize,\n      previousSize: this.availableSize,\n      currentSize: new Size(0, 0),\n      maps: !this.isBlazor ? this : null\n    };\n\n    if (this.resizeTo) {\n      clearTimeout(this.resizeTo);\n    }\n\n    if (this.element.classList.contains('e-maps')) {\n      this.resizeTo = setTimeout(function () {\n        _this.unWireEVents();\n\n        _this.createSVG();\n\n        _this.refreshing = true;\n\n        _this.wireEVents();\n\n        args.currentSize = _this.availableSize;\n\n        _this.trigger(resize, args);\n\n        _this.render();\n      }, 500);\n    }\n\n    return false;\n  };\n  /**\n   * This method is used to zoom the map by specifying the center position.\n   * @param centerPosition - Specifies the center position for maps.\n   * @param zoomFactor - Specifies the zoom factor for maps.\n   */\n\n\n  Maps.prototype.zoomByPosition = function (centerPosition, zoomFactor) {\n    var factor = this.mapLayerPanel.calculateFactor(this.layersCollection[0]);\n    var position;\n    var size = this.mapAreaRect;\n\n    if (!this.isTileMap && this.zoomModule) {\n      if (!isNullOrUndefined(centerPosition)) {\n        position = convertGeoToPoint(centerPosition.latitude, centerPosition.longitude, factor, this.layersCollection[0], this);\n        var mapRect = document.getElementById(this.element.id + '_Layer_Collections').getBoundingClientRect();\n        var svgRect = this.svgObject.getBoundingClientRect();\n        var xDiff = Math.abs(mapRect.left - svgRect.left) / this.scale;\n        var yDiff = Math.abs(mapRect.top - svgRect.top) / this.scale;\n        var x = this.translatePoint.x + xDiff;\n        var y = this.translatePoint.y + yDiff;\n        this.scale = zoomFactor;\n        this.translatePoint.x = ((mapRect.left < svgRect.left ? x : 0) + size.width / 2 - position.x * zoomFactor) / zoomFactor;\n        this.translatePoint.y = ((mapRect.top < svgRect.top ? y : 0) + size.height / 2 - position.y * zoomFactor) / zoomFactor;\n        this.zoomModule.applyTransform();\n      } else {\n        position = {\n          x: size.width / 2,\n          y: size.height / 2\n        };\n        this.zoomModule.performZooming(position, zoomFactor, zoomFactor > this.scale ? 'ZoomIn' : 'ZoomOut');\n      }\n    } else if (this.zoomModule) {\n      this.tileZoomLevel = zoomFactor;\n      this.tileTranslatePoint = this.mapLayerPanel['panTileMap'](this.availableSize.width, this.availableSize.height, {\n        x: centerPosition.longitude,\n        y: centerPosition.latitude\n      });\n      this.mapLayerPanel.generateTiles(zoomFactor, this.tileTranslatePoint, null, new BingMap(this));\n    }\n  };\n  /**\n   * This method is used to perform panning by specifying the direction.\n   * @param direction - Specifies the direction in which the panning is performed.\n   * @param mouseLocation - Specifies the location of the mouse pointer in maps.\n   */\n\n\n  Maps.prototype.panByDirection = function (direction, mouseLocation) {\n    var xDiff = 0;\n    var yDiff = 0;\n\n    switch (direction) {\n      case 'Left':\n        xDiff = -(this.mapAreaRect.width / 7);\n        break;\n\n      case 'Right':\n        xDiff = this.mapAreaRect.width / 7;\n        break;\n\n      case 'Top':\n        yDiff = -(this.mapAreaRect.height / 7);\n        break;\n\n      case 'Bottom':\n        yDiff = this.mapAreaRect.height / 7;\n        break;\n    }\n\n    if (this.zoomModule) {\n      this.zoomModule.panning(direction, xDiff, yDiff, mouseLocation);\n    }\n  };\n  /**\n   * This method is used to add the layers dynamically to the maps.\n   * @param layer - Specifies the layer for the maps.\n   */\n\n\n  Maps.prototype.addLayer = function (layer) {\n    this.layers.push(new LayerSettings(this.layers[0], 'layers', layer));\n    this.refresh();\n  };\n  /**\n   * This method is used to remove a layer from map.\n   * @param index - Specifies the index number of the layer to be removed.\n   */\n\n\n  Maps.prototype.removeLayer = function (index) {\n    this.layers.splice(index, 1);\n    this.refresh();\n  };\n  /**\n   * This method is used to add markers dynamically in the maps.\n   * If we provide the index value of the layer in which the marker to be added and the coordinates\n   * of the marker as parameters, the marker will be added in the location.\n   * @param layerIndex - Specifies the index number of the layer.\n   * @param marker - Specifes the settings of the marker to be added.\n   */\n\n\n  Maps.prototype.addMarker = function (layerIndex, markerCollection) {\n    var layerEle = document.getElementById(this.element.id + '_LayerIndex_' + layerIndex);\n\n    if (markerCollection.length > 0 && layerEle) {\n      for (var _i = 0, markerCollection_1 = markerCollection; _i < markerCollection_1.length; _i++) {\n        var newMarker = markerCollection_1[_i];\n        this.layersCollection[layerIndex].markerSettings.push(new MarkerSettings(this, 'markerSettings', newMarker));\n      }\n\n      var markerModule = new Marker(this);\n      markerModule.markerRender(layerEle, layerIndex, this.mapLayerPanel['currentFactor'], 'AddMarker');\n      this.arrangeTemplate();\n    }\n  };\n  /**\n   * This method is used to select the geometric shape element in the maps component.\n   * @param layerIndex - Specifies the index of the layer in maps.\n   * @param propertyName - Specifies the property name from the data source.\n   * @param name - Specifies the name of the shape that is selected.\n   * @param enable - Specifies the shape selection to be enabled.\n   */\n\n\n  Maps.prototype.shapeSelection = function (layerIndex, propertyName, name, enable) {\n    var targetEle;\n    var popertyNameArray = Array.isArray(propertyName) ? propertyName : Array(propertyName);\n\n    if (isNullOrUndefined(enable)) {\n      enable = true;\n    }\n\n    var selectionsettings = this.layers[layerIndex].selectionSettings;\n\n    if (!selectionsettings.enableMultiSelect && this.legendSelection && enable) {\n      this.removeShapeSelection();\n    }\n\n    if (selectionsettings.enable) {\n      var targetId = void 0;\n      var dataIndex = void 0;\n      var shapeIndex = void 0;\n      var shapeDataValue = void 0;\n      var data = void 0;\n      var shapeData = this.layers[layerIndex].shapeData['features'];\n\n      for (var i = 0; i < shapeData.length; i++) {\n        for (var j = 0; j < popertyNameArray.length; j++) {\n          var propertyName_1 = !isNullOrUndefined(shapeData[i]['properties'][popertyNameArray[j]]) && isNaN(shapeData[i]['properties'][popertyNameArray[j]]) ? shapeData[i]['properties'][popertyNameArray[j]].toLowerCase() : shapeData[i]['properties'][popertyNameArray[j]];\n          var shapeName = !isNullOrUndefined(name) ? name.toLowerCase() : name;\n\n          if (propertyName_1 === shapeName) {\n            var k = checkShapeDataFields(this.layers[layerIndex].dataSource, shapeData[i]['properties'], this.layers[layerIndex].shapeDataPath, this.layers[layerIndex].shapePropertyPath, this.layers[layerIndex]);\n            targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_' + (!isNullOrUndefined(k) ? k.toString() : 'undefined');\n            targetEle = getElement(targetId);\n\n            if (isNullOrUndefined(k) && isNullOrUndefined(targetEle)) {\n              targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_null';\n              targetEle = getElement(targetId);\n            }\n\n            shapeIndex = parseInt(targetEle.id.split('_shapeIndex_')[1].split('_')[0], 10);\n            shapeDataValue = this.layers[layerIndex].shapeData['features']['length'] > shapeIndex ? this.layers[layerIndex].shapeData['features'][shapeIndex]['properties'] : null;\n            dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n            data = isNullOrUndefined(dataIndex) ? null : this.layers[layerIndex].dataSource[dataIndex];\n\n            if (enable) {\n              triggerItemSelectionEvent(selectionsettings, this, targetEle, shapeDataValue, data);\n              this.shapeSelectionClass = getElement('ShapeselectionMap');\n\n              if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1) {\n                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n              }\n\n              var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n\n              if (shapeToggled) {\n                targetEle.setAttribute('class', 'ShapeselectionMapStyle');\n\n                if (this.selectedElementId.indexOf(targetEle.getAttribute('id')) === -1) {\n                  this.selectedElementId.push(targetEle.getAttribute('id'));\n                }\n\n                if (!selectionsettings.enableMultiSelect) {\n                  return;\n                }\n              }\n            } else {\n              this.legendSelection = !selectionsettings.enableMultiSelect && !this.legendSelection ? true : this.legendSelection;\n\n              if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1 && targetEle.getAttribute('class') === 'ShapeselectionMapStyle') {\n                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n              }\n\n              var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n\n              if (shapeToggled) {\n                removeClass(targetEle);\n                var selectedElementIdIndex = this.selectedElementId.indexOf(targetEle.getAttribute('id'));\n\n                if (selectedElementIdIndex !== -1) {\n                  this.selectedElementId.splice(selectedElementIdIndex, 1);\n\n                  if (!selectionsettings.enableMultiSelect && this.legendSelection && this.selectedElementId.length > 0) {\n                    this.removeShapeSelection();\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * This method is used to zoom the maps component based on the provided coordinates.\n   * @param minLatitude - Specifies the minimum latitude to be zoomed.\n   * @param minLongitude - Specifies the minimum latitude to be zoomed.\n   * @param maxLatitude - Specifies the maximum latitude to be zoomed.\n   * @param maxLongitude - Specifies the maximum longitude to be zoomed.\n   */\n\n\n  Maps.prototype.zoomToCoordinates = function (minLatitude, minLongitude, maxLatitude, maxLongitude) {\n    var _a, _b;\n\n    var centerLatitude;\n    var centerLongtitude;\n    var isTwoCoordinates = false;\n\n    if (isNullOrUndefined(maxLatitude) && isNullOrUndefined(maxLongitude) || isNullOrUndefined(minLatitude) && isNullOrUndefined(minLongitude)) {\n      minLatitude = isNullOrUndefined(minLatitude) ? 0 : minLatitude;\n      minLongitude = isNullOrUndefined(minLatitude) ? 0 : minLongitude;\n      maxLatitude = isNullOrUndefined(maxLatitude) ? minLatitude : maxLatitude;\n      maxLongitude = isNullOrUndefined(maxLongitude) ? minLongitude : maxLongitude;\n      isTwoCoordinates = true;\n    }\n\n    if (minLatitude > maxLatitude) {\n      _a = [maxLatitude, minLatitude], minLatitude = _a[0], maxLatitude = _a[1];\n    }\n\n    if (minLongitude > maxLongitude) {\n      _b = [maxLongitude, minLongitude], minLongitude = _b[0], maxLongitude = _b[1];\n    }\n\n    if (!isTwoCoordinates) {\n      centerLatitude = (minLatitude + maxLatitude) / 2;\n      centerLongtitude = (minLongitude + maxLongitude) / 2;\n    } else {\n      centerLatitude = minLatitude + maxLatitude;\n      centerLongtitude = minLongitude + maxLongitude;\n    }\n\n    this.centerLatOfGivenLocation = centerLatitude;\n    this.centerLongOfGivenLocation = centerLongtitude;\n    this.minLatOfGivenLocation = minLatitude;\n    this.minLongOfGivenLocation = minLongitude;\n    this.maxLatOfGivenLocation = maxLatitude;\n    this.maxLongOfGivenLocation = maxLongitude;\n    this.zoomNotApplied = true;\n    this.scaleOfGivenLocation = calculateZoomLevel(minLatitude, maxLatitude, minLongitude, maxLongitude, this.mapAreaRect.width, this.mapAreaRect.height, this);\n    var zoomArgs;\n    zoomArgs = {\n      cancel: false,\n      name: 'zoom',\n      type: zoomIn,\n      maps: !this.isBlazor ? this : null,\n      tileTranslatePoint: {},\n      translatePoint: {},\n      tileZoomLevel: this.isTileMap ? {\n        previous: this.tileZoomLevel,\n        current: this.scaleOfGivenLocation\n      } : {},\n      scale: !this.isTileMap ? {\n        previous: this.scale,\n        current: this.scaleOfGivenLocation\n      } : {\n        previous: this.tileZoomLevel,\n        current: this.scaleOfGivenLocation\n      }\n    };\n    this.trigger('zoom', zoomArgs);\n    this.refresh();\n  };\n  /**\n   * This method is used to remove multiple selected shapes in the maps.\n   */\n\n\n  Maps.prototype.removeShapeSelection = function () {\n    var selectedElements = this.selectedElementId.length;\n\n    for (var i = 0; i < selectedElements; i++) {\n      removeClass(getElementByID(this.selectedElementId[0]));\n      this.selectedElementId.splice(0, 1);\n    }\n\n    if (this.legendSettings.visible) {\n      var legendSelectedElements = this.legendSelectionCollection.length;\n\n      for (var i = 0; i < legendSelectedElements; i++) {\n        removeClass(getElementByID(this.legendSelectionCollection[i]['legendElement']['id']));\n        this.selectedLegendElementId.splice(0, 1);\n      }\n    }\n\n    this.shapeSelectionItem = [];\n    this.legendSelectionCollection = [];\n  };\n  /**\n   * This method is used to set culture for maps component.\n   */\n\n\n  Maps.prototype.setCulture = function () {\n    this.intl = new Internationalization();\n    this.setLocaleConstants();\n    this.localeObject = new L10n(this.getModuleName(), this.defaultLocalConstants, this.locale);\n  };\n  /**\n   * This method to set locale constants to the maps component.\n   */\n\n\n  Maps.prototype.setLocaleConstants = function () {\n    // Need to modify after the api confirm\n    this.defaultLocalConstants = {\n      ZoomIn: 'Zoom in',\n      Zoom: 'Zoom',\n      ZoomOut: 'Zoom out',\n      Pan: 'Pan',\n      Reset: 'Reset'\n    };\n  };\n  /**\n   * This method disposes the maps component.\n   */\n\n\n  Maps.prototype.destroy = function () {\n    this.unWireEVents();\n    this.shapeSelectionItem = [];\n    this.toggledShapeElementId = [];\n    this.toggledLegendId = [];\n    this.legendSelectionCollection = [];\n    this.selectedLegendElementId = [];\n    this.selectedNavigationElementId = [];\n    this.selectedBubbleElementId = [];\n    this.selectedMarkerElementId = [];\n    this.selectedElementId = [];\n    this.dataLabelShape = [];\n    this.zoomShapeCollection = [];\n    this.zoomLabelPositions = [];\n    this.mouseDownEvent = {\n      x: null,\n      y: null\n    };\n    this.mouseClickEvent = {\n      x: null,\n      y: null\n    };\n\n    if (document.getElementById('mapsmeasuretext')) {\n      document.getElementById('mapsmeasuretext').remove();\n    }\n\n    this.removeSvg();\n\n    _super.prototype.destroy.call(this);\n  };\n  /**\n   * Gets component name\n   */\n\n\n  Maps.prototype.getModuleName = function () {\n    return 'maps';\n  };\n  /**\n   * Gets the properties to be maintained in the persisted state.\n   * @private\n   */\n\n\n  Maps.prototype.getPersistData = function () {\n    var keyEntity = ['translatePoint', 'zoomSettings', 'mapScaleValue', 'tileTranslatePoint', 'baseTranslatePoint', 'scale', 'zoomPersistence', 'defaultState', 'markerZoomedState', 'initialCheck', 'initialZoomLevel', 'initialTileTranslate', 'applyZoomReset', 'markerZoomFactor'];\n    return this.addOnPersist(keyEntity);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   * @private\n   */\n\n\n  Maps.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var render = false;\n    var isMarker = false;\n    var isStaticMapType = false;\n    var layerEle;\n\n    if (newProp['layers']) {\n      var newLayerLength = Object.keys(newProp['layers']).length;\n      layerEle = document.getElementById(this.element.id + '_LayerIndex_' + (newLayerLength - 1));\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'background':\n          this.renderBorder();\n          break;\n\n        case 'height':\n        case 'width':\n        case 'layers':\n        case 'projectionType':\n        case 'centerPosition':\n        case 'legendSettings':\n        case 'zoomSettings':\n        case 'baseLayerIndex':\n          if (prop === 'layers') {\n            var layerPropLength = Object.keys(newProp.layers).length;\n\n            for (var x = 0; x < layerPropLength; x++) {\n              if (!isNullOrUndefined(newProp.layers[x])) {\n                var collection = Object.keys(newProp.layers[x]);\n\n                for (var _b = 0, collection_1 = collection; _b < collection_1.length; _b++) {\n                  var collectionProp = collection_1[_b];\n\n                  if (collectionProp === 'markerSettings') {\n                    isMarker = true;\n                  } else if (collectionProp === 'staticMapType') {\n                    isStaticMapType = true;\n                  }\n                }\n              }\n            }\n          }\n\n          render = true;\n          break;\n\n        case 'locale':\n        case 'currencyCode':\n          _super.prototype.refresh.call(this);\n\n          break;\n      }\n    }\n\n    if (render) {\n      if (newProp.layers && isMarker) {\n        removeElement(this.element.id + '_Markers_Group');\n\n        if (this.isTileMap) {\n          if (this.isBlazor) {\n            this.render();\n          } else {\n            this.mapLayerPanel.renderTileLayer(this.mapLayerPanel, this.layers['currentFactor'], this.layers.length - 1);\n          }\n        } else {\n          this.render();\n        }\n      } else if (newProp.layers && isStaticMapType) {\n        this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length - 1].key, this.staticMapZoom);\n      } else {\n        this.createSVG();\n        this.render();\n      }\n    }\n  };\n  /**\n   * To provide the array of modules needed for maps rendering\n   * @return {ModuleDeclaration[]}\n   * @private\n   */\n\n\n  Maps.prototype.requiredModules = function () {\n    var modules = [];\n    var isVisible = this.findVisibleLayers(this.layers);\n    var annotationEnable = false;\n    this.annotations.map(function (annotation, index) {\n      annotationEnable = annotation.content != null;\n    });\n\n    if (this.isBubbleVisible()) {\n      modules.push({\n        member: 'Bubble',\n        args: [this]\n      });\n    }\n\n    if (isVisible.highlight) {\n      modules.push({\n        member: 'Highlight',\n        args: [this]\n      });\n    }\n\n    if (isVisible.selection) {\n      modules.push({\n        member: 'Selection',\n        args: [this]\n      });\n    }\n\n    if (this.legendSettings.visible) {\n      modules.push({\n        member: 'Legend',\n        args: [this]\n      });\n    }\n\n    if (this.zoomSettings.enable || this.zoomSettings.zoomFactor > this.zoomSettings.minZoom) {\n      modules.push({\n        member: 'Zoom',\n        args: [this]\n      });\n    }\n\n    if (this.isMarkersVisible()) {\n      modules.push({\n        member: 'Marker',\n        args: [this]\n      });\n    }\n\n    if (this.isDataLabelVisible()) {\n      modules.push({\n        member: 'DataLabel',\n        args: [this]\n      });\n    }\n\n    if (this.isNavigationVisible()) {\n      modules.push({\n        member: 'NavigationLine',\n        args: [this]\n      });\n    }\n\n    if (isVisible.tooltip) {\n      modules.push({\n        member: 'MapsTooltip',\n        args: [this]\n      });\n    }\n\n    if (annotationEnable) {\n      modules.push({\n        member: 'Annotations',\n        args: [this, Annotations]\n      });\n    }\n\n    if (this.allowPrint) {\n      modules.push({\n        member: 'Print',\n        args: [this]\n      });\n    }\n\n    if (this.allowImageExport) {\n      modules.push({\n        member: 'ImageExport',\n        args: [this]\n      });\n    }\n\n    if (this.allowPdfExport) {\n      modules.push({\n        member: 'PdfExport',\n        args: [this]\n      });\n    }\n\n    return modules;\n  };\n  /**\n   * To find marker visibility\n   */\n\n\n  Maps.prototype.isMarkersVisible = function () {\n    var isVisible = false;\n    Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n      for (var i = 0; i < layer.markerSettings.length; i++) {\n        if (layer.markerSettings[i].visible) {\n          isVisible = true;\n          break;\n        }\n      }\n    });\n    return isVisible;\n  };\n  /**\n   * To find DataLabel visibility\n   */\n\n\n  Maps.prototype.isDataLabelVisible = function () {\n    var isVisible = false;\n\n    for (var i = 0; i < this.layers.length; i++) {\n      if (this.layers[i].dataLabelSettings.visible) {\n        isVisible = true;\n        break;\n      }\n    }\n\n    return isVisible;\n  };\n  /**\n   * To find navigation line visibility\n   */\n\n\n  Maps.prototype.isNavigationVisible = function () {\n    var isVisible = false;\n    Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n      for (var i = 0; i < layer.navigationLineSettings.length; i++) {\n        if (layer.navigationLineSettings[i].visible) {\n          isVisible = true;\n          break;\n        }\n      }\n    });\n    return isVisible;\n  };\n  /**\n   * To find marker visibility\n   */\n\n\n  Maps.prototype.isBubbleVisible = function () {\n    var isVisible = false;\n\n    for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n      var layer = _a[_i];\n\n      if (this.getBubbleVisible(layer)) {\n        isVisible = true;\n        break;\n      }\n    }\n\n    return isVisible;\n  };\n  /**\n   * To find the bubble visibility from layer\n   * @private\n   */\n\n\n  Maps.prototype.getBubbleVisible = function (layer) {\n    var isVisible = false;\n\n    for (var _i = 0, _a = layer.bubbleSettings; _i < _a.length; _i++) {\n      var bubble = _a[_i];\n\n      if (bubble.visible) {\n        isVisible = true;\n        break;\n      }\n    }\n\n    return isVisible;\n  };\n  /**\n   * This method handles the printing functionality for the maps component.\n   * @param id - Specifies the element to be printed.\n   */\n\n\n  Maps.prototype.print = function (id) {\n    if (this.allowPrint && this.printModule) {\n      this.printModule.print(id);\n    }\n  };\n  /**\n   * This method handles the export functionality for the maps component.\n   * @param type - Specifies the type of the exported file.\n   * @param fileName - Specifies the name of the file with which the rendered maps need to be exported.\n   * @param orientation - Specifies the orientation of the pdf document in exporting.\n   * @param allowDownload - Specifies whether to download as a file or get as base64 string for the file\n   */\n\n\n  Maps.prototype.export = function (type, fileName, orientation, allowDownload) {\n    var _this = this;\n\n    if (isNullOrUndefined(allowDownload)) {\n      allowDownload = true;\n    }\n\n    if (type !== 'PDF' && this.allowImageExport && this.imageExportModule) {\n      return new Promise(function (resolve, reject) {\n        resolve(_this.imageExportModule.export(type, fileName, allowDownload));\n      });\n    } else if (this.allowPdfExport && this.pdfExportModule) {\n      return new Promise(function (resolve, reject) {\n        resolve(_this.pdfExportModule.export(type, fileName, allowDownload, orientation));\n      });\n    }\n\n    return null;\n  };\n  /**\n   * To find visibility of layers and markers for required modules load.\n   */\n\n\n  Maps.prototype.findVisibleLayers = function (layers, isLayerVisible, isBubblevisible, istooltipVisible, isSelection, isHighlight) {\n    if (isLayerVisible === void 0) {\n      isLayerVisible = false;\n    }\n\n    if (isBubblevisible === void 0) {\n      isBubblevisible = false;\n    }\n\n    if (istooltipVisible === void 0) {\n      istooltipVisible = false;\n    }\n\n    if (isSelection === void 0) {\n      isSelection = false;\n    }\n\n    if (isHighlight === void 0) {\n      isHighlight = false;\n    }\n\n    var bubbles;\n    var markers;\n    var navigationLine;\n\n    for (var _i = 0, layers_1 = layers; _i < layers_1.length; _i++) {\n      var layer = layers_1[_i];\n      isLayerVisible = layer.visible || isLayerVisible;\n\n      if (layer.visible) {\n        bubbles = layer.bubbleSettings;\n        markers = layer.markerSettings;\n        navigationLine = layer.navigationLineSettings;\n\n        for (var _a = 0, navigationLine_1 = navigationLine; _a < navigationLine_1.length; _a++) {\n          var navigation = navigationLine_1[_a];\n\n          if (navigation.visible) {\n            isSelection = navigation.highlightSettings.enable || isSelection;\n            isHighlight = navigation.selectionSettings.enable || isHighlight;\n          }\n        }\n\n        for (var _b = 0, markers_1 = markers; _b < markers_1.length; _b++) {\n          var marker = markers_1[_b];\n\n          if (marker.visible) {\n            istooltipVisible = marker.tooltipSettings.visible || istooltipVisible;\n            isSelection = marker.selectionSettings.enable || isSelection;\n            isHighlight = marker.highlightSettings.enable || isHighlight;\n          }\n\n          if (istooltipVisible) {\n            break;\n          }\n        }\n\n        for (var _c = 0, bubbles_1 = bubbles; _c < bubbles_1.length; _c++) {\n          var bubble = bubbles_1[_c];\n\n          if (bubble.visible) {\n            istooltipVisible = bubble.tooltipSettings.visible || istooltipVisible;\n            isSelection = bubble.selectionSettings.enable || isSelection;\n            isHighlight = bubble.highlightSettings.enable || isHighlight;\n          }\n\n          if (istooltipVisible) {\n            break;\n          }\n        }\n\n        istooltipVisible = layer.tooltipSettings.visible || istooltipVisible;\n        isSelection = layer.selectionSettings.enable || isSelection;\n        isHighlight = layer.highlightSettings.enable || isHighlight;\n      }\n\n      if (isLayerVisible && isBubblevisible && istooltipVisible) {\n        break;\n      }\n    }\n\n    return {\n      layer: isLayerVisible,\n      bubble: isBubblevisible,\n      tooltip: istooltipVisible,\n      selection: isSelection,\n      highlight: isHighlight\n    };\n  };\n  /**\n   * This method is used to get the geo location points.\n   * @param {number} layerIndex - Specifies the index number of the layer of the map.\n   * @param {PointerEvent} location - Specifies the location in point format.\n   * @return GeoPosition\n   */\n\n\n  Maps.prototype.getGeoLocation = function (layerIndex, location) {\n    var container = document.getElementById(this.element.id);\n    var pageX = location['layerX'] - container.offsetLeft;\n    var pageY = location['layerY'] - container.offsetTop;\n    var currentLayer = this.layersCollection[layerIndex];\n    var translate = getTranslate(this, currentLayer, false);\n    var translatePoint = translate['location'];\n    var translatePointX = translatePoint.x * this.scale;\n    var translatePointY = translatePoint.y * this.scale;\n    var mapSize = Math.min(this.mapAreaRect.height, this.mapAreaRect.width) * this.mapLayerPanel['currentFactor'] * this.scale;\n    var xx = this.clip(pageX - translatePointX, 0, mapSize - 1) / mapSize - 0.5;\n    var yy = 0.5 - this.clip(pageY - translatePointY, 0, mapSize - 1) / mapSize;\n    var lat = 90 - 360 * Math.atan(Math.exp(-yy * 2 * Math.PI)) / Math.PI;\n    var long = 360 * xx;\n    return {\n      latitude: lat,\n      longitude: long\n    };\n  };\n\n  Maps.prototype.clip = function (value, minVal, maxVal) {\n    return Math.min(Math.max(value, minVal), maxVal);\n  };\n  /**\n   * This method is used to get the geo location points when tile maps is rendered in the maps component.\n   * @param {PointerEvent} - Specifies the location in point format.\n   * @return GeoPosition\n   */\n\n\n  Maps.prototype.getTileGeoLocation = function (location) {\n    var container = document.getElementById(this.element.id);\n    var latLong;\n    var ele = document.getElementById(this.element.id + '_tile_parent');\n    latLong = this.pointToLatLong(location['layerX'] + this.mapAreaRect.x - (ele.offsetLeft - container.offsetLeft), location['layerY'] + this.mapAreaRect.y - (ele.offsetTop - container.offsetTop));\n    return {\n      latitude: latLong['latitude'],\n      longitude: latLong['longitude']\n    };\n  };\n  /**\n   * This method is used to convert the point to latitude and longitude in maps.\n   * @param pageX - Specifies the x value for the page.\n   * @param pageY - Specifies the y value for the page.\n   */\n\n\n  Maps.prototype.pointToLatLong = function (pageX, pageY) {\n    var padding = this.layers[this.layers.length - 1].layerType === 'GoogleStaticMap' ? 0 : 10;\n    pageY = this.zoomSettings.enable ? pageY + padding : pageY;\n    var mapSize = 256 * Math.pow(2, this.tileZoomLevel);\n    var x1 = this.clip(pageX - this.translatePoint.x * this.scale, 0, mapSize - 1) / mapSize - 0.5;\n    var y1 = 0.5 - this.clip(pageY - this.translatePoint.y * this.scale, 0, mapSize - 1) / mapSize;\n    var lat = 90 - 360 * Math.atan(Math.exp(-y1 * 2 * Math.PI)) / Math.PI;\n    var long = 360 * x1;\n    return {\n      latitude: lat,\n      longitude: long\n    };\n  };\n\n  __decorate([Property(null)], Maps.prototype, \"background\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"useGroupingSeparator\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"format\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"width\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"height\", void 0);\n\n  __decorate([Property('MouseMove')], Maps.prototype, \"tooltipDisplayMode\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"allowPrint\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"allowImageExport\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"allowPdfExport\", void 0);\n\n  __decorate([Complex({}, TitleSettings)], Maps.prototype, \"titleSettings\", void 0);\n\n  __decorate([Complex({}, ZoomSettings)], Maps.prototype, \"zoomSettings\", void 0);\n\n  __decorate([Complex({}, LegendSettings)], Maps.prototype, \"legendSettings\", void 0);\n\n  __decorate([Collection([], LayerSettings)], Maps.prototype, \"layers\", void 0);\n\n  __decorate([Collection([], Annotation)], Maps.prototype, \"annotations\", void 0);\n\n  __decorate([Complex({}, Margin)], Maps.prototype, \"margin\", void 0);\n\n  __decorate([Complex({\n    color: '#DDDDDD',\n    width: 0\n  }, Border)], Maps.prototype, \"border\", void 0);\n\n  __decorate([Property('Material')], Maps.prototype, \"theme\", void 0);\n\n  __decorate([Property('Mercator')], Maps.prototype, \"projectionType\", void 0);\n\n  __decorate([Property(0)], Maps.prototype, \"baseLayerIndex\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"description\", void 0);\n\n  __decorate([Property(1)], Maps.prototype, \"tabIndex\", void 0);\n\n  __decorate([Complex({\n    latitude: null,\n    longitude: null\n  }, CenterPosition)], Maps.prototype, \"centerPosition\", void 0);\n\n  __decorate([Complex({}, MapsAreaSettings)], Maps.prototype, \"mapsArea\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"load\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"beforePrint\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"loaded\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"click\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"doubleClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"rightClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"resize\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"tooltipRender\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"legendRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"tooltipRenderComplete\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"shapeSelected\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"itemSelection\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"itemHighlight\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"shapeHighlight\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"layerRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"shapeRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClusterRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClusterClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClusterMouseMove\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerMouseMove\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"dataLabelRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"bubbleRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"bubbleClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"bubbleMouseMove\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"animationComplete\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"annotationRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"zoom\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"pan\", void 0);\n\n  Maps = __decorate([NotifyPropertyChanges], Maps);\n  return Maps;\n}(Component);\n\nexport { Maps };","map":{"version":3,"sources":["/Users/kristalduran/Desktop/PC3-/PC3 Mapa/pc3-mapa/node_modules/@syncfusion/ej2-maps/src/maps/maps.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","NotifyPropertyChanges","Property","Ajax","EventHandler","Browser","isNullOrUndefined","createElement","setValue","extend","Event","remove","L10n","Collection","Internationalization","Complex","isBlazor","updateBlazorTemplate","resetBlazorTemplate","SvgRenderer","Size","createSvg","Point","removeElement","triggerShapeEvent","showTooltip","checkShapeDataFields","getElement","removeClass","getTranslate","triggerItemSelectionEvent","mergeSeparateCluster","customizeStyle","createStyle","ZoomSettings","LegendSettings","LayerSettings","TitleSettings","Border","Margin","MapsAreaSettings","Annotation","CenterPosition","Marker","load","click","loaded","resize","shapeSelected","zoomIn","getThemeStyle","BingMap","LayerPanel","Rect","RectOption","measureText","getElementByID","MapAjax","processResult","findPosition","textTrim","TextOption","renderTextElement","convertGeoToPoint","calculateZoomLevel","Annotations","MarkerSettings","changeBorderWidth","DataManager","Query","Maps","_super","options","element","_this","call","isTileMap","isResize","baseSize","translatePoint","baseTranslatePoint","zoomTranslatePoint","markerZoomedState","zoomPersistence","defaultState","centerPositionChanged","isTileMapSubLayer","markerNullCount","tileTranslatePoint","baseTileTranslatePoint","isDevice","staticMapZoom","zoomSettings","enable","zoomFactor","zoomNotApplied","dataLabelShape","zoomShapeCollection","zoomLabelPositions","mouseDownEvent","x","y","mouseClickEvent","selectedElementId","selectedMarkerElementId","selectedBubbleElementId","selectedNavigationElementId","selectedLegendElementId","legendSelectionCollection","shapeSelections","legendSelection","toggledLegendId","toggledShapeElementId","checkInitialRender","initialTileTranslate","initialCheck","applyZoomReset","markerClusterExpandCheck","markerClusterExpand","shapeSelectionItem","mergePersistMapsData","get","mapSelect","enumerable","configurable","data","window","localStorage","getItem","getModuleName","id","dataObj","JSON","parse","keys","isProtectedOnChange","_i","keys_1","getLocalizedLabel","localeObject","getConstant","preRender","initPrivateVariable","allowServerDataBinding","unWireEVents","wireEVents","setCulture","render","trigger","maps","createSVG","findBaseAndSubLayers","createSecondaryElement","addTabIndex","themeStyle","theme","renderBorder","renderTitle","titleSettings","renderArea","processRequestJsonData","renderComplete","layersCollection","serverProcess","request","response","queryModule","localAjax","ajaxModule","dataModule","forEach","layer","layerIndex","shapeData","query","requiresCount","dataManager","executeQuery","then","e","processResponseJsonData","processAjaxRequest","dataSource","markerSettings","_loop_1","bubbleSettings","_loop_2","type","dataOptions","async","contentType","onSuccess","args","send","sendData","processType","dataType","collection","isBaseLayer","push","j","renderMap","legendModule","legendSettings","visible","renderLegend","layerCount","createTile","zoomModule","createZoomingToolbars","dataLabelModule","dataLabelCollections","mapLayerPanel","measureLayerPanel","appendChild","svgObject","layers","selectionSettings","initialShapeSelection","checkSelection","enableMultiSelect","shapeSelection","shapePath","shapeValue","k","initialMarkerSelection","markerSelectionValues","markerInitialSelection","latitude","longitude","document","getElementById","svg","getBoundingClientRect","tileElement","tileElement1","tile","bottom","top_1","left","parseFloat","style","offsetLeft","titleTextSize","text","textStyle","subTitleTextSize","subtitleSettings","position","mode","width","height","top","offsetTop","legendBorderRect","mapAreaRect","arrangeTemplate","blazor","blazorTemplates","annotationsModule","renderAnnotationElements","zoomingChange","isResized","markerSelection","map","targetElement","border","color","scale","markerSelectionProperties","opacity","fill","cancel","body","setAttribute","markerIndex","targetId","markerLength","dataLabelSettings","template","mapsArea","background","areaBackgroundColor","rect","renderer","drawRectangle","description","tabIndex","toString","layerCollectionEle","tileRect","tileSvgRect","markerTemplateElements","getElementsByClassName","templateGroupEle","toolBarGroup","alignToolBar","elements","childElementCount","childNodes","childElement","tagName","split","childNode","indexOf","previousScale","applyTransform","secondaryElement","styles","pointerEvents","templateElements","layerType","layerOffset","elementOffset","offSetLetValue","Math","abs","offSetTopValue","currentTemplate","transform","mainLayer","padding","urlTemplate","ele","ele1","baseIndex","baseLayerIndex","mainLayers","subLayers","baseLayer","subLayer","subLayerIndex","borderElement","querySelector","backgroundColor","borderRect","availableSize","title","bounds","groupEle","margin","right","fontFamily","size","titleFontSize","createGroup","trimmedTitle","elementSize","location_1","alignment","titleBounds","titleFontColor","subTitleFontColor","removeSvg","annotations","removeChild","firstChild","hasChildNodes","parentNode","add","mapsOnClick","mapsOnDoubleClick","touchStartEvent","mouseDownOnMap","touchMoveEvent","mouseMoveOnMap","touchEndEvent","mouseEndOnMap","mouseLeaveOnMap","addEventListener","isTouch","mapsOnResize","bind","removeEventListener","removeShapeHighlightCollection","targetEle","latLongValue","getGeoLocation","getTileGeoLocation","eventArgs_1","name","clientX","clientY","mouseArgs","markerModule","sameMarkerData","isSingleClick","mapsTooltipModule","tooltipTargetID","markerClick","markerClusterClick","bubbleModule","bubbleClick","notify","layerIndex_1","parseInt","shapeSelectedEventArgs","selectionModule","selectionType","removedSelectionList","pageX","pageY","touchArg","changedTouches","pointerType","titleTooltip","legendTooltip","preventDefault","touches","markerMove","markerClusterMouseMove","bubbleMove","onMouseMove","event","legendText","page","currentPage","legendIndex","totalPages","count","textContent","offsetWidth","offsetHeight","titleStyle","previousSize","currentSize","resizeTo","clearTimeout","classList","contains","setTimeout","refreshing","zoomByPosition","centerPosition","factor","calculateFactor","mapRect","svgRect","xDiff","yDiff","performZooming","tileZoomLevel","generateTiles","panByDirection","direction","mouseLocation","panning","addLayer","refresh","removeLayer","index","splice","addMarker","markerCollection","layerEle","markerCollection_1","newMarker","markerRender","propertyName","popertyNameArray","isArray","selectionsettings","removeShapeSelection","dataIndex","shapeIndex","shapeDataValue","propertyName_1","isNaN","toLowerCase","shapeName","shapeDataPath","shapePropertyPath","shapeSelectionClass","shapeHighLightAndSelection","shapeToggled","getAttribute","selectedElementIdIndex","zoomToCoordinates","minLatitude","minLongitude","maxLatitude","maxLongitude","_a","_b","centerLatitude","centerLongtitude","isTwoCoordinates","centerLatOfGivenLocation","centerLongOfGivenLocation","minLatOfGivenLocation","minLongOfGivenLocation","maxLatOfGivenLocation","maxLongOfGivenLocation","scaleOfGivenLocation","zoomArgs","previous","current","selectedElements","legendSelectedElements","intl","setLocaleConstants","defaultLocalConstants","locale","ZoomIn","Zoom","ZoomOut","Pan","Reset","destroy","getPersistData","keyEntity","addOnPersist","onPropertyChanged","newProp","oldProp","isMarker","isStaticMapType","newLayerLength","prop","layerPropLength","collection_1","collectionProp","renderTileLayer","renderGoogleMap","requiredModules","modules","isVisible","findVisibleLayers","annotationEnable","annotation","content","isBubbleVisible","member","highlight","selection","minZoom","isMarkersVisible","isDataLabelVisible","isNavigationVisible","tooltip","allowPrint","allowImageExport","allowPdfExport","navigationLineSettings","getBubbleVisible","bubble","print","printModule","export","fileName","orientation","allowDownload","imageExportModule","Promise","resolve","reject","pdfExportModule","isLayerVisible","isBubblevisible","istooltipVisible","isSelection","isHighlight","bubbles","markers","navigationLine","layers_1","navigationLine_1","navigation","highlightSettings","markers_1","marker","tooltipSettings","_c","bubbles_1","location","container","currentLayer","translate","translatePointX","translatePointY","mapSize","min","xx","clip","yy","lat","atan","exp","PI","long","value","minVal","maxVal","max","latLong","pointToLatLong","pow","x1","y1"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * Maps Component file\n */\nimport { Component, NotifyPropertyChanges, Property, Ajax } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, isNullOrUndefined, createElement, setValue, extend } from '@syncfusion/ej2-base';\nimport { Event, remove, L10n, Collection, Internationalization, Complex, isBlazor } from '@syncfusion/ej2-base';\nimport { updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { Size, createSvg, Point, removeElement, triggerShapeEvent, showTooltip, checkShapeDataFields } from './utils/helper';\nimport { getElement, removeClass, getTranslate, triggerItemSelectionEvent, mergeSeparateCluster, customizeStyle } from './utils/helper';\nimport { createStyle } from './utils/helper';\nimport { ZoomSettings, LegendSettings } from './model/base';\nimport { LayerSettings, TitleSettings, Border, Margin, MapsAreaSettings, Annotation, CenterPosition } from './model/base';\nimport { Marker } from './layers/marker';\nimport { load, click, loaded, resize, shapeSelected, zoomIn } from './model/constants';\nimport { getThemeStyle } from './model/theme';\nimport { BingMap } from './layers/bing-map';\nimport { LayerPanel } from './layers/layer-panel';\nimport { Rect, RectOption, measureText, getElementByID, MapAjax, processResult } from '../maps/utils/helper';\nimport { findPosition, textTrim, TextOption, renderTextElement, convertGeoToPoint, calculateZoomLevel } from '../maps/utils/helper';\nimport { Annotations } from '../maps/user-interaction/annotation';\nimport { MarkerSettings } from './index';\nimport { changeBorderWidth } from './index';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\n/**\n * Represents the Maps control.\n * ```html\n * <div id=\"maps\"/>\n * <script>\n *   var maps = new Maps();\n *   maps.appendTo(\"#maps\");\n * </script>\n * ```\n */\nvar Maps = /** @class */ (function (_super) {\n    __extends(Maps, _super);\n    /**\n     * Constructor for creating the widget\n     */\n    function Maps(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Check layer whether is geometry or tile\n         * @private\n         */\n        _this.isTileMap = false;\n        /**\n         * Resize the map\n         */\n        _this.isResize = false;\n        /** @private */\n        _this.baseSize = new Size(0, 0);\n        /** @public */\n        _this.translatePoint = new Point(0, 0);\n        /** @private */\n        _this.baseTranslatePoint = new Point(0, 0);\n        /** @public */\n        _this.zoomTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.markerZoomedState = true;\n        /** @private */\n        _this.zoomPersistence = false;\n        /** @private */\n        _this.defaultState = true;\n        /** @private */\n        _this.centerPositionChanged = false;\n        /** @private */\n        _this.isTileMapSubLayer = false;\n        /** @private */\n        _this.markerNullCount = 0;\n        /** @private */\n        _this.tileTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.baseTileTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.isDevice = false;\n        /** @private */\n        _this.staticMapZoom = _this.zoomSettings.enable ? _this.zoomSettings.zoomFactor : 0;\n        /** @private */\n        _this.zoomNotApplied = false;\n        /** @public */\n        _this.dataLabelShape = [];\n        _this.zoomShapeCollection = [];\n        _this.zoomLabelPositions = [];\n        _this.mouseDownEvent = { x: null, y: null };\n        _this.mouseClickEvent = { x: null, y: null };\n        /** @private */\n        _this.selectedElementId = [];\n        /** @private */\n        _this.selectedMarkerElementId = [];\n        /** @private */\n        _this.selectedBubbleElementId = [];\n        /** @private */\n        _this.selectedNavigationElementId = [];\n        /** @private */\n        _this.selectedLegendElementId = [];\n        /** @private */\n        _this.legendSelectionCollection = [];\n        /** @private */\n        _this.shapeSelections = true;\n        /** @private */\n        _this.legendSelection = true;\n        /** @private */\n        _this.toggledLegendId = [];\n        /** @private */\n        _this.toggledShapeElementId = [];\n        /** @private */\n        _this.checkInitialRender = true;\n        /** @private */\n        _this.initialTileTranslate = new Point(0, 0);\n        /** @private */\n        _this.initialCheck = true;\n        /** @private */\n        _this.applyZoomReset = false;\n        /** @private */\n        _this.markerClusterExpandCheck = false;\n        /** @private */\n        _this.markerClusterExpand = false;\n        /** @private */\n        _this.shapeSelectionItem = [];\n        setValue('mergePersistData', _this.mergePersistMapsData, _this);\n        return _this;\n    }\n    Object.defineProperty(Maps.prototype, \"isShapeSelected\", {\n        /**\n         * Specifies whether the shape is selected in the maps or not..\n         */\n        get: function () {\n            return this.mapSelect;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    /**\n     * To manage persist maps data\n     */\n    Maps.prototype.mergePersistMapsData = function () {\n        var data;\n        if (!isNullOrUndefined(window.localStorage)) {\n            data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        }\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj = JSON.parse(data);\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    extend(this[key], dataObj[key]);\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Maps.prototype.getLocalizedLabel = function (key) {\n        return this.localeObject.getConstant(key);\n    };\n    /**\n     * Initializing pre-required values.\n     */\n    Maps.prototype.preRender = function () {\n        this.isDevice = Browser.isDevice;\n        this.isBlazor = isBlazor();\n        this.initPrivateVariable();\n        this.allowServerDataBinding = false;\n        this.unWireEVents();\n        this.wireEVents();\n        this.setCulture();\n    };\n    /**\n     * To Initialize the control rendering.\n     */\n    Maps.prototype.render = function () {\n        this.trigger(load, this.isBlazor ? {} : { maps: this });\n        this.createSVG();\n        this.findBaseAndSubLayers();\n        this.createSecondaryElement();\n        this.addTabIndex();\n        this.themeStyle = getThemeStyle(this.theme);\n        this.renderBorder();\n        this.renderTitle(this.titleSettings, 'title', null, null);\n        this.renderArea();\n        this.processRequestJsonData();\n        this.renderComplete();\n    };\n    /* tslint:disable:no-string-literal */\n    Maps.prototype.processRequestJsonData = function () {\n        var _this = this;\n        var length = this.layersCollection.length - 1;\n        this.serverProcess = { request: 0, response: 0 };\n        var queryModule;\n        var localAjax;\n        var ajaxModule;\n        var dataModule;\n        Array.prototype.forEach.call(this.layersCollection, function (layer, layerIndex) {\n            if (layer.shapeData instanceof DataManager) {\n                _this.serverProcess['request']++;\n                dataModule = layer.shapeData;\n                queryModule = layer.query instanceof Query ? layer.query : _this.isBlazor ? (new Query().requiresCount()) : new Query();\n                var dataManager = dataModule.executeQuery(queryModule);\n                dataManager.then(function (e) {\n                    _this.processResponseJsonData('DataManager', e, layer, 'ShapeData');\n                });\n            }\n            else if (layer.shapeData instanceof MapAjax || layer.shapeData) {\n                if (!isNullOrUndefined(layer.shapeData['dataOptions'])) {\n                    _this.processAjaxRequest(layer, layer.shapeData, 'ShapeData');\n                }\n            }\n            if (layer.dataSource instanceof DataManager) {\n                _this.serverProcess['request']++;\n                dataModule = layer.dataSource;\n                queryModule = layer.query instanceof Query ? layer.query : _this.isBlazor ? (new Query().requiresCount()) : new Query();\n                var dataManager = dataModule.executeQuery(queryModule);\n                dataManager.then(function (e) {\n                    layer.dataSource = processResult(e);\n                });\n            }\n            if (layer.markerSettings.length > 0) {\n                var _loop_1 = function (i) {\n                    if (layer.markerSettings[i].dataSource instanceof DataManager) {\n                        _this.serverProcess['request']++;\n                        dataModule = layer.markerSettings[i].dataSource;\n                        queryModule = layer.markerSettings[i].query instanceof Query ? layer.markerSettings[i].query : _this.isBlazor ?\n                            (new Query().requiresCount()) : new Query();\n                        var dataManager = dataModule.executeQuery(queryModule);\n                        dataManager.then(function (e) {\n                            layer.markerSettings[i].dataSource = processResult(e);\n                        });\n                    }\n                };\n                for (var i = 0; i < layer.markerSettings.length; i++) {\n                    _loop_1(i);\n                }\n            }\n            if (layer.bubbleSettings.length > 0) {\n                var _loop_2 = function (i) {\n                    if (layer.bubbleSettings[i].dataSource instanceof DataManager) {\n                        _this.serverProcess['request']++;\n                        dataModule = layer.bubbleSettings[i].dataSource;\n                        queryModule = layer.bubbleSettings[i].query instanceof Query ? layer.bubbleSettings[i].query : _this.isBlazor ?\n                            (new Query().requiresCount()) : new Query();\n                        var dataManager = dataModule.executeQuery(queryModule);\n                        dataManager.then(function (e) {\n                            layer.bubbleSettings[i].dataSource = processResult(e);\n                        });\n                    }\n                };\n                for (var i = 0; i < layer.bubbleSettings.length; i++) {\n                    _loop_2(i);\n                }\n            }\n            if (layer.dataSource instanceof MapAjax || !isNullOrUndefined(layer.dataSource['dataOptions'])) {\n                _this.processAjaxRequest(layer, layer.dataSource, 'DataSource');\n            }\n            if (_this.serverProcess['request'] === _this.serverProcess['response'] && length === layerIndex) {\n                _this.processResponseJsonData(null);\n            }\n        });\n    };\n    // tslint:disable:no-any\n    Maps.prototype.processAjaxRequest = function (layer, localAjax, type) {\n        var _this = this;\n        var ajaxModule;\n        this.serverProcess['request']++;\n        ajaxModule = new Ajax(localAjax.dataOptions, localAjax.type, localAjax.async, localAjax.contentType);\n        ajaxModule.onSuccess = function (args) {\n            _this.processResponseJsonData('Ajax', args, layer, type);\n        };\n        ajaxModule.send(localAjax.sendData);\n    };\n    /**\n     * This method is used to process the JSON data to render the maps.\n     * @param processType - Specifies the process type in maps.\n     * @param data - Specifies the data for maps.\n     * @param layer - Specifies the layer for the maps.\n     * @param dataType - Specifies the data type for maps.\n     */\n    /* tslint:disable:no-eval */\n    Maps.prototype.processResponseJsonData = function (processType, data, layer, dataType) {\n        this.serverProcess['response']++;\n        if (processType) {\n            if (dataType === 'ShapeData') {\n                layer.shapeData = (processType === 'DataManager') ? processResult(data) : JSON.parse(data);\n            }\n            else {\n                layer.dataSource = (processType === 'DataManager') ? processResult(data) : JSON.parse('[' + data + ']')[0];\n            }\n        }\n        if (!isNullOrUndefined(processType) && this.serverProcess['request'] === this.serverProcess['response']) {\n            var collection = this.layersCollection;\n            this.layersCollection = [];\n            for (var i = 0; i < collection.length; i++) {\n                if (collection[i].isBaseLayer) {\n                    this.layersCollection.push(collection[i]);\n                }\n            }\n            for (var j = 0; j < collection.length; j++) {\n                if (!collection[j].isBaseLayer) {\n                    this.layersCollection.push(collection[j]);\n                }\n            }\n            this.renderMap();\n        }\n        else if (isNullOrUndefined(processType)) {\n            this.renderMap();\n        }\n    };\n    /* tslint:disable:max-func-body-length */\n    Maps.prototype.renderMap = function () {\n        if (this.legendModule && this.legendSettings.visible) {\n            if (!this.isTileMap) {\n                this.legendModule.renderLegend();\n            }\n            else {\n                var layerCount = this.layersCollection.length - 1;\n                if (!this.layersCollection[layerCount].isBaseLayer) {\n                    this.isTileMapSubLayer = true;\n                    this.legendModule.renderLegend();\n                }\n            }\n        }\n        this.createTile();\n        if (this.zoomSettings.enable && this.zoomModule) {\n            this.zoomModule.createZoomingToolbars();\n        }\n        if (!isNullOrUndefined(this.dataLabelModule)) {\n            this.dataLabelModule.dataLabelCollections = [];\n            this.dataLabelShape = [];\n        }\n        this.mapLayerPanel.measureLayerPanel();\n        this.element.appendChild(this.svgObject);\n        for (var i = 0; i < this.layers.length; i++) {\n            if (this.layers[i].selectionSettings && this.layers[i].selectionSettings.enable &&\n                this.layers[i].initialShapeSelection.length > 0 && this.checkInitialRender) {\n                var checkSelection = this.layers[i].selectionSettings.enableMultiSelect;\n                this.layers[i].selectionSettings.enableMultiSelect = checkSelection ? checkSelection : true;\n                var shapeSelection = this.layers[i].initialShapeSelection;\n                for (var j = 0; j < this.layers[i].initialShapeSelection.length; j++) {\n                    this.shapeSelection(i, shapeSelection[j].shapePath, shapeSelection[j].shapeValue, true);\n                }\n                this.layers[i].selectionSettings.enableMultiSelect = checkSelection;\n                if (i === this.layers.length - 1) {\n                    this.checkInitialRender = false;\n                }\n            }\n            for (var k = 0; k < this.layers[i].markerSettings.length; k++) {\n                if (this.layers[i].markerSettings[k].selectionSettings && this.layers[i].markerSettings[k].selectionSettings.enable\n                    && this.layers[i].markerSettings[k].initialMarkerSelection.length > 0) {\n                    var markerSelectionValues = this.layers[i].markerSettings[k].initialMarkerSelection;\n                    for (var j = 0; j < markerSelectionValues.length; j++) {\n                        this.markerInitialSelection(i, k, this.layers[i].markerSettings[k], markerSelectionValues[j].latitude, markerSelectionValues[j].longitude);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(document.getElementById(this.element.id + '_tile_parent'))) {\n            var svg = this.svgObject.getBoundingClientRect();\n            var element = document.getElementById(this.element.id);\n            var tileElement = document.getElementById(this.element.id + '_tile_parent');\n            var tileElement1 = document.getElementById(this.element.id + '_tiles');\n            var tile = tileElement.getBoundingClientRect();\n            var bottom = void 0;\n            var top_1;\n            var left = void 0;\n            left = parseFloat(tileElement.style.left) + element.offsetLeft;\n            var titleTextSize = measureText(this.titleSettings.text, this.titleSettings.textStyle);\n            var subTitleTextSize = measureText(this.titleSettings.subtitleSettings.text, this.titleSettings.subtitleSettings.textStyle);\n            if (this.isTileMap && this.isTileMapSubLayer && this.legendSettings.position === 'Bottom' && this.legendSettings.visible) {\n                if (this.legendSettings.mode !== 'Default') {\n                    if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop + (subTitleTextSize.height / 2)\n                            - (this.legendModule.legendBorderRect.height / 2);\n                    }\n                    else {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop - this.mapAreaRect.y;\n                    }\n                }\n                else {\n                    left = this.legendModule.legendBorderRect.x;\n                    if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop + (subTitleTextSize['height'] / 2)\n                            - this.legendModule.legendBorderRect.y;\n                    }\n                    else {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop + (subTitleTextSize['height'] / 2);\n                    }\n                }\n            }\n            else {\n                bottom = svg.bottom - tile.bottom - element.offsetTop;\n                top_1 = parseFloat(tileElement.style.top) + element.offsetTop;\n            }\n            top_1 = (bottom <= 11) ? top_1 : (top_1 * 2);\n            left = (bottom <= 11) ? left : (left * 2);\n            tileElement.style.top = top_1 + 'px';\n            tileElement.style.left = left + 'px';\n            tileElement1.style.top = top_1 + 'px';\n            tileElement1.style.left = left + 'px';\n        }\n        this.arrangeTemplate();\n        var blazor = this.isBlazor ? this.blazorTemplates() : null;\n        if (this.annotationsModule) {\n            if (this.width !== '0px' && this.height !== '0px' && this.width !== '0%' && this.height !== '0%') {\n                this.annotationsModule.renderAnnotationElements();\n            }\n        }\n        this.zoomingChange();\n        this.trigger(loaded, this.isBlazor ? { isResized: this.isResize } : { maps: this, isResized: this.isResize });\n        this.isResize = false;\n    };\n    /**\n     * @private\n     * To apply color to the initial selected marker\n     */\n    Maps.prototype.markerSelection = function (selectionSettings, map, targetElement, data) {\n        var border = {\n            color: selectionSettings.border.color,\n            width: selectionSettings.border.width / map.scale\n        };\n        var markerSelectionProperties = {\n            opacity: selectionSettings.opacity,\n            fill: selectionSettings.fill,\n            border: border,\n            target: targetElement.id,\n            cancel: false,\n            data: data,\n            maps: map\n        };\n        if (!getElement('MarkerselectionMap')) {\n            document.body.appendChild(createStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties));\n        }\n        else {\n            customizeStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties);\n        }\n        if (this.selectedMarkerElementId.length === 0 || selectionSettings.enableMultiSelect) {\n            targetElement.setAttribute('class', 'MarkerselectionMapStyle');\n        }\n    };\n    /**\n     * @private\n     * initial selection of marker\n     *\n     */\n    Maps.prototype.markerInitialSelection = function (layerIndex, markerIndex, markerSettings, latitude, longitude) {\n        var selectionSettings = markerSettings.selectionSettings;\n        if (selectionSettings.enable) {\n            for (var i = 0; i < markerSettings.dataSource['length']; i++) {\n                var data = markerSettings.dataSource[i];\n                if (data['latitude'] === latitude && data['longitude'] === longitude) {\n                    var targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex +\n                        '_dataIndex_' + i;\n                    this.markerSelection(selectionSettings, this, getElement(targetId), data);\n                }\n            }\n        }\n    };\n    /**\n     * To append blazor templates\n     * @private\n     */\n    Maps.prototype.blazorTemplates = function () {\n        for (var i = 0; i < this.layers.length; i++) {\n            var markerLength = this.layers[i].markerSettings.length - 1;\n            if (markerLength >= 0) {\n                if (this.layers[i].dataLabelSettings.visible || this.layers[i].markerSettings[markerLength].template) {\n                    updateBlazorTemplate(this.element.id + '_LabelTemplate', 'LabelTemplate', this.layers[i].dataLabelSettings);\n                    for (var j = 0; j < this.layers[i].markerSettings.length; j++) {\n                        updateBlazorTemplate(this.element.id + '_MarkerTemplate' + j, 'MarkerTemplate', this.layers[i].markerSettings[j]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Render the map area border\n     */\n    Maps.prototype.renderArea = function () {\n        var width = this.mapsArea.border.width;\n        var background = this.mapsArea.background;\n        if (width > 0 || (background || this.themeStyle.areaBackgroundColor)) {\n            var rect = new RectOption(this.element.id + '_MapAreaBorder', background || this.themeStyle.areaBackgroundColor, this.mapsArea.border, 1, this.mapAreaRect);\n            this.svgObject.appendChild(this.renderer.drawRectangle(rect));\n        }\n    };\n    /**\n     * To add tab index for map element\n     */\n    Maps.prototype.addTabIndex = function () {\n        this.element.setAttribute('aria-label', this.description || 'Maps Element');\n        this.element.setAttribute('tabindex', this.tabIndex.toString());\n    };\n    // private setSecondaryElementPosition(): void {\n    //     if (!this.isTileMap) {\n    //         let element: HTMLDivElement = getElementByID(this.element.id + '_Secondary_Element') as HTMLDivElement;\n    //         let rect: ClientRect = this.element.getBoundingClientRect();\n    //         let svgRect: ClientRect = getElementByID(this.element.id + '_svg').getBoundingClientRect();\n    //         element.style.marginLeft = Math.max(svgRect.left - rect.left, 0) + 'px';\n    //         element.style.marginTop = Math.max(svgRect.top - rect.top, 0) + 'px';\n    //     }\n    // }\n    Maps.prototype.zoomingChange = function () {\n        var left;\n        var top;\n        if (getElementByID(this.element.id + '_Layer_Collections') && this.zoomModule) {\n            this.zoomModule.layerCollectionEle = getElementByID(this.element.id + '_Layer_Collections');\n        }\n        if (this.isTileMap && getElementByID(this.element.id + '_Tile_SVG') && getElementByID(this.element.id + '_tile_parent')) {\n            var tileRect = getElementByID(this.element.id + '_tile_parent').getBoundingClientRect();\n            var tileSvgRect = getElementByID(this.element.id + '_Tile_SVG').getBoundingClientRect();\n            left = (tileRect.left - tileSvgRect.left);\n            top = (tileRect.top - tileSvgRect.top);\n            getElementByID(this.element.id + '_Tile_SVG_Parent').style.left = left + 'px';\n            getElementByID(this.element.id + '_Tile_SVG_Parent').style.top = top + 'px';\n            var markerTemplateElements = document.getElementsByClassName('template');\n            if (!isNullOrUndefined(markerTemplateElements) && markerTemplateElements.length > 0) {\n                for (var i = 0; i < markerTemplateElements.length; i++) {\n                    var templateGroupEle = markerTemplateElements[i];\n                    templateGroupEle.style.left = left + 'px';\n                    templateGroupEle.style.top = top + 'px';\n                }\n            }\n        }\n        if (this.zoomSettings.zoomFactor >= 1) {\n            if (this.zoomModule && this.zoomModule.toolBarGroup && this.zoomSettings.enable) {\n                this.zoomModule.alignToolBar();\n            }\n            var elements = document.getElementById(this.element.id + '_Layer_Collections');\n            if (!isNullOrUndefined(elements) && elements.childElementCount > 0) {\n                for (var i = 0; i < elements.childNodes.length; i++) {\n                    var childElement = elements.childNodes[i];\n                    if (childElement.tagName === 'g') {\n                        var layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                        for (var j = 0; j < childElement.childNodes.length; j++) {\n                            var childNode = childElement.childNodes[j];\n                            if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                                (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                                (!(childNode.id.indexOf('_dataLableIndex_Group') > -1))) {\n                                changeBorderWidth(childNode, layerIndex, this.scale, this);\n                            }\n                        }\n                    }\n                }\n            }\n            if (this.zoomModule && (this.previousScale !== this.scale)) {\n                this.zoomModule.applyTransform(true);\n            }\n        }\n    };\n    Maps.prototype.createSecondaryElement = function () {\n        if (isNullOrUndefined(document.getElementById(this.element.id + '_Secondary_Element'))) {\n            var secondaryElement = createElement('div', {\n                id: this.element.id + '_Secondary_Element',\n                styles: 'position: absolute;z-index:2;'\n            });\n            this.element.appendChild(secondaryElement);\n        }\n    };\n    /**\n     * @private\n     */\n    Maps.prototype.arrangeTemplate = function () {\n        if (document.getElementById(this.element.id + '_Legend_Border')) {\n            document.getElementById(this.element.id + '_Legend_Border').style.pointerEvents = 'none';\n        }\n        var templateElements = document.getElementsByClassName(this.element.id + '_template');\n        if (!isNullOrUndefined(templateElements) && templateElements.length > 0 &&\n            getElementByID(this.element.id + '_Layer_Collections') && this.layers[this.layers.length - 1].layerType !== 'OSM') {\n            for (var i = 0; i < templateElements.length; i++) {\n                var templateGroupEle = templateElements[i];\n                if (!isNullOrUndefined(templateGroupEle) && templateGroupEle.childElementCount > 0) {\n                    var layerOffset = getElementByID(this.element.id + '_Layer_Collections').getBoundingClientRect();\n                    var elementOffset = getElementByID(templateGroupEle.id).getBoundingClientRect();\n                    var offSetLetValue = this.isTileMap ? 0 : (layerOffset.left < elementOffset.left) ?\n                        -(Math.abs(elementOffset.left - layerOffset.left)) : (Math.abs(elementOffset.left - layerOffset.left));\n                    var offSetTopValue = this.isTileMap ? 0 : (layerOffset.top < elementOffset.top) ?\n                        -(Math.abs(elementOffset.top - layerOffset.top)) : Math.abs(elementOffset.top - layerOffset.top);\n                    for (var j = 0; j < templateGroupEle.childElementCount; j++) {\n                        var currentTemplate = templateGroupEle.childNodes[j];\n                        currentTemplate.style.left = parseFloat(currentTemplate.style.left) + offSetLetValue + 'px';\n                        currentTemplate.style.top = parseFloat(currentTemplate.style.top) + offSetTopValue + 'px';\n                        currentTemplate.style.transform = 'translate(-50%, -50%)';\n                    }\n                }\n            }\n        }\n    };\n    Maps.prototype.createTile = function () {\n        var mainLayer = this.layersCollection[0];\n        var padding = 0;\n        if (mainLayer.isBaseLayer && (mainLayer.layerType === 'OSM' || mainLayer.layerType === 'Bing' ||\n            mainLayer.layerType === 'GoogleStaticMap' || mainLayer.layerType === 'Google')) {\n            if (mainLayer.layerType === 'Google') {\n                mainLayer.urlTemplate = 'https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level';\n            }\n            removeElement(this.element.id + '_tile_parent');\n            removeElement(this.element.id + '_tiles');\n            removeElement('animated_tiles');\n            var ele = createElement('div', {\n                id: this.element.id + '_tile_parent', styles: 'position: absolute; left: ' +\n                    (this.mapAreaRect.x) + 'px; top: ' + (this.mapAreaRect.y + padding) + 'px; height: ' +\n                    (this.mapAreaRect.height) + 'px; width: '\n                    + (this.mapAreaRect.width) + 'px; overflow: hidden;'\n            });\n            var ele1 = createElement('div', {\n                id: this.element.id + '_tiles', styles: 'position: absolute; left: ' +\n                    (this.mapAreaRect.x) + 'px; top: ' + (this.mapAreaRect.y + padding) + 'px; height: ' +\n                    (this.mapAreaRect.height) + 'px; width: '\n                    + (this.mapAreaRect.width) + 'px; overflow: hidden;'\n            });\n            this.element.appendChild(ele);\n            this.element.appendChild(ele1);\n        }\n    };\n    /**\n     * To initilize the private varibales of maps.\n     */\n    Maps.prototype.initPrivateVariable = function () {\n        if (this.element.id === '') {\n            var collection = document.getElementsByClassName('e-maps').length;\n            this.element.id = 'maps_control_' + collection;\n        }\n        this.renderer = new SvgRenderer(this.element.id);\n        this.mapLayerPanel = new LayerPanel(this);\n    };\n    Maps.prototype.findBaseAndSubLayers = function () {\n        var _this = this;\n        var baseIndex = this.baseLayerIndex;\n        var mainLayers = [];\n        var subLayers = [];\n        this.layersCollection = [];\n        Array.prototype.forEach.call(this.layers, function (layer) {\n            (layer.type === 'Layer') ? mainLayers.push(layer) : subLayers.push(layer);\n        });\n        for (var i = 0; i < mainLayers.length; i++) {\n            var baseLayer = mainLayers[i];\n            if (baseLayer.visible && baseIndex === i) {\n                baseLayer.isBaseLayer = true;\n                this.isTileMap = (baseLayer.layerType === 'Geometry') ? false : true;\n                this.layersCollection.push(baseLayer);\n                break;\n            }\n            else if (i === mainLayers.length - 1) {\n                this.layersCollection.push(mainLayers[0]);\n                break;\n            }\n        }\n        subLayers.map(function (subLayer, subLayerIndex) {\n            if (subLayer.visible) {\n                _this.layersCollection.push(subLayer);\n            }\n        });\n    };\n    /**\n     * @private\n     * Render the map border\n     */\n    Maps.prototype.renderBorder = function () {\n        var width = this.border.width;\n        var borderElement = this.svgObject.querySelector('#' + this.element.id + '_MapBorder');\n        if ((width > 0 || (this.background || this.themeStyle.backgroundColor)) && isNullOrUndefined(borderElement)) {\n            var borderRect = new RectOption(this.element.id + '_MapBorder', this.background || this.themeStyle.backgroundColor, this.border, 1, new Rect(width / 2, width / 2, this.availableSize.width - width, this.availableSize.height - width));\n            this.svgObject.appendChild(this.renderer.drawRectangle(borderRect));\n        }\n        else {\n            borderElement.setAttribute('fill', this.background || this.themeStyle.backgroundColor);\n        }\n    };\n    /**\n     * @private\n     * Render the title and subtitle\n     */\n    Maps.prototype.renderTitle = function (title, type, bounds, groupEle) {\n        var style = title.textStyle;\n        var height;\n        var width = Math.abs((this.margin.left + this.margin.right) - this.availableSize.width);\n        style.fontFamily = this.themeStyle.fontFamily || style.fontFamily;\n        style.size = this.themeStyle.titleFontSize || style.size;\n        if (title.text) {\n            if (isNullOrUndefined(groupEle)) {\n                groupEle = this.renderer.createGroup({ id: this.element.id + '_Title_Group' });\n            }\n            var trimmedTitle = textTrim(width, title.text, style);\n            var elementSize = measureText(trimmedTitle, style);\n            var rect = (isNullOrUndefined(bounds)) ? new Rect(this.margin.left, this.margin.top, this.availableSize.width, this.availableSize.height) : bounds;\n            var location_1 = findPosition(rect, title.alignment, elementSize, type);\n            var options = new TextOption(this.element.id + '_Map_' + type, location_1.x, location_1.y, 'start', trimmedTitle);\n            var titleBounds = new Rect(location_1.x, location_1.y, elementSize.width, elementSize.height);\n            var element = renderTextElement(options, style, style.color || (type === 'title' ? this.themeStyle.titleFontColor : this.themeStyle.subTitleFontColor), groupEle);\n            element.setAttribute('aria-label', this.description || title.text);\n            element.setAttribute('tabindex', (this.tabIndex + (type === 'title' ? 1 : 2)).toString());\n            if ((type === 'title' && !title.subtitleSettings.text) || (type === 'subtitle')) {\n                height = Math.abs((titleBounds.y + this.margin.bottom) - this.availableSize.height);\n                this.mapAreaRect = new Rect(this.margin.left, titleBounds.y + 10, width, height - 10);\n            }\n            if (type !== 'subtitle' && title.subtitleSettings.text) {\n                this.renderTitle(title.subtitleSettings, 'subtitle', titleBounds, groupEle);\n            }\n            else {\n                this.svgObject.appendChild(groupEle);\n            }\n        }\n        else {\n            height = Math.abs((this.margin.top + this.margin.bottom) - this.availableSize.height);\n            this.mapAreaRect = new Rect(this.margin.left, this.margin.top, width, height);\n        }\n    };\n    /**\n     * To create svg element for maps\n     */\n    Maps.prototype.createSVG = function () {\n        resetBlazorTemplate(this.element.id + '_LabelTemplate', 'LabelTemplate');\n        for (var i = 0; i < this.layers.length; i++) {\n            for (var j = 0; j < this.layers[i].markerSettings.length; j++) {\n                resetBlazorTemplate(this.element.id + '_MarkerTemplate' + j, 'MarkerTemplate');\n            }\n        }\n        this.removeSvg();\n        createSvg(this);\n    };\n    /**\n     * To Remove the SVG\n     */\n    Maps.prototype.removeSvg = function () {\n        for (var i = 0; i < this.annotations.length; i++) {\n            resetBlazorTemplate(this.element.id + '_ContentTemplate_' + i, 'ContentTemplate');\n        }\n        removeElement(this.element.id + '_Secondary_Element');\n        removeElement(this.element.id + '_tile_parent');\n        removeElement(this.element.id + '_tiles');\n        if (this.svgObject) {\n            while (this.svgObject.childNodes.length > 0) {\n                this.svgObject.removeChild(this.svgObject.firstChild);\n            }\n            if (!this.svgObject.hasChildNodes() && this.svgObject.parentNode) {\n                remove(this.svgObject);\n            }\n        }\n    };\n    /**\n     * To bind event handlers for maps.\n     */\n    Maps.prototype.wireEVents = function () {\n        //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        EventHandler.add(this.element, 'click', this.mapsOnClick, this);\n        // EventHandler.add(this.element, 'contextmenu', this.mapsOnRightClick, this);\n        EventHandler.add(this.element, 'dblclick', this.mapsOnDoubleClick, this);\n        EventHandler.add(this.element, Browser.touchStartEvent, this.mouseDownOnMap, this);\n        EventHandler.add(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap, this);\n        EventHandler.add(this.element, Browser.touchEndEvent, this.mouseEndOnMap, this);\n        EventHandler.add(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap, this);\n        //  EventHandler.add(this.element, cancelEvent, this.mouseLeaveOnMap, this);\n        window.addEventListener((Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.mapsOnResize.bind(this));\n    };\n    /**\n     * To unbind event handlers from maps.\n     */\n    Maps.prototype.unWireEVents = function () {\n        //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        EventHandler.remove(this.element, 'click', this.mapsOnClick);\n        // EventHandler.remove(this.element, 'contextmenu', this.mapsOnRightClick);\n        EventHandler.remove(this.element, 'dblclick', this.mapsOnDoubleClick);\n        EventHandler.remove(this.element, Browser.touchStartEvent, this.mouseDownOnMap);\n        EventHandler.remove(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap);\n        EventHandler.remove(this.element, Browser.touchEndEvent, this.mouseEndOnMap);\n        EventHandler.remove(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap);\n        //EventHandler.remove(this.element, cancelEvent, this.mouseLeaveOnMap);\n        window.removeEventListener((Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.mapsOnResize);\n    };\n    /**\n     * This method is used to perform operations when mouse pointer leave from maps.\n     * @param e - Specifies the pointer event on maps.\n     */\n    Maps.prototype.mouseLeaveOnMap = function (e) {\n        if (document.getElementsByClassName('highlightMapStyle').length > 0 && this.legendModule) {\n            this.legendModule.removeShapeHighlightCollection();\n            removeClass(document.getElementsByClassName('highlightMapStyle')[0]);\n        }\n    };\n    /**\n     * This method is used to perform the operations when a click operation is performed on maps.\n     * @param e - Specifies the pointer event on maps.\n     * @blazorProperty 'PerformClick'\n     */\n    /* tslint:disable:no-string-literal */\n    Maps.prototype.mapsOnClick = function (e) {\n        var _this = this;\n        var targetEle = e.target;\n        var targetId = targetEle.id;\n        var layerIndex = 0;\n        var latLongValue;\n        var latitude = null;\n        var longitude = null;\n        this.mouseClickEvent = { x: e.x, y: e.y };\n        if (targetEle.id.indexOf('_ToolBar') === -1) {\n            if (targetEle.id.indexOf('_LayerIndex_') !== -1 && !this.isTileMap && (this.mouseDownEvent['x'] === this.mouseClickEvent['x'])\n                && (this.mouseDownEvent['y'] === this.mouseClickEvent['y'])) {\n                layerIndex = parseFloat(targetEle.id.split('_LayerIndex_')[1].split('_')[0]);\n                latLongValue = this.getGeoLocation(layerIndex, e);\n                latitude = latLongValue['latitude'];\n                longitude = latLongValue['longitude'];\n            }\n            else if (this.isTileMap && (this.mouseDownEvent['x'] === this.mouseClickEvent['x'])\n                && (this.mouseDownEvent['y'] === this.mouseClickEvent['y'])) {\n                latLongValue = this.getTileGeoLocation(e);\n                latitude = latLongValue['latitude'];\n                longitude = latLongValue['longitude'];\n            }\n            var eventArgs_1 = {\n                cancel: false, name: click, target: targetId, x: e.clientX, y: e.clientY,\n                latitude: latitude, longitude: longitude\n            };\n            this.trigger('click', eventArgs_1, function (mouseArgs) {\n                if (targetEle.id.indexOf('shapeIndex') > -1) {\n                    if (_this.markerModule && _this.markerModule.sameMarkerData.length > 0 &&\n                        (_this.zoomModule ? _this.zoomModule.isSingleClick : true)) {\n                        mergeSeparateCluster(_this.markerModule.sameMarkerData, _this, getElement(_this.element.id + '_Markers_Group'));\n                        _this.markerModule.sameMarkerData = [];\n                    }\n                    if (getElement(_this.element.id + '_mapsTooltip') &&\n                        _this.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') > -1) {\n                        removeElement(_this.element.id + '_mapsTooltip');\n                    }\n                }\n                if (_this.markerModule) {\n                    _this.markerModule.markerClick(e);\n                    _this.markerModule.markerClusterClick(e);\n                }\n                if (_this.bubbleModule) {\n                    _this.bubbleModule.bubbleClick(e);\n                }\n                if (!eventArgs_1.cancel) {\n                    _this.notify(click, targetEle);\n                }\n                if (!eventArgs_1.cancel && targetEle.id.indexOf('shapeIndex') !== -1) {\n                    var layerIndex_1 = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n                    var shapeSelectedEventArgs = triggerShapeEvent(targetId, _this.layers[layerIndex_1].selectionSettings, _this, shapeSelected);\n                    if (!shapeSelectedEventArgs.cancel && _this.selectionModule && !isNullOrUndefined(_this.shapeSelected)) {\n                        customizeStyle(_this.selectionModule.selectionType + 'selectionMap', _this.selectionModule.selectionType + 'selectionMapStyle', shapeSelectedEventArgs);\n                    }\n                    else if (shapeSelectedEventArgs.cancel && _this.selectionModule\n                        && isNullOrUndefined(shapeSelectedEventArgs['data'])) {\n                        removeClass(targetEle);\n                        _this.selectionModule.removedSelectionList(targetEle);\n                    }\n                }\n            });\n        }\n    };\n    /**\n     * This method is used to perform operations when mouse click on maps.\n     * @param e - Specifies the pointer event on maps.\n     */\n    Maps.prototype.mouseEndOnMap = function (e) {\n        var targetEle = e.target;\n        var targetId = targetEle.id;\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        var rect = this.element.getBoundingClientRect();\n        var element = e.target;\n        if (e.type.indexOf('touch') !== -1) {\n            this.isTouch = true;\n            touchArg = e;\n            pageX = touchArg.changedTouches[0].pageX;\n            pageY = touchArg.changedTouches[0].pageY;\n            target = touchArg.target;\n        }\n        else {\n            this.isTouch = e.pointerType === 'touch';\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (this.isTouch) {\n            this.titleTooltip(e, pageX, pageY, true);\n            if (!isNullOrUndefined(this.legendModule)) {\n                this.legendTooltip(e, e.pageX, e.pageY, true);\n            }\n        }\n        this.notify(Browser.touchEndEvent, e);\n        e.preventDefault();\n        return false;\n    };\n    /**\n     * This method is used to perform operations when mouse is clicked down on maps.\n     * @param e - Specifies the pointer event on maps.\n     */\n    Maps.prototype.mouseDownOnMap = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        this.mouseDownEvent = { x: e.x, y: e.y };\n        var rect = this.element.getBoundingClientRect();\n        var element = e.target;\n        if (element.id.indexOf('_ToolBar') === -1) {\n            var markerModule = this.markerModule;\n            if (element.id.indexOf('shapeIndex') > -1 || element.id.indexOf('Tile') > -1) {\n                if (markerModule && (markerModule.sameMarkerData.length > 0) &&\n                    (this.zoomModule ? this.zoomModule.isSingleClick : true)) {\n                    mergeSeparateCluster(markerModule.sameMarkerData, this, getElement(this.element.id + '_Markers_Group'));\n                    markerModule.sameMarkerData = [];\n                }\n            }\n            if (markerModule) {\n                markerModule.markerClick(e);\n                markerModule.markerClusterClick(e);\n            }\n            if (this.bubbleModule) {\n                this.bubbleModule.bubbleClick(e);\n            }\n        }\n        this.notify(Browser.touchStartEvent, e);\n    };\n    /**\n     * This method is used to perform operations when performing the double click operation on maps.\n     * @param e - Specifies the pointer event.\n     * @blazorProperty 'PerformDoubleClick'\n     */\n    Maps.prototype.mapsOnDoubleClick = function (e) {\n        this.notify('dblclick', e);\n    };\n    /**\n     * This method is used to perform operations while performing mouse over on maps.\n     * @param e - Specifies the pointer event on maps.\n     */\n    /* tslint:disable:no-string-literal */\n    Maps.prototype.mouseMoveOnMap = function (e) {\n        var pageX;\n        var pageY;\n        var touchArg;\n        var target;\n        var touches = null;\n        target = (e.type === 'touchmove') ? e.target :\n            target = e.target;\n        // if (target.id.indexOf('shapeIndex') !== -1 && !this.highlightSettings.enable) {\n        //     triggerShapeEvent(target.id, this.highlightSettings, this, shapeHighlight);\n        // }\n        if (this.markerModule) {\n            this.markerModule.markerMove(e);\n            this.markerModule.markerClusterMouseMove(e);\n        }\n        if (this.bubbleModule) {\n            this.bubbleModule.bubbleMove(e);\n        }\n        this.onMouseMove(e);\n        this.notify(Browser.touchMoveEvent, e);\n    };\n    /**\n     * This method is used to perform operations when mouse move event is performed on maps.\n     * @param e - Specifies the pointer event on maps.\n     */\n    Maps.prototype.onMouseMove = function (e) {\n        var element = e.target;\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        if (!this.isTouch) {\n            this.titleTooltip(e, e.pageX, e.pageY);\n            if (!isNullOrUndefined(this.legendModule)) {\n                this.legendTooltip(e, e.pageX, e.pageY, true);\n            }\n        }\n        return false;\n    };\n    Maps.prototype.legendTooltip = function (event, x, y, isTouch) {\n        var targetId = event.target.id;\n        var legendText;\n        var page = this.legendModule.currentPage;\n        var legendIndex = event.target.id.split('_Index_')[1];\n        var collection;\n        page = this.legendModule.totalPages.length <= this.legendModule.currentPage\n            ? this.legendModule.totalPages.length - 1 : this.legendModule.currentPage < 0 ?\n            0 : this.legendModule.currentPage;\n        var count = this.legendModule.totalPages.length !== 0 ?\n            this.legendModule.totalPages[page]['Collection'].length : this.legendModule.totalPages.length;\n        for (var i = 0; i < count; i++) {\n            collection = this.legendModule.totalPages[page]['Collection'][i];\n            legendText = collection['DisplayText'];\n            targetId = event.target['id'];\n            legendIndex = event.target['id'].split('_Index_')[1];\n            if ((targetId === (this.element.id + '_Legend_Text_Index_' + legendIndex)) &&\n                (event.target.textContent.indexOf('...') > -1) && collection['idIndex'] === parseInt(legendIndex, 10)) {\n                showTooltip(legendText, this.legendSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Legend_Text_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n            }\n        }\n        if ((targetId !== (this.element.id + '_Legend_Text_Index_' + legendIndex))) {\n            removeElement(this.element.id + '_EJ2_Legend_Text_Tooltip');\n        }\n    };\n    Maps.prototype.titleTooltip = function (event, x, y, isTouch) {\n        var targetId = event.target.id;\n        if (targetId === (this.element.id + '_LegendTitle') && (event.target.textContent.indexOf('...') === -1)) {\n            showTooltip(this.legendSettings.title.text, this.legendSettings.titleStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_LegendTitle_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n        }\n        else {\n            removeElement(this.element.id + '_EJ2_LegendTitle_Tooltip');\n        }\n        if ((targetId === (this.element.id + '_Map_title')) && (event.target.textContent.indexOf('...') > -1)) {\n            showTooltip(this.titleSettings.text, this.titleSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Title_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n        }\n        else {\n            removeElement(this.element.id + '_EJ2_Title_Tooltip');\n        }\n    };\n    /*\n\n    /**\n     * This method is used to perform operations while resizing the window.\n     * @param e - Specifies the arguments of window resize event.\n     */\n    Maps.prototype.mapsOnResize = function (e) {\n        var _this = this;\n        this.isResize = true;\n        var args = {\n            name: resize,\n            previousSize: this.availableSize,\n            currentSize: new Size(0, 0),\n            maps: !this.isBlazor ? this : null\n        };\n        if (this.resizeTo) {\n            clearTimeout(this.resizeTo);\n        }\n        if (this.element.classList.contains('e-maps')) {\n            this.resizeTo = setTimeout(function () {\n                _this.unWireEVents();\n                _this.createSVG();\n                _this.refreshing = true;\n                _this.wireEVents();\n                args.currentSize = _this.availableSize;\n                _this.trigger(resize, args);\n                _this.render();\n            }, 500);\n        }\n        return false;\n    };\n    /**\n     * This method is used to zoom the map by specifying the center position.\n     * @param centerPosition - Specifies the center position for maps.\n     * @param zoomFactor - Specifies the zoom factor for maps.\n     */\n    Maps.prototype.zoomByPosition = function (centerPosition, zoomFactor) {\n        var factor = this.mapLayerPanel.calculateFactor(this.layersCollection[0]);\n        var position;\n        var size = this.mapAreaRect;\n        if (!this.isTileMap && this.zoomModule) {\n            if (!isNullOrUndefined(centerPosition)) {\n                position = convertGeoToPoint(centerPosition.latitude, centerPosition.longitude, factor, this.layersCollection[0], this);\n                var mapRect = document.getElementById(this.element.id + '_Layer_Collections').getBoundingClientRect();\n                var svgRect = this.svgObject.getBoundingClientRect();\n                var xDiff = Math.abs(mapRect.left - svgRect.left) / this.scale;\n                var yDiff = Math.abs(mapRect.top - svgRect.top) / this.scale;\n                var x = this.translatePoint.x + xDiff;\n                var y = this.translatePoint.y + yDiff;\n                this.scale = zoomFactor;\n                this.translatePoint.x = ((mapRect.left < svgRect.left ? x : 0) + (size.width / 2) - (position.x * zoomFactor)) / zoomFactor;\n                this.translatePoint.y = ((mapRect.top < svgRect.top ? y : 0) + (size.height / 2) - (position.y * zoomFactor)) / zoomFactor;\n                this.zoomModule.applyTransform();\n            }\n            else {\n                position = { x: size.width / 2, y: size.height / 2 };\n                this.zoomModule.performZooming(position, zoomFactor, zoomFactor > this.scale ? 'ZoomIn' : 'ZoomOut');\n            }\n        }\n        else if (this.zoomModule) {\n            this.tileZoomLevel = zoomFactor;\n            this.tileTranslatePoint = this.mapLayerPanel['panTileMap'](this.availableSize.width, this.availableSize.height, { x: centerPosition.longitude, y: centerPosition.latitude });\n            this.mapLayerPanel.generateTiles(zoomFactor, this.tileTranslatePoint, null, new BingMap(this));\n        }\n    };\n    /**\n     * This method is used to perform panning by specifying the direction.\n     * @param direction - Specifies the direction in which the panning is performed.\n     * @param mouseLocation - Specifies the location of the mouse pointer in maps.\n     */\n    Maps.prototype.panByDirection = function (direction, mouseLocation) {\n        var xDiff = 0;\n        var yDiff = 0;\n        switch (direction) {\n            case 'Left':\n                xDiff = -(this.mapAreaRect.width / 7);\n                break;\n            case 'Right':\n                xDiff = (this.mapAreaRect.width / 7);\n                break;\n            case 'Top':\n                yDiff = -(this.mapAreaRect.height / 7);\n                break;\n            case 'Bottom':\n                yDiff = (this.mapAreaRect.height / 7);\n                break;\n        }\n        if (this.zoomModule) {\n            this.zoomModule.panning(direction, xDiff, yDiff, mouseLocation);\n        }\n    };\n    /**\n     * This method is used to add the layers dynamically to the maps.\n     * @param layer - Specifies the layer for the maps.\n     */\n    Maps.prototype.addLayer = function (layer) {\n        this.layers.push(new LayerSettings(this.layers[0], 'layers', layer));\n        this.refresh();\n    };\n    /**\n     * This method is used to remove a layer from map.\n     * @param index - Specifies the index number of the layer to be removed.\n     */\n    Maps.prototype.removeLayer = function (index) {\n        this.layers.splice(index, 1);\n        this.refresh();\n    };\n    /**\n     * This method is used to add markers dynamically in the maps.\n     * If we provide the index value of the layer in which the marker to be added and the coordinates\n     * of the marker as parameters, the marker will be added in the location.\n     * @param layerIndex - Specifies the index number of the layer.\n     * @param marker - Specifes the settings of the marker to be added.\n     */\n    Maps.prototype.addMarker = function (layerIndex, markerCollection) {\n        var layerEle = document.getElementById(this.element.id + '_LayerIndex_' + layerIndex);\n        if (markerCollection.length > 0 && layerEle) {\n            for (var _i = 0, markerCollection_1 = markerCollection; _i < markerCollection_1.length; _i++) {\n                var newMarker = markerCollection_1[_i];\n                this.layersCollection[layerIndex].markerSettings.push(new MarkerSettings(this, 'markerSettings', newMarker));\n            }\n            var markerModule = new Marker(this);\n            markerModule.markerRender(layerEle, layerIndex, this.mapLayerPanel['currentFactor'], 'AddMarker');\n            this.arrangeTemplate();\n        }\n    };\n    /**\n     * This method is used to select the geometric shape element in the maps component.\n     * @param layerIndex - Specifies the index of the layer in maps.\n     * @param propertyName - Specifies the property name from the data source.\n     * @param name - Specifies the name of the shape that is selected.\n     * @param enable - Specifies the shape selection to be enabled.\n     */\n    Maps.prototype.shapeSelection = function (layerIndex, propertyName, name, enable) {\n        var targetEle;\n        var popertyNameArray = Array.isArray(propertyName) ? propertyName : Array(propertyName);\n        if (isNullOrUndefined(enable)) {\n            enable = true;\n        }\n        var selectionsettings = this.layers[layerIndex].selectionSettings;\n        if (!selectionsettings.enableMultiSelect && this.legendSelection && enable) {\n            this.removeShapeSelection();\n        }\n        if (selectionsettings.enable) {\n            var targetId = void 0;\n            var dataIndex = void 0;\n            var shapeIndex = void 0;\n            var shapeDataValue = void 0;\n            var data = void 0;\n            var shapeData = this.layers[layerIndex].shapeData['features'];\n            for (var i = 0; i < shapeData.length; i++) {\n                for (var j = 0; j < popertyNameArray.length; j++) {\n                    var propertyName_1 = !isNullOrUndefined(shapeData[i]['properties'][popertyNameArray[j]])\n                        && isNaN(shapeData[i]['properties'][popertyNameArray[j]]) ?\n                        shapeData[i]['properties'][popertyNameArray[j]].toLowerCase() : shapeData[i]['properties'][popertyNameArray[j]];\n                    var shapeName = !isNullOrUndefined(name) ? name.toLowerCase() : name;\n                    if (propertyName_1 === shapeName) {\n                        var k = checkShapeDataFields(this.layers[layerIndex].dataSource, shapeData[i]['properties'], this.layers[layerIndex].shapeDataPath, this.layers[layerIndex].shapePropertyPath, this.layers[layerIndex]);\n                        targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_' +\n                            (!isNullOrUndefined(k) ? k.toString() : 'undefined');\n                        targetEle = getElement(targetId);\n                        if (isNullOrUndefined(k) && isNullOrUndefined(targetEle)) {\n                            targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_null';\n                            targetEle = getElement(targetId);\n                        }\n                        shapeIndex = parseInt(targetEle.id.split('_shapeIndex_')[1].split('_')[0], 10);\n                        shapeDataValue = this.layers[layerIndex].shapeData['features']['length'] > shapeIndex ?\n                            this.layers[layerIndex].shapeData['features'][shapeIndex]['properties'] : null;\n                        dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n                        data = isNullOrUndefined(dataIndex) ? null : this.layers[layerIndex].dataSource[dataIndex];\n                        if (enable) {\n                            triggerItemSelectionEvent(selectionsettings, this, targetEle, shapeDataValue, data);\n                            this.shapeSelectionClass = getElement('ShapeselectionMap');\n                            if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1) {\n                                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n                            }\n                            var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n                            if (shapeToggled) {\n                                targetEle.setAttribute('class', 'ShapeselectionMapStyle');\n                                if (this.selectedElementId.indexOf(targetEle.getAttribute('id')) === -1) {\n                                    this.selectedElementId.push(targetEle.getAttribute('id'));\n                                }\n                                if (!selectionsettings.enableMultiSelect) {\n                                    return;\n                                }\n                            }\n                        }\n                        else {\n                            this.legendSelection = (!selectionsettings.enableMultiSelect && !this.legendSelection) ?\n                                true : this.legendSelection;\n                            if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1 &&\n                                targetEle.getAttribute('class') === 'ShapeselectionMapStyle') {\n                                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n                            }\n                            var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n                            if (shapeToggled) {\n                                removeClass(targetEle);\n                                var selectedElementIdIndex = this.selectedElementId.indexOf(targetEle.getAttribute('id'));\n                                if (selectedElementIdIndex !== -1) {\n                                    this.selectedElementId.splice(selectedElementIdIndex, 1);\n                                    if (!selectionsettings.enableMultiSelect && this.legendSelection && this.selectedElementId.length > 0) {\n                                        this.removeShapeSelection();\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * This method is used to zoom the maps component based on the provided coordinates.\n     * @param minLatitude - Specifies the minimum latitude to be zoomed.\n     * @param minLongitude - Specifies the minimum latitude to be zoomed.\n     * @param maxLatitude - Specifies the maximum latitude to be zoomed.\n     * @param maxLongitude - Specifies the maximum longitude to be zoomed.\n     */\n    Maps.prototype.zoomToCoordinates = function (minLatitude, minLongitude, maxLatitude, maxLongitude) {\n        var _a, _b;\n        var centerLatitude;\n        var centerLongtitude;\n        var isTwoCoordinates = false;\n        if (isNullOrUndefined(maxLatitude) && isNullOrUndefined(maxLongitude)\n            || isNullOrUndefined(minLatitude) && isNullOrUndefined(minLongitude)) {\n            minLatitude = isNullOrUndefined(minLatitude) ? 0 : minLatitude;\n            minLongitude = isNullOrUndefined(minLatitude) ? 0 : minLongitude;\n            maxLatitude = isNullOrUndefined(maxLatitude) ? minLatitude : maxLatitude;\n            maxLongitude = isNullOrUndefined(maxLongitude) ? minLongitude : maxLongitude;\n            isTwoCoordinates = true;\n        }\n        if (minLatitude > maxLatitude) {\n            _a = [maxLatitude, minLatitude], minLatitude = _a[0], maxLatitude = _a[1];\n        }\n        if (minLongitude > maxLongitude) {\n            _b = [maxLongitude, minLongitude], minLongitude = _b[0], maxLongitude = _b[1];\n        }\n        if (!isTwoCoordinates) {\n            centerLatitude = (minLatitude + maxLatitude) / 2;\n            centerLongtitude = (minLongitude + maxLongitude) / 2;\n        }\n        else {\n            centerLatitude = (minLatitude + maxLatitude);\n            centerLongtitude = (minLongitude + maxLongitude);\n        }\n        this.centerLatOfGivenLocation = centerLatitude;\n        this.centerLongOfGivenLocation = centerLongtitude;\n        this.minLatOfGivenLocation = minLatitude;\n        this.minLongOfGivenLocation = minLongitude;\n        this.maxLatOfGivenLocation = maxLatitude;\n        this.maxLongOfGivenLocation = maxLongitude;\n        this.zoomNotApplied = true;\n        this.scaleOfGivenLocation = calculateZoomLevel(minLatitude, maxLatitude, minLongitude, maxLongitude, this.mapAreaRect.width, this.mapAreaRect.height, this);\n        var zoomArgs;\n        zoomArgs = {\n            cancel: false, name: 'zoom', type: zoomIn, maps: !this.isBlazor ? this : null,\n            tileTranslatePoint: {}, translatePoint: {},\n            tileZoomLevel: this.isTileMap ? { previous: this.tileZoomLevel, current: this.scaleOfGivenLocation } : {},\n            scale: !this.isTileMap ? { previous: this.scale, current: this.scaleOfGivenLocation } :\n                { previous: this.tileZoomLevel, current: this.scaleOfGivenLocation }\n        };\n        this.trigger('zoom', zoomArgs);\n        this.refresh();\n    };\n    /**\n     * This method is used to remove multiple selected shapes in the maps.\n     */\n    Maps.prototype.removeShapeSelection = function () {\n        var selectedElements = this.selectedElementId.length;\n        for (var i = 0; i < selectedElements; i++) {\n            removeClass(getElementByID(this.selectedElementId[0]));\n            this.selectedElementId.splice(0, 1);\n        }\n        if (this.legendSettings.visible) {\n            var legendSelectedElements = this.legendSelectionCollection.length;\n            for (var i = 0; i < legendSelectedElements; i++) {\n                removeClass(getElementByID(this.legendSelectionCollection[i]['legendElement']['id']));\n                this.selectedLegendElementId.splice(0, 1);\n            }\n        }\n        this.shapeSelectionItem = [];\n        this.legendSelectionCollection = [];\n    };\n    /**\n     * This method is used to set culture for maps component.\n     */\n    Maps.prototype.setCulture = function () {\n        this.intl = new Internationalization();\n        this.setLocaleConstants();\n        this.localeObject = new L10n(this.getModuleName(), this.defaultLocalConstants, this.locale);\n    };\n    /**\n     * This method to set locale constants to the maps component.\n     */\n    Maps.prototype.setLocaleConstants = function () {\n        // Need to modify after the api confirm\n        this.defaultLocalConstants = {\n            ZoomIn: 'Zoom in',\n            Zoom: 'Zoom',\n            ZoomOut: 'Zoom out',\n            Pan: 'Pan',\n            Reset: 'Reset',\n        };\n    };\n    /**\n     * This method disposes the maps component.\n     */\n    Maps.prototype.destroy = function () {\n        this.unWireEVents();\n        this.shapeSelectionItem = [];\n        this.toggledShapeElementId = [];\n        this.toggledLegendId = [];\n        this.legendSelectionCollection = [];\n        this.selectedLegendElementId = [];\n        this.selectedNavigationElementId = [];\n        this.selectedBubbleElementId = [];\n        this.selectedMarkerElementId = [];\n        this.selectedElementId = [];\n        this.dataLabelShape = [];\n        this.zoomShapeCollection = [];\n        this.zoomLabelPositions = [];\n        this.mouseDownEvent = { x: null, y: null };\n        this.mouseClickEvent = { x: null, y: null };\n        if (document.getElementById('mapsmeasuretext')) {\n            document.getElementById('mapsmeasuretext').remove();\n        }\n        this.removeSvg();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Gets component name\n     */\n    Maps.prototype.getModuleName = function () {\n        return 'maps';\n    };\n    /**\n     * Gets the properties to be maintained in the persisted state.\n     * @private\n     */\n    Maps.prototype.getPersistData = function () {\n        var keyEntity = ['translatePoint', 'zoomSettings', 'mapScaleValue', 'tileTranslatePoint', 'baseTranslatePoint',\n            'scale', 'zoomPersistence', 'defaultState', 'markerZoomedState', 'initialCheck', 'initialZoomLevel', 'initialTileTranslate',\n            'applyZoomReset', 'markerZoomFactor'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @private\n     */\n    Maps.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var render = false;\n        var isMarker = false;\n        var isStaticMapType = false;\n        var layerEle;\n        if (newProp['layers']) {\n            var newLayerLength = Object.keys(newProp['layers']).length;\n            layerEle = document.getElementById(this.element.id + '_LayerIndex_' + (newLayerLength - 1));\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'background':\n                    this.renderBorder();\n                    break;\n                case 'height':\n                case 'width':\n                case 'layers':\n                case 'projectionType':\n                case 'centerPosition':\n                case 'legendSettings':\n                case 'zoomSettings':\n                case 'baseLayerIndex':\n                    if (prop === 'layers') {\n                        var layerPropLength = Object.keys(newProp.layers).length;\n                        for (var x = 0; x < layerPropLength; x++) {\n                            if (!isNullOrUndefined(newProp.layers[x])) {\n                                var collection = Object.keys(newProp.layers[x]);\n                                for (var _b = 0, collection_1 = collection; _b < collection_1.length; _b++) {\n                                    var collectionProp = collection_1[_b];\n                                    if (collectionProp === 'markerSettings') {\n                                        isMarker = true;\n                                    }\n                                    else if (collectionProp === 'staticMapType') {\n                                        isStaticMapType = true;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    render = true;\n                    break;\n                case 'locale':\n                case 'currencyCode':\n                    _super.prototype.refresh.call(this);\n                    break;\n            }\n        }\n        if (render) {\n            if (newProp.layers && isMarker) {\n                removeElement(this.element.id + '_Markers_Group');\n                if (this.isTileMap) {\n                    if (this.isBlazor) {\n                        this.render();\n                    }\n                    else {\n                        this.mapLayerPanel.renderTileLayer(this.mapLayerPanel, this.layers['currentFactor'], (this.layers.length - 1));\n                    }\n                }\n                else {\n                    this.render();\n                }\n            }\n            else if (newProp.layers && isStaticMapType) {\n                this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length - 1].key, this.staticMapZoom);\n            }\n            else {\n                this.createSVG();\n                this.render();\n            }\n        }\n    };\n    /**\n     * To provide the array of modules needed for maps rendering\n     * @return {ModuleDeclaration[]}\n     * @private\n     */\n    Maps.prototype.requiredModules = function () {\n        var modules = [];\n        var isVisible = this.findVisibleLayers(this.layers);\n        var annotationEnable = false;\n        this.annotations.map(function (annotation, index) {\n            annotationEnable = annotation.content != null;\n        });\n        if (this.isBubbleVisible()) {\n            modules.push({\n                member: 'Bubble',\n                args: [this]\n            });\n        }\n        if (isVisible.highlight) {\n            modules.push({\n                member: 'Highlight',\n                args: [this]\n            });\n        }\n        if (isVisible.selection) {\n            modules.push({\n                member: 'Selection',\n                args: [this]\n            });\n        }\n        if (this.legendSettings.visible) {\n            modules.push({\n                member: 'Legend',\n                args: [this]\n            });\n        }\n        if (this.zoomSettings.enable || this.zoomSettings.zoomFactor > this.zoomSettings.minZoom) {\n            modules.push({\n                member: 'Zoom',\n                args: [this]\n            });\n        }\n        if (this.isMarkersVisible()) {\n            modules.push({\n                member: 'Marker',\n                args: [this]\n            });\n        }\n        if (this.isDataLabelVisible()) {\n            modules.push({\n                member: 'DataLabel',\n                args: [this]\n            });\n        }\n        if (this.isNavigationVisible()) {\n            modules.push({\n                member: 'NavigationLine',\n                args: [this]\n            });\n        }\n        if (isVisible.tooltip) {\n            modules.push({\n                member: 'MapsTooltip',\n                args: [this]\n            });\n        }\n        if (annotationEnable) {\n            modules.push({\n                member: 'Annotations',\n                args: [this, Annotations]\n            });\n        }\n        if (this.allowPrint) {\n            modules.push({\n                member: 'Print',\n                args: [this]\n            });\n        }\n        if (this.allowImageExport) {\n            modules.push({\n                member: 'ImageExport',\n                args: [this]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * To find marker visibility\n     */\n    Maps.prototype.isMarkersVisible = function () {\n        var isVisible = false;\n        Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n            for (var i = 0; i < layer.markerSettings.length; i++) {\n                if (layer.markerSettings[i].visible) {\n                    isVisible = true;\n                    break;\n                }\n            }\n        });\n        return isVisible;\n    };\n    /**\n     * To find DataLabel visibility\n     */\n    Maps.prototype.isDataLabelVisible = function () {\n        var isVisible = false;\n        for (var i = 0; i < this.layers.length; i++) {\n            if (this.layers[i].dataLabelSettings.visible) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * To find navigation line visibility\n     */\n    Maps.prototype.isNavigationVisible = function () {\n        var isVisible = false;\n        Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n            for (var i = 0; i < layer.navigationLineSettings.length; i++) {\n                if (layer.navigationLineSettings[i].visible) {\n                    isVisible = true;\n                    break;\n                }\n            }\n        });\n        return isVisible;\n    };\n    /**\n     * To find marker visibility\n     */\n    Maps.prototype.isBubbleVisible = function () {\n        var isVisible = false;\n        for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            if (this.getBubbleVisible(layer)) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * To find the bubble visibility from layer\n     * @private\n     */\n    Maps.prototype.getBubbleVisible = function (layer) {\n        var isVisible = false;\n        for (var _i = 0, _a = layer.bubbleSettings; _i < _a.length; _i++) {\n            var bubble = _a[_i];\n            if (bubble.visible) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * This method handles the printing functionality for the maps component.\n     * @param id - Specifies the element to be printed.\n     */\n    Maps.prototype.print = function (id) {\n        if ((this.allowPrint) && (this.printModule)) {\n            this.printModule.print(id);\n        }\n    };\n    /**\n     * This method handles the export functionality for the maps component.\n     * @param type - Specifies the type of the exported file.\n     * @param fileName - Specifies the name of the file with which the rendered maps need to be exported.\n     * @param orientation - Specifies the orientation of the pdf document in exporting.\n     * @param allowDownload - Specifies whether to download as a file or get as base64 string for the file\n     */\n    Maps.prototype.export = function (type, fileName, orientation, allowDownload) {\n        var _this = this;\n        if (isNullOrUndefined(allowDownload)) {\n            allowDownload = true;\n        }\n        if ((type !== 'PDF') && (this.allowImageExport) && (this.imageExportModule)) {\n            return new Promise(function (resolve, reject) {\n                resolve(_this.imageExportModule.export(type, fileName, allowDownload));\n            });\n        }\n        else if ((this.allowPdfExport) && (this.pdfExportModule)) {\n            return new Promise(function (resolve, reject) {\n                resolve(_this.pdfExportModule.export(type, fileName, allowDownload, orientation));\n            });\n        }\n        return null;\n    };\n    /**\n     * To find visibility of layers and markers for required modules load.\n     */\n    Maps.prototype.findVisibleLayers = function (layers, isLayerVisible, isBubblevisible, istooltipVisible, isSelection, isHighlight) {\n        if (isLayerVisible === void 0) { isLayerVisible = false; }\n        if (isBubblevisible === void 0) { isBubblevisible = false; }\n        if (istooltipVisible === void 0) { istooltipVisible = false; }\n        if (isSelection === void 0) { isSelection = false; }\n        if (isHighlight === void 0) { isHighlight = false; }\n        var bubbles;\n        var markers;\n        var navigationLine;\n        for (var _i = 0, layers_1 = layers; _i < layers_1.length; _i++) {\n            var layer = layers_1[_i];\n            isLayerVisible = layer.visible || isLayerVisible;\n            if (layer.visible) {\n                bubbles = layer.bubbleSettings;\n                markers = layer.markerSettings;\n                navigationLine = layer.navigationLineSettings;\n                for (var _a = 0, navigationLine_1 = navigationLine; _a < navigationLine_1.length; _a++) {\n                    var navigation = navigationLine_1[_a];\n                    if (navigation.visible) {\n                        isSelection = navigation.highlightSettings.enable || isSelection;\n                        isHighlight = navigation.selectionSettings.enable || isHighlight;\n                    }\n                }\n                for (var _b = 0, markers_1 = markers; _b < markers_1.length; _b++) {\n                    var marker = markers_1[_b];\n                    if (marker.visible) {\n                        istooltipVisible = marker.tooltipSettings.visible || istooltipVisible;\n                        isSelection = marker.selectionSettings.enable || isSelection;\n                        isHighlight = marker.highlightSettings.enable || isHighlight;\n                    }\n                    if (istooltipVisible) {\n                        break;\n                    }\n                }\n                for (var _c = 0, bubbles_1 = bubbles; _c < bubbles_1.length; _c++) {\n                    var bubble = bubbles_1[_c];\n                    if (bubble.visible) {\n                        istooltipVisible = bubble.tooltipSettings.visible || istooltipVisible;\n                        isSelection = bubble.selectionSettings.enable || isSelection;\n                        isHighlight = bubble.highlightSettings.enable || isHighlight;\n                    }\n                    if (istooltipVisible) {\n                        break;\n                    }\n                }\n                istooltipVisible = layer.tooltipSettings.visible || istooltipVisible;\n                isSelection = layer.selectionSettings.enable || isSelection;\n                isHighlight = layer.highlightSettings.enable || isHighlight;\n            }\n            if (isLayerVisible && isBubblevisible && istooltipVisible) {\n                break;\n            }\n        }\n        return {\n            layer: isLayerVisible, bubble: isBubblevisible, tooltip: istooltipVisible,\n            selection: isSelection, highlight: isHighlight\n        };\n    };\n    /**\n     * This method is used to get the geo location points.\n     * @param {number} layerIndex - Specifies the index number of the layer of the map.\n     * @param {PointerEvent} location - Specifies the location in point format.\n     * @return GeoPosition\n     */\n    Maps.prototype.getGeoLocation = function (layerIndex, location) {\n        var container = document.getElementById(this.element.id);\n        var pageX = location['layerX'] - container.offsetLeft;\n        var pageY = location['layerY'] - container.offsetTop;\n        var currentLayer = this.layersCollection[layerIndex];\n        var translate = getTranslate(this, currentLayer, false);\n        var translatePoint = translate['location'];\n        var translatePointX = translatePoint.x * this.scale;\n        var translatePointY = translatePoint.y * this.scale;\n        var mapSize = (Math.min(this.mapAreaRect.height, this.mapAreaRect.width)\n            * this.mapLayerPanel['currentFactor']) * this.scale;\n        var xx = (this.clip(pageX - translatePointX, 0, mapSize - 1) / mapSize) - 0.5;\n        var yy = 0.5 - (this.clip(pageY - translatePointY, 0, mapSize - 1) / mapSize);\n        var lat = 90 - 360 * Math.atan(Math.exp(-yy * 2 * Math.PI)) / Math.PI;\n        var long = 360 * xx;\n        return { latitude: lat, longitude: long };\n    };\n    Maps.prototype.clip = function (value, minVal, maxVal) {\n        return Math.min(Math.max(value, minVal), maxVal);\n    };\n    /**\n     * This method is used to get the geo location points when tile maps is rendered in the maps component.\n     * @param {PointerEvent} - Specifies the location in point format.\n     * @return GeoPosition\n     */\n    Maps.prototype.getTileGeoLocation = function (location) {\n        var container = document.getElementById(this.element.id);\n        var latLong;\n        var ele = document.getElementById(this.element.id + '_tile_parent');\n        latLong = this.pointToLatLong(location['layerX'] + this.mapAreaRect.x - (ele.offsetLeft - container.offsetLeft), location['layerY'] + this.mapAreaRect.y - (ele.offsetTop - container.offsetTop));\n        return { latitude: latLong['latitude'], longitude: latLong['longitude'] };\n    };\n    /**\n     * This method is used to convert the point to latitude and longitude in maps.\n     * @param pageX - Specifies the x value for the page.\n     * @param pageY - Specifies the y value for the page.\n     */\n    Maps.prototype.pointToLatLong = function (pageX, pageY) {\n        var padding = this.layers[this.layers.length - 1].layerType === 'GoogleStaticMap' ? 0 : 10;\n        pageY = (this.zoomSettings.enable) ? pageY + padding : pageY;\n        var mapSize = 256 * Math.pow(2, this.tileZoomLevel);\n        var x1 = (this.clip(pageX - (this.translatePoint.x * this.scale), 0, mapSize - 1) / mapSize) - 0.5;\n        var y1 = 0.5 - (this.clip(pageY - (this.translatePoint.y * this.scale), 0, mapSize - 1) / mapSize);\n        var lat = 90 - 360 * Math.atan(Math.exp(-y1 * 2 * Math.PI)) / Math.PI;\n        var long = 360 * x1;\n        return { latitude: lat, longitude: long };\n    };\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"background\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"useGroupingSeparator\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"format\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"width\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"height\", void 0);\n    __decorate([\n        Property('MouseMove')\n    ], Maps.prototype, \"tooltipDisplayMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"allowPrint\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"allowImageExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, TitleSettings)\n    ], Maps.prototype, \"titleSettings\", void 0);\n    __decorate([\n        Complex({}, ZoomSettings)\n    ], Maps.prototype, \"zoomSettings\", void 0);\n    __decorate([\n        Complex({}, LegendSettings)\n    ], Maps.prototype, \"legendSettings\", void 0);\n    __decorate([\n        Collection([], LayerSettings)\n    ], Maps.prototype, \"layers\", void 0);\n    __decorate([\n        Collection([], Annotation)\n    ], Maps.prototype, \"annotations\", void 0);\n    __decorate([\n        Complex({}, Margin)\n    ], Maps.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ color: '#DDDDDD', width: 0 }, Border)\n    ], Maps.prototype, \"border\", void 0);\n    __decorate([\n        Property('Material')\n    ], Maps.prototype, \"theme\", void 0);\n    __decorate([\n        Property('Mercator')\n    ], Maps.prototype, \"projectionType\", void 0);\n    __decorate([\n        Property(0)\n    ], Maps.prototype, \"baseLayerIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"description\", void 0);\n    __decorate([\n        Property(1)\n    ], Maps.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Complex({ latitude: null, longitude: null }, CenterPosition)\n    ], Maps.prototype, \"centerPosition\", void 0);\n    __decorate([\n        Complex({}, MapsAreaSettings)\n    ], Maps.prototype, \"mapsArea\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"loaded\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"doubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"rightClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"resize\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"tooltipRender\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"legendRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"tooltipRenderComplete\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeSelected\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"itemSelection\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"itemHighlight\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeHighlight\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"layerRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClusterRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClusterClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClusterMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"dataLabelRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"animationComplete\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"annotationRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"zoom\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"pan\", void 0);\n    Maps = __decorate([\n        NotifyPropertyChanges\n    ], Maps);\n    return Maps;\n}(Component));\nexport { Maps };\n"]},"metadata":{},"sourceType":"module"}