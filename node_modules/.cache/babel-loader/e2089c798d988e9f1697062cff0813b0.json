{"ast":null,"code":"var _jsxFileName = \"/Users/kristalduran/Desktop/PC3 Mapa/pc3-mapa/src/map/map.tsx\";\nimport * as React from 'react';\nimport * as ol from 'openlayers';\nimport { Util } from './util';\nimport './ol.css';\nimport './map.css';\nimport { Controls } from \"./controls\";\nimport { Interactions } from \"./interactions\";\n/**\n * Implementation of ol.map https://openlayers.org/en/latest/apidoc/ol.Map.html\n *\n * example:\n * <Map view={{center: [0, 0], zoom: 1}}>\n *   <layers>\n *     <layer.Tile source={new ol.source.OSM()} />\n *     <layer.Vector options={}/>\n *   </layers>\n *   <controls></controls>\n *   <interactions></interactions>\n *   <overlays></overlays>\n * </Map>\n */\n\nexport class Map extends React.Component {\n  /**\n   * Component mounting LifeCycle; constructor, componentDidMount, and render\n   * https://facebook.github.io/react/docs/react-component.html#mounting\n   */\n  constructor(props) {\n    super(props);\n    this.map = void 0;\n    this.mapDiv = void 0;\n    this.layers = [];\n    this.interactions = [];\n    this.controls = [];\n    this.overlays = [];\n    this.options = {\n      pixelRation: undefined,\n      keyboardEventTarget: undefined,\n      loadTilesWhileAnimation: undefined,\n      loadTilesWhileInteractiong: undefined,\n      logo: undefined,\n      renderer: undefined,\n      //new options  for map component : setZoom, SetCenter, setResolution\n\n      /* Added by : Harinder Randhawa */\n      setCenter: undefined,\n      setZoom: undefined,\n      setResolution: undefined,\n      view: new ol.View({\n        center: [0, 0],\n        zoom: 3\n      }),\n      controls: undefined,\n      interactions: undefined,\n      layers: undefined,\n      overlays: undefined\n    };\n    this.events = {\n      'change': undefined,\n      'change:layerGroup': undefined,\n      'change:size': undefined,\n      'change:target': undefined,\n      'change:view': undefined,\n      'click': undefined,\n      'dblclick': undefined,\n      'moveend': undefined,\n      'pointerdrag': undefined,\n      'pointermove': undefined,\n      'postcompose': undefined,\n      'postrender': undefined,\n      'precompose': undefined,\n      'propertychange': undefined,\n      'singleclick': undefined\n    };\n    console.log('Map constructor');\n  }\n\n  componentDidMount() {\n    let options = Util.getOptions(Object.assign(this.options, this.props));\n    !(options.view instanceof ol.View) && (options.view = new ol.View(options.view));\n    let controlsCmp = Util.findChild(this.props.children, Controls) || {};\n    let interactionsCmp = Util.findChild(this.props.children, Interactions) || {};\n    options.controls = ol.control.defaults(controlsCmp.props).extend(this.controls);\n    options.interactions = ol.interaction.defaults(interactionsCmp.props).extend(this.interactions);\n    options.layers = this.layers;\n    options.overlays = this.overlays;\n    console.log('map options', options);\n    this.map = new ol.Map(options);\n    this.map.setTarget(options.target || this.mapDiv); //regitster events\n\n    let olEvents = Util.getEvents(this.events, this.props);\n\n    for (let eventName in olEvents) {\n      this.map.on(eventName, olEvents[eventName]);\n    }\n  } // update the view with new props\n\n  /* Modified by Harinder Randhawa */\n\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.view && nextProps.view.center !== this.props.view.center) {\n      this.map.getView().setCenter(nextProps.view.center);\n    }\n\n    if (this.props.view && nextProps.view.zoom !== this.props.view.zoom) {\n      this.map.getView().setZoom(nextProps.view.zoom);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"openlayers-map\",\n      ref: el => this.mapDiv = el,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }\n    }, this.props.children);\n  }\n  /**\n   * Component Updating LifeCycle\n   * https://facebook.github.io/react/docs/react-component.html#updating\n   */\n  //componentWillReceiveProps(nextProps)\n  //shouldComponentUpdate(nextProps, nextState)\n  //componentWillUpdate(nextProps, nextState)\n  //componentDidUpdate(prevProps, prevState)\n\n  /**\n   * Component Unmounting LifeCycle\n   * https://facebook.github.io/react/docs/react-component.html#unmounting\n   */\n\n\n  componentWillUnmount() {\n    this.map.setTarget(undefined);\n  } // Ref. https://facebook.github.io/react/docs/context.html#how-to-use-context\n\n\n  getChildContext() {\n    return {\n      mapComp: this,\n      map: this.map\n    };\n  }\n\n} // Ref. https://facebook.github.io/react/docs/context.html#how-to-use-context\n\nMap['childContextTypes'] = {\n  mapComp: React.PropTypes.instanceOf(Map),\n  map: React.PropTypes.instanceOf(ol.Map)\n};","map":{"version":3,"sources":["/Users/kristalduran/Desktop/PC3 Mapa/pc3-mapa/src/map/map.tsx"],"names":["React","ol","Util","Controls","Interactions","Map","Component","constructor","props","map","mapDiv","layers","interactions","controls","overlays","options","pixelRation","undefined","keyboardEventTarget","loadTilesWhileAnimation","loadTilesWhileInteractiong","logo","renderer","setCenter","setZoom","setResolution","view","View","center","zoom","events","console","log","componentDidMount","getOptions","Object","assign","controlsCmp","findChild","children","interactionsCmp","control","defaults","extend","interaction","setTarget","target","olEvents","getEvents","eventName","on","componentWillReceiveProps","nextProps","getView","render","el","componentWillUnmount","getChildContext","mapComp","PropTypes","instanceOf"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as ol from 'openlayers';\nimport {Util} from './util';\nimport {Layers} from './layers/layers';\nimport {layer} from './layers/index';\n\nimport './ol.css';\nimport './map.css';\nimport {Controls} from \"./controls\";\nimport {Interactions} from \"./interactions\";\n\n/**\n * Implementation of ol.map https://openlayers.org/en/latest/apidoc/ol.Map.html\n *\n * example:\n * <Map view={{center: [0, 0], zoom: 1}}>\n *   <layers>\n *     <layer.Tile source={new ol.source.OSM()} />\n *     <layer.Vector options={}/>\n *   </layers>\n *   <controls></controls>\n *   <interactions></interactions>\n *   <overlays></overlays>\n * </Map>\n */\nexport class Map extends React.Component<any, any> {\n\n  map: ol.Map;\n  mapDiv: any;\n\n  layers: any[] = [];\n  interactions: any[] = [];\n  controls: any[] = [];\n  overlays: any[] = [];\n\n  options: any = {\n    pixelRation: undefined,\n    keyboardEventTarget: undefined,\n    loadTilesWhileAnimation: undefined,\n    loadTilesWhileInteractiong: undefined,\n    logo: undefined,\n    renderer: undefined,\n    //new options  for map component : setZoom, SetCenter, setResolution\n    /* Added by : Harinder Randhawa */\n    setCenter: undefined,\n    setZoom: undefined,\n    setResolution: undefined,\n    view: new ol.View({center: [0, 0], zoom: 3}),\n    controls: undefined,\n    interactions: undefined,\n    layers: undefined,\n    overlays: undefined\n  };\n\n  events: any = {\n    'change': undefined,\n    'change:layerGroup': undefined,\n    'change:size': undefined,\n    'change:target': undefined,\n    'change:view': undefined,\n    'click': undefined,\n    'dblclick': undefined,\n    'moveend': undefined,\n    'pointerdrag': undefined,\n    'pointermove': undefined,\n    'postcompose': undefined,\n    'postrender': undefined,\n    'precompose': undefined,\n    'propertychange': undefined,\n    'singleclick': undefined\n  };\n\n  /**\n   * Component mounting LifeCycle; constructor, componentDidMount, and render\n   * https://facebook.github.io/react/docs/react-component.html#mounting\n   */\n  constructor(props) {\n    super(props);\n    console.log('Map constructor');\n  }\n\n  componentDidMount() {\n    let options = Util.getOptions(Object.assign(this.options, this.props));\n    !(options.view instanceof ol.View) && (options.view = new ol.View(options.view));\n\n    let controlsCmp = Util.findChild(this.props.children, Controls) || {};\n    let interactionsCmp = Util.findChild(this.props.children, Interactions) || {};\n\n    options.controls = ol.control.defaults(controlsCmp.props).extend(this.controls);\n    options.interactions = ol.interaction.defaults(interactionsCmp.props).extend(this.interactions);\n\n    options.layers = this.layers;\n    options.overlays = this.overlays;\n    console.log('map options', options);\n\n    this.map = new ol.Map(options);\n    this.map.setTarget(options.target || this.mapDiv);\n\n    //regitster events\n    let olEvents = Util.getEvents(this.events, this.props);\n    for(let eventName in olEvents) {\n      this.map.on(eventName, olEvents[eventName]);\n    }\n  }\n  // update the view with new props\n  /* Modified by Harinder Randhawa */\n  componentWillReceiveProps(nextProps) {\n    if(this.props.view && nextProps.view.center !== this.props.view.center){\n      this.map.getView().setCenter(nextProps.view.center);\n    }\n    if(this.props.view && nextProps.view.zoom !== this.props.view.zoom){\n      this.map.getView().setZoom(nextProps.view.zoom);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"openlayers-map\" ref={(el)=> this.mapDiv = el}>\n        {this.props.children}\n      </div>\n    );\n  }\n\n  /**\n   * Component Updating LifeCycle\n   * https://facebook.github.io/react/docs/react-component.html#updating\n   */\n  //componentWillReceiveProps(nextProps)\n  //shouldComponentUpdate(nextProps, nextState)\n  //componentWillUpdate(nextProps, nextState)\n  //componentDidUpdate(prevProps, prevState)\n\n  /**\n   * Component Unmounting LifeCycle\n   * https://facebook.github.io/react/docs/react-component.html#unmounting\n   */\n  componentWillUnmount() {\n    this.map.setTarget(undefined)\n  }\n\n  // Ref. https://facebook.github.io/react/docs/context.html#how-to-use-context\n  getChildContext(): any {\n    return {\n      mapComp: this,\n      map: this.map\n    }\n  }\n\n}\n\n// Ref. https://facebook.github.io/react/docs/context.html#how-to-use-context\nMap['childContextTypes'] = {\n  mapComp: React.PropTypes.instanceOf(Map),\n  map: React.PropTypes.instanceOf(ol.Map)\n};\n"]},"metadata":{},"sourceType":"module"}